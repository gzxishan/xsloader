{"version":3,"file":"xsloader.js","sources":["../src/util/global.js","../src/util/urls.js","../src/util/base.js","../src/util/index.js","../src/core/script.js","../src/core/module.js","../src/core/define.js","../src/core/plugins/inner-dep.js","../src/core/index.js","../src/public/global-deprecated.js","../src/polyfill/json.js","../src/public/global-base.js","../src/public/is.js","../src/public/funs.js","../src/public/browser.js","../src/public/index.js"],"sourcesContent":["let g;\nif(typeof window !== undefined) {\n\tg = window;\n} else if(typeof self !== undefined) {\n\tg = self;\n} else if(typeof global !== undefined) {\n\tg = global;\n} else {\n\tthrow new Error(\"not found global var!\");\n}\n\nexport default {\n\tglobal:g\n};\n","const ABSOLUTE_PROTOCOL_REG = /^(([a-zA-Z0-9_]*:\\/\\/)|(\\/)|(\\/\\/))/;\nconst ABSOLUTE_PROTOCOL_REG2 = /^([a-zA-Z0-9_]+:)\\/\\/([^/\\s]+)/;\nconst defaultJsExts = [\".js\", \".js+\", \".js++\", \".es\", \"es6\", \".jsx\", \".vue\"];\n\nimport global from './global.js';\nconst xsloader = global.xsloader;\n\nfunction isJsFile(path) {\n\tif(!xsloader.isString(path)) {\n\t\treturn false;\n\t}\n\tvar pluginIndex = path.indexOf(\"!\");\n\tif(pluginIndex > 0) {\n\t\tpath = path.substring(0, pluginIndex);\n\t}\n\tvar index = path.indexOf(\"?\");\n\tif(index > 0) {\n\t\tpath = path.substring(0, index);\n\t}\n\tindex = path.indexOf(\"#\");\n\tif(index > 0) {\n\t\tpath = path.substring(0, index);\n\t}\n\tlet theConfig = xsloader.config();\n\n\tvar jsExts = theConfig && theConfig.jsExts || defaultJsExts;\n\tfor(var i = 0; i < jsExts.length; i++) {\n\t\tif(xsloader.endsWith(path, jsExts[i])) {\n\t\t\treturn {\n\t\t\t\text: jsExts[i],\n\t\t\t\tpath: path\n\t\t\t};\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction dealPathMayAbsolute(path, currentUrl) {\n\tcurrentUrl = currentUrl || location.href;\n\tlet rs = ABSOLUTE_PROTOCOL_REG.exec(path);\n\n\tlet finalPath;\n\tlet absolute;\n\tif(rs) {\n\t\tlet protocol = rs[1];\n\t\tabsolute = true;\n\n\t\trs = ABSOLUTE_PROTOCOL_REG2.exec(currentUrl);\n\t\tlet _protocol = rs && rs[1] || location.protocol;\n\t\tlet _host = rs && rs[2] || location.host;\n\n\t\tif(protocol == \"//\") {\n\t\t\tfinalPath = _protocol + \"//\" + path;\n\t\t} else if(protocol == \"/\") {\n\t\t\tfinalPath = _protocol + \"//\" + _host + path;\n\t\t} else {\n\t\t\tfinalPath = path;\n\t\t}\n\n\t} else {\n\t\tabsolute = false;\n\t\tfinalPath = path;\n\t}\n\treturn {\n\t\tabsolute: absolute,\n\t\tpath: finalPath\n\t};\n}\n\nfunction getPathWithRelative(path, relative, isPathDir) {\n\n\tlet relativeQuery = \"\";\n\tlet qIndex = path.lastIndexOf(\"?\");\n\tif(qIndex >= 0) {\n\t\tpath = path.substring(0, qIndex);\n\t} else {\n\t\tqIndex = path.lastIndexOf(\"#\");\n\t\tif(qIndex >= 0) {\n\t\t\tpath = path.substring(0, qIndex);\n\t\t}\n\t}\n\n\tqIndex = relative.lastIndexOf(\"?\");\n\tif(qIndex >= 0) {\n\t\trelativeQuery = relative.substring(qIndex);\n\t\trelative = relative.substring(0, qIndex);\n\t} else {\n\t\tqIndex = relative.lastIndexOf(\"#\");\n\t\tif(qIndex >= 0) {\n\t\t\trelativeQuery = relative.substring(qIndex);\n\t\t\trelative = relative.substring(0, qIndex);\n\t\t}\n\t}\n\n\tlet absolute = dealPathMayAbsolute(relative);\n\tif(absolute.absolute) {\n\t\treturn absolute.path + relativeQuery;\n\t}\n\n\tif(isPathDir === undefined) {\n\t\tlet index = path.lastIndexOf(\"/\");\n\t\tif(index == path.length - 1) {\n\t\t\tisPathDir = true;\n\t\t} else {\n\t\t\tif(index == -1) {\n\t\t\t\tindex = 0;\n\t\t\t} else {\n\t\t\t\tindex++;\n\t\t\t}\n\t\t\tisPathDir = path.indexOf(\".\", index) == -1;\n\t\t}\n\t}\n\n\tif(xsloader.endsWith(path, \"/\")) {\n\t\tpath = path.substring(0, path.length - 1);\n\t}\n\n\tlet isRelativeDir = false;\n\tif(relative == \".\" || xsloader.endsWith(relative, \"/\")) {\n\t\trelative = relative.substring(0, relative.length - 1);\n\t\tisRelativeDir = true;\n\t} else if(relative == \".\" || relative == \"..\" || xsloader.endsWith(\"/.\") || xsloader.endsWith(\"/..\")) {\n\t\tisRelativeDir = true;\n\t}\n\n\tlet prefix = \"\";\n\tlet index = -1;\n\tlet absolute2 = dealPathMayAbsolute(path);\n\tif(absolute2.absolute) {\n\t\tpath = absolute2.path;\n\t\tlet index2 = path.indexOf(\"//\");\n\t\tindex = path.indexOf(\"/\", index2 + 2);\n\t\tif(index == -1) {\n\t\t\tindex = path.length;\n\t\t}\n\t}\n\n\tprefix = path.substring(0, index + 1);\n\tpath = path.substring(index + 1);\n\n\tlet stack = path.split(\"/\");\n\tif(!isPathDir && stack.length > 0) {\n\t\tstack.pop();\n\t}\n\tlet relatives = relative.split(\"/\");\n\tfor(let i = 0; i < relatives.length; i++) {\n\t\tlet str = relatives[i];\n\t\tif(\"..\" == str) {\n\t\t\tif(stack.length == 0) {\n\t\t\t\tthrow new Error(\"no more upper path!\");\n\t\t\t}\n\t\t\tstack.pop();\n\t\t} else if(\".\" != str) {\n\t\t\tstack.push(str);\n\t\t}\n\t}\n\tif(stack.length == 0) {\n\t\treturn \"\";\n\t}\n\tlet result = prefix + stack.join(\"/\");\n\tif(isRelativeDir && !xsloader.endsWith(result, \"/\")) {\n\t\tresult += \"/\";\n\t}\n\tresult = xsloader.appendArgs2Url(result, relativeQuery);\n\treturn result;\n}\n\nfunction getNodeAbsolutePath(node) {\n\tlet src = node.src;\n\treturn getPathWithRelative(location.href, src);\n}\n\n//去掉url的query参数和#参数\nfunction removeQueryHash(url) {\n\tif(url) {\n\t\tlet index = url.indexOf(\"?\");\n\t\tif(index >= 0) {\n\t\t\turl = url.substring(0, index);\n\t\t}\n\n\t\tindex = url.indexOf(\"#\");\n\t\tif(index >= 0) {\n\t\t\turl = url.substring(0, index);\n\t\t}\n\t}\n\treturn url;\n}\n\nconst REPLACE_STRING_PROPERTIES_EXP = new RegExp(\"\\\\$\\\\{([^\\\\{]+)\\\\}\");\nconst ALL_TYPE_PROPERTIES_EXP = new RegExp(\"^\\\\$\\\\[([^\\\\[\\\\]]+)\\\\]$\");\n\nfunction propertiesDeal(configObject, properties) {\n\tif(!properties) {\n\t\treturn configObject;\n\t}\n\n\tfunction replaceStringProperties(string, properties, property) {\n\t\tlet rs;\n\t\tlet str = string;\n\t\trs = ALL_TYPE_PROPERTIES_EXP.exec(str);\n\t\tif(rs) {\n\t\t\tlet propKey = rs[1];\n\t\t\tlet propValue = xsloader.getObjectAttr(properties, propKey);\n\t\t\tif(propValue === undefined) {\n\t\t\t\treturn str;\n\t\t\t} else {\n\t\t\t\treturn propValue;\n\t\t\t}\n\t\t}\n\n\t\tlet result = \"\";\n\t\twhile(true) {\n\t\t\trs = REPLACE_STRING_PROPERTIES_EXP.exec(str);\n\t\t\tif(!rs) {\n\t\t\t\tresult += str;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tlet propKey = rs[1];\n\t\t\t\tif(property !== undefined && property.propertyKey == propKey) {\n\t\t\t\t\tthrow new Error(\"replace property error:propertyKey=\" + propKey);\n\t\t\t\t} else if(property) {\n\t\t\t\t\tproperty.has = true;\n\t\t\t\t}\n\t\t\t\tresult += str.substring(0, rs.index);\n\t\t\t\tresult += xsloader.getObjectAttr(properties, propKey);\n\t\t\t\tstr = str.substring(rs.index + rs[0].length);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\t//处理属性引用\n\tfunction replaceProperties(obj, property, enableKeyAttr) {\n\t\tif(!obj) {\n\t\t\treturn obj;\n\t\t}\n\t\tif(xsloader.isFunction(obj)) {\n\t\t\treturn obj;\n\t\t} else if(xsloader.isArray(obj)) {\n\t\t\tfor(let i = 0; i < obj.length; i++) {\n\t\t\t\tobj[i] = replaceProperties(obj[i], property, enableKeyAttr);\n\t\t\t}\n\t\t} else if(xsloader.isString(obj)) {\n\t\t\tobj = replaceStringProperties(obj, properties, property);\n\t\t} else if(xsloader.isObject(obj)) {\n\t\t\tif(property) {\n\t\t\t\tproperty.has = false;\n\t\t\t}\n\t\t\tlet replaceKeyMap = {};\n\t\t\tfor(let x in obj) {\n\t\t\t\tif(property) {\n\t\t\t\t\tproperty.propertyKey = x;\n\t\t\t\t}\n\t\t\t\tobj[x] = replaceProperties(obj[x], property, enableKeyAttr);\n\t\t\t\tif(enableKeyAttr) {\n\t\t\t\t\tlet _x = replaceStringProperties(x, properties, property);\n\t\t\t\t\tif(_x !== x) {\n\t\t\t\t\t\treplaceKeyMap[x] = _x;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(let x in replaceKeyMap) {\n\t\t\t\tlet objx = obj[x];\n\t\t\t\tdelete obj[x];\n\t\t\t\tobj[replaceKeyMap[x]] = objx;\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\n\t}\n\n\tif(!properties.__dealt__) {\n\t\tlet property = {\n\t\t\thas: false\n\t\t};\n\n\t\tfor(let x in properties) {\n\t\t\tlet fun = properties[x];\n\t\t\tif(xsloader.isFunction(fun)) {\n\t\t\t\tproperties[x] = fun.call(properties);\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\treplaceProperties(properties, property);\n\t\t} while (property.has);\n\t\tproperties.__dealt__ = true;\n\t}\n\n\treturn replaceProperties(configObject, undefined, true);\n}\n\nfunction replaceModulePrefix(config, deps) {\n\n\tif(!deps) {\n\t\treturn;\n\t}\n\n\tfor(let i = 0; i < deps.length; i++) {\n\t\tlet m = deps[i];\n\t\tlet index = m.indexOf(\"!\");\n\t\tlet pluginParam = index > 0 ? m.substring(index) : \"\";\n\t\tm = index > 0 ? m.substring(0, index) : m;\n\n\t\tindex = m.indexOf(\"?\");\n\t\tlet query = index > 0 ? m.substring(index) : \"\";\n\t\tm = index > 0 ? m.substring(0, index) : m;\n\n\t\tlet isJsFile = isJsFile(m);\n\t\tif(!isJsFile && (xsloader.startsWith(m, \".\") || dealPathMayAbsolute(m).absolute)) {\n\t\t\tdeps[i] = m + \".js\" + query + pluginParam;\n\t\t}\n\t}\n\n\tif(config.modulePrefixCount) {\n\t\t//模块地址的前缀替换\n\t\tfor(let prefix in config.modulePrefix) {\n\t\t\tlet replaceStr = config.modulePrefix[prefix].replace;\n\t\t\tlet len = prefix.length;\n\t\t\tfor(let i = 0; i < deps.length; i++) {\n\t\t\t\tlet m = deps[i];\n\t\t\t\tlet pluginIndex = m.indexOf(\"!\");\n\t\t\t\tlet pluginName = null;\n\t\t\t\tif(pluginIndex >= 0) {\n\t\t\t\t\tpluginName = m.substring(0, pluginIndex + 1);\n\t\t\t\t\tm = m.substring(pluginIndex + 1);\n\t\t\t\t}\n\t\t\t\tif(xsloader.startsWith(m, prefix)) {\n\t\t\t\t\tlet dep = replaceStr + m.substring(len);\n\t\t\t\t\tdeps[i] = pluginName ? pluginName + dep : dep;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction getScriptBySubname(subname) {\n\tlet ss = document.getElementsByTagName('script');\n\tif(subname) {\n\t\tfor(let i = 0; i < ss.length; i++) {\n\t\t\tlet script = ss[i];\n\t\t\tlet src = script.src;\n\t\t\tsrc = src.substring(src.lastIndexOf(\"/\"));\n\t\t\tif(src.indexOf(subname) >= 0) {\n\t\t\t\treturn script;\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn ss;\n\t}\n}\n\nexport default {\n\tgetPathWithRelative,\n\tgetNodeAbsolutePath,\n\tdealPathMayAbsolute,\n\tremoveQueryHash,\n\tpropertiesDeal,\n\treplaceModulePrefix,\n\tisJsFile,\n\tgetScriptBySubname,\n};","import global from './global.js';\nconst xsloader = global.xsloader;\nconst commentRegExp = /\\/\\*[\\s\\S]*?\\*\\/|([^:\"'=]|^)\\/\\/.*$/mg;\nconst cjsRequireRegExp = /[^.]require\\s*\\(\\s*[\"']([^'\"\\r\\n]+)[\"']\\s*\\)/g;\n\n//基于有向图进行循环依赖检测\nfunction GraphPath() {\n\tlet pathEdges = {};\n\tlet vertexMap = {};\n\tlet depMap = {};\n\tthis.addEdge = function(begin, end) {\n\t\tdepMap[begin + \"|\" + end] = true;\n\t\tif(!pathEdges[begin]) {\n\t\t\tpathEdges[begin] = [];\n\t\t}\n\t\tif(!vertexMap[begin]) {\n\t\t\tvertexMap[begin] = true;\n\t\t}\n\t\tif(!vertexMap[end]) {\n\t\t\tvertexMap[end] = true;\n\t\t}\n\t\tpathEdges[begin].push({\n\t\t\tbegin: begin,\n\t\t\tend: end\n\t\t});\n\t};\n\n\tthis.hasDep = function(name, dep) {\n\t\treturn depMap[name + \"|\" + dep];\n\t};\n\n\tthis.tryAddEdge = function(begin, end) {\n\t\tthis.addEdge(begin, end);\n\t\tlet paths = this.hasLoop();\n\t\tif(paths.length > 0) {\n\t\t\tpathEdges[begin].pop();\n\t\t}\n\t\treturn paths;\n\t};\n\n\tthis.hasLoop = function() {\n\t\tlet visited = {};\n\t\tlet recursionStack = {};\n\n\t\tfor(let x in vertexMap) {\n\t\t\tvisited[x] = false;\n\t\t\trecursionStack[x] = false;\n\t\t}\n\n\t\tlet has = false;\n\t\tlet paths = [];\n\t\tfor(let name in vertexMap) {\n\t\t\tpaths = [];\n\t\t\tif(checkLoop(name, visited, recursionStack, paths)) {\n\t\t\t\thas = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn has ? paths : [];\n\t};\n\n\tfunction checkLoop(v, visited, recursionStack, paths) {\n\t\tif(!visited[v]) {\n\t\t\tvisited[v] = true;\n\t\t\trecursionStack[v] = true;\n\t\t\tpaths.push(v);\n\n\t\t\tif(pathEdges[v]) {\n\t\t\t\tlet edges = pathEdges[v];\n\t\t\t\tfor(let i = 0; i < edges.length; i++) {\n\t\t\t\t\tlet edge = edges[i];\n\t\t\t\t\tif(!visited[edge.end] && checkLoop(edge.end, visited, recursionStack, paths)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if(recursionStack[edge.end]) {\n\t\t\t\t\t\tpaths.push(edge.end);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\trecursionStack[v] = false;\n\t\treturn false;\n\t}\n}\n\n//使得内部的字符串变成数组\nfunction strValue2Arr(obj) {\n\tif(!obj || xsloader.isArray(obj)) {\n\t\treturn;\n\t}\n\tfor(let x in obj) {\n\t\tif(xsloader.isString(obj[x])) {\n\t\t\tobj[x] = [obj[x]];\n\t\t}\n\t}\n}\n\nfunction each(ary, func, isSync, fromEnd) {\n\tif(ary) {\n\t\tif(isSync) {\n\t\t\tfunction fun(index) {\n\t\t\t\tif(fromEnd ? index < 0 : index >= ary.length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet handle = function(rs) {\n\t\t\t\t\tif(rs) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tfun(fromEnd ? index - 1 : index + 1);\n\t\t\t\t};\n\t\t\t\tfunc(ary[index], index, ary, handle);\n\t\t\t}\n\t\t\tfun(fromEnd ? ary.length - 1 : 0);\n\t\t} else {\n\t\t\tif(fromEnd) {\n\t\t\t\tfor(let i = ary.length - 1; i >= 0; i--) {\n\t\t\t\t\tif(func(ary[i], i, ary)) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor(let i = 0; i < ary.length; i++) {\n\t\t\t\t\tif(func(ary[i], i, ary)) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n}\n\nfunction __commentReplace(match, singlePrefix) {\n\treturn singlePrefix || '';\n}\n//添加内部直接require('...')的模块\nfunction appendInnerDeps(deps, callback) {\n\tif(xsloader.isFunction(callback)) {\n\t\tcallback\n\t\t\t.toString()\n\t\t\t.replace(commentRegExp, __commentReplace)\n\t\t\t.replace(cjsRequireRegExp, function(match, dep) {\n\t\t\t\tdeps.push(dep);\n\t\t\t});\n\t}\n}\n\nlet idCount = 2019;\nfunction getAndIncIdCount() {\n\treturn idCount++;\n}\n\nexport default {\n\tgraphPath: new GraphPath(),\n\tstrValue2Arr,\n\teach,\n\tappendInnerDeps,\n\tgetAndIncIdCount\n};","import urls from './urls.js';\nimport global from './global.js';\nimport base from './base.js';\n\nexport default {\n\t...urls,\n\t...global,\n\t...base\n};","import utils from \"../util/index.js\";\nconst global = utils.global;\nconst xsloader = global.xsloader;\n\nconst defContextName = \"xsloader1.1.x\";\nconst DATA_ATTR_MODULE = 'data-xsloader-module';\nconst DATA_ATTR_CONTEXT = \"data-xsloader-context\";\n\nconst isOpera = typeof opera !== 'undefined' && opera.toString() === '[object Opera]';\nconst readyRegExp = navigator.platform === 'PLAYSTATION 3' ? /^complete$/ : /^(complete|loaded)$/;\nconst theLoaderScript = document.currentScript || utils.getScriptBySubname(\"xsloader.js\");\nconst theLoaderUrl = utils.getNodeAbsolutePath(theLoaderScript);\nconst thePageUrl = (function() {\n\tlet url = location.href;\n\turl = utils.removeQueryHash(url);\n\treturn url;\n})();\n\nconst currentDefineModuleQueue = []; //当前回调的模块\ncurrentDefineModuleQueue.peek = function() {\n\tif(this.length > 0) {\n\t\treturn this[this.length - 1];\n\t}\n};\n\nlet lastAppendHeadDom = theLoaderScript;\nlet useDefineQueue;\nlet theRealDefine;\nif(utils.safariVersion > 0 && utils.safariVersion <= 7) {\n\tuseDefineQueue = [];\n}\n/////////////////////////////\n\nclass Invoker {\n\tmoduleMap;\n\tconstructor(moduleMap) {\n\t\tthis.moduleMap = moduleMap;\n\t}\n\tgetAbsoluteUrl() {\n\t\treturn this.moduleMap.src;\n\t}\n\tgetName() {\n\t\treturn this.moduleMap.name;\n\t}\n\tinvoker() {\n\t\treturn this.moduleMap.invoker;\n\t}\n\tabsUrl() { //用于获取其他模块地址的参考路径\n\t\treturn this.moduleMap.absoluteUrl;\n\t}\n}\n\nclass DefineObject {\n\tthiz;\n\targs;\n\tisRequire;\n\tsrc;\n\tparentDefine;\n\thandle;\n\tselfname;\n\tdeps;\n\tcallback;\n\tthatInvoker;\n\tconstructor(thiz, args, isRequire = false) {\n\t\tthis.thiz = thiz;\n\t\tthis.args = args;\n\t\tthis.isRequire = isRequire;\n\t\tthis.parentDefine = currentDefineModuleQueue.peek();\n\t\tthis.handle = {\n\t\t\tonError(err) {\n\n\t\t\t},\n\t\t\tbefore(deps) {},\n\t\t\tdepBefore(index, dep, depDeps) {},\n\t\t\torderDep: false,\n\t\t\tabsoluteUrl: undefined,\n\t\t\tinstance: undefined,\n\t\t\tabsUrl: () => {\n\t\t\t\treturn this.handle.absoluteUrl || (this.thatInvoker ? this.thatInvoker.absUrl() : null);\n\t\t\t}\n\n\t\t};\n\t\tif(thiz instanceof Invoker) {\n\t\t\tthis.thatInvoker = thiz;\n\t\t} else if(thiz instanceof DefineObject) {\n\t\t\tthis.thatInvoker = thiz.thatInvoker;\n\t\t}\n\t\tif(!isRequire && (this.parentDefine || this.thatInvoker) && (args.length == 0 || !xsloader.isString(args[0]))) {\n\t\t\tthrow new Error(\"define:expected selfname\");\n\t\t}\n\t}\n}\n\n////////////////////////\n\n/**\n * 获取当前脚本，返回对象：\n * src:脚本绝对地址，不含参数\n * node:脚本dom对象\n * @param {Object} isRemoveQueryHash\n */\nfunction getCurrentScript(isRemoveQueryHash = true) {\n\tfunction _getCurrentScriptOrSrc() { //兼容获取正在运行的js\n\t\t//取得正在解析的script节点\n\t\tif(document.currentScript !== undefined) { //firefox 4+\n\t\t\tlet node = document.currentScript && document.currentScript.src && document.currentScript;\n\t\t\tif(node) {\n\t\t\t\treturn {\n\t\t\t\t\tnode,\n\t\t\t\t\tsrc: node.src\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tif(utils.IE_VERSION > 0 && utils.IE_VERSION <= 10) {\n\t\t\tlet nodes = document.getElementsByTagName(\"script\"); //只在head标签中寻找\n\t\t\tfor(let i = 0; i < nodes.length; i++) {\n\t\t\t\tlet node = nodes[i];\n\t\t\t\tif(node.readyState === \"interactive\") {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\tsrc: node.src\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlet stack;\n\t\ttry {\n\t\t\tlet a = undefined;\n\t\t\ta.b.c(); //强制报错,以便捕获e.stack\n\t\t} catch(e) { //safari的错误对象只有line,sourceId,sourceURL\n\t\t\tstack = e.stack || e.sourceURL || e.stacktrace || '';\n\t\t\tif(!stack && window.opera) {\n\t\t\t\t//opera 9没有e.stack,但有e.Backtrace,但不能直接取得,需要对e对象转字符串进行抽取\n\t\t\t\tstack = (String(e).match(/of linked script \\S+/g) || []).join(\" \");\n\t\t\t}\n\t\t}\n\t\tif(stack) {\n\t\t\t/**e.stack最后一行在所有支持的浏览器大致如下:\n\t\t\t *chrome23:\n\t\t\t * at http://113.93.50.63/data.js:4:1\n\t\t\t *firefox17:\n\t\t\t *@http://113.93.50.63/query.js:4\n\t\t\t *opera12:\n\t\t\t *@http://113.93.50.63/data.js:4\n\t\t\t *IE10:\n\t\t\t *  at Global code (http://113.93.50.63/data.js:4:1)\n\t\t\t */\n\t\t\tstack = stack.split(/[@ ]/g).pop(); //取得最后一行,最后一个空格或@之后的部分\n\t\t\tstack = stack[0] == \"(\" ? stack.slice(1, -1) : stack;\n\t\t\tlet s = stack.replace(/(:\\d+)?:\\d+$/i, \"\"); //去掉行号与或许存在的出错字符起始位置\n\t\t\treturn {\n\t\t\t\tsrc: s\n\t\t\t};\n\t\t}\n\t}\n\n\tlet rs = _getCurrentScriptOrSrc();\n\tif(rs) {\n\t\tif(!rs.node) {\n\t\t\tlet src = utils.removeQueryHash(rs.src);\n\t\t\tlet nodes = document.getElementsByTagName(\"script\"); //只在head标签中寻找\n\t\t\tfor(let i = 0; i < nodes.length; i++) {\n\t\t\t\tlet node = nodes[i];\n\t\t\t\tif(src == utils.removeQueryHash(node.src)) {\n\t\t\t\t\trs.node = node;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\trs.src = utils.getNodeAbsolutePath(rs.src);\n\t\tif(isRemoveQueryHash) {\n\t\t\trs.src = utils.removeQueryHash(rs.src);\n\t\t}\n\t}\n\treturn rs;\n\n}\n\nfunction __createNode() {\n\tlet node = document.createElement('script');\n\tnode.type = 'text/javascript';\n\tnode.charset = 'utf-8';\n\tnode.async = true;\n\treturn node;\n}\n\nfunction __removeListener(node, func, name, ieName) {\n\tif(node.detachEvent && !isOpera) {\n\t\tif(ieName) {\n\t\t\tnode.detachEvent(ieName, func);\n\t\t}\n\t} else {\n\t\tnode.removeEventListener(name, func, false);\n\t}\n}\n\n/**\n * callbackObj.onScriptLoad\n * callbackObj.onScriptError\n *\n */\nfunction __browserLoader(moduleName, url, callbackObj) {\n\tlet node = __createNode();\n\tnode.setAttribute(DATA_ATTR_MODULE, moduleName);\n\tnode.setAttribute(DATA_ATTR_CONTEXT, defContextName);\n\tif(node.attachEvent &&\n\t\t!(node.attachEvent.toString && node.attachEvent.toString().indexOf('[native code') < 0) &&\n\t\t!isOpera) {\n\t\tnode.attachEvent('onreadystatechange', callbackObj.onScriptLoad);\n\t} else {\n\t\tnode.addEventListener('load', callbackObj.onScriptLoad, true);\n\t\tlet errListen = function() {\n\t\t\t__removeListener(node, errListen, 'error');\n\t\t\tcallbackObj.onScriptError.apply(this, arguments);\n\t\t};\n\t\tcallbackObj.errListen = errListen;\n\t\tnode.addEventListener('error', errListen, true);\n\t}\n\tnode.src = url;\n\tappendHeadDom(node);\n}\n\nfunction __getScriptData(evt, callbackObj) {\n\tlet node = evt.currentTarget || evt.srcElement;\n\t__removeListener(node, callbackObj.onScriptLoad, 'load', 'onreadystatechange');\n\t__removeListener(node, callbackObj.errListen, 'error');\n\treturn {\n\t\tnode: node,\n\t\tname: node && node.getAttribute(DATA_ATTR_MODULE),\n\t\tsrc: node && utils.getNodeAbsolutePath(node.src || node.getAttribute(\"src\"))\n\t};\n}\n\nfunction appendHeadDom(dom) {\n\tif(!xsloader.isDOM(dom)) {\n\t\tthrow new Error(\"expected dom object,but provided:\" + dom);\n\t}\n\tlet nextDom = lastAppendHeadDom.nextSibling;\n\tutils.head.insertBefore(dom, nextDom);\n\t//\t\t\thead.appendChild(dom);\n\tlastAppendHeadDom = dom;\n}\n\n/////////////////////////\n\nfunction loadScript(moduleName, url, onload, onerror) {\n\tlet callbackObj = {};\n\tcallbackObj.onScriptLoad = function(evt) {\n\t\tif(callbackObj.removed) {\n\t\t\treturn;\n\t\t}\n\t\tif(evt.type === 'load' || (readyRegExp.test((evt.currentTarget || evt.srcElement).readyState))) {\n\t\t\tcallbackObj.removed = true;\n\t\t\tlet scriptData = __getScriptData(evt, callbackObj);\n\t\t\tif(useDefineQueue) {\n\t\t\t\tutils.each(useDefineQueue, (defineObject) => {\n\t\t\t\t\tdefineObject.src = scriptData.src;\n\t\t\t\t});\n\t\t\t\ttheRealDefine.define([...useDefineQueue]);\n\t\t\t}\n\t\t\tonload(scriptData);\n\t\t}\n\t};\n\tcallbackObj.onScriptError = function(evt) {\n\t\tif(callbackObj.removed) {\n\t\t\treturn;\n\t\t}\n\t\tcallbackObj.removed = true;\n\t\tlet scriptData = __getScriptData(evt, callbackObj);\n\t\tonerror(scriptData);\n\t};\n\t__browserLoader(moduleName, url, callbackObj);\n}\n\nfunction doDefine(thiz, args, isRequire) {\n\n\tlet defineObject = new DefineObject(thiz, args, isRequire);\n\tif(!useDefineQueue) {\n\t\tdefineObject.src = getCurrentScript().src;\n\t\ttry { //防止执行其他脚本\n\t\t\tif(defineObject.src) {\n\t\t\t\tvar node = document.currentScript;\n\t\t\t\tif(node && node.getAttribute(\"src\") && node.getAttribute(DATA_ATTR_CONTEXT) != defContextName &&\n\t\t\t\t\tdefineObject.src != theLoaderUrl && defineObject.src != thePageUrl) {\n\t\t\t\t\tconsole.error(\"unknown js script module:\" + xsloader.xsJson2String(defineObject.src));\n\t\t\t\t\tconsole.error(node);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch(e) {\n\t\t\txsloader.config().error(e);\n\t\t}\n\n\t}\n\n\tlet handle = {\n\t\tthen(option) {\n\t\t\tdefineObject.handle = xsloader.extend(defineObject.handle, option);\n\t\t\treturn this;\n\t\t},\n\t\terror(onError) {\n\t\t\tdefineObject.handle.onError = onError;\n\t\t\treturn this;\n\t\t}\n\t};\n\n\txsloader.asyncCall(() => {\n\t\tif(useDefineQueue) {\n\t\t\tuseDefineQueue.push(defineObject);\n\t\t} else {\n\t\t\ttheRealDefine.define([defineObject]);\n\t\t}\n\t});\n\n\treturn handle;\n}\n\nfunction predefine() {\n\tlet args = [];\n\tfor(let i = 0; i < arguments.length; i++) {\n\t\targs.push(arguments[i]);\n\t}\n\treturn doDefine(this, args, false);\n}\n\nfunction prerequire() {\n\tthrow 'todo...';\n}\n\n//对于safari7-:在脚本加载事件中可获得正确的脚本地址\n\nconst initDefine = function(theDefine) {\n\ttheRealDefine = theDefine;\n\treturn {\n\t\tpredefine,\n\t\tprerequire,\n\t};\n};\n\nexport default {\n\tdefContextName,\n\ttheLoaderScript,\n\ttheLoaderUrl,\n\tthePageUrl,\n\tappendHeadDom,\n\tinitDefine,\n\tInvoker,\n\tDefineObject,\n\tloadScript,\n\tcurrentDefineModuleQueue\n};","import utils from \"../util/index.js\";\nimport script from \"./script.js\";\nconst global = utils.global;\nconst xsloader = global.xsloader;\nconst theDefinedMap = {};\nconst INNER_DEPS_PLUGIN = \"__inner_deps__\";\nconst innerDepsMap = {}; //内部依赖加载插件用于保存依赖的临时map\n\nfunction getModule(nameOrUrl) {\n\tnameOrUrl = utils.removeUrlParam(nameOrUrl);\n\tlet m = theDefinedMap[nameOrUrl];\n\treturn m ? m.get() : null;\n}\n\nfunction setModule(nameOrUrl, m) {\n\tnameOrUrl = utils.removeUrlParam(nameOrUrl);\n\tlet last = theDefinedMap[nameOrUrl];\n\ttheDefinedMap[nameOrUrl] = m;\n\treturn last;\n}\n\nfunction buildInvoker(obj) {\n\tlet invoker = obj[\"thiz\"];\n\tlet module = obj.module || obj;\n\tlet id = xsloader.randId();\n\tinvoker.getId = function() {\n\t\treturn id;\n\t};\n\tinvoker.getUrl = function(relativeUrl, appendArgs, optionalAbsUrl) {\n\t\tif(optionalAbsUrl && !utils.dealPathMayAbsolute(optionalAbsUrl).absolute) {\n\t\t\tthrow new Error(-1, \"expected absolute url:\" + optionalAbsUrl);\n\t\t}\n\t\tif(appendArgs === undefined) {\n\t\t\tappendArgs = true;\n\t\t}\n\t\tlet url;\n\t\tif(relativeUrl === undefined) {\n\t\t\turl = this.getAbsoluteUrl();\n\t\t} else if(xsloader.startsWith(relativeUrl, \".\") || utils.dealPathMayAbsolute(relativeUrl).absolute) {\n\t\t\turl = utils.getPathWithRelative(optionalAbsUrl || this.rurl(), relativeUrl);\n\t\t} else {\n\t\t\turl = xsloader.config().baseUrl + relativeUrl;\n\t\t}\n\t\tif(appendArgs) {\n\t\t\tif(url == script.thePageUrl) {\n\t\t\t\turl += location.search + location.hash;\n\t\t\t}\n\t\t\treturn xsloader.config().dealUrl(module, url);\n\t\t} else {\n\t\t\treturn url;\n\t\t}\n\t};\n\tinvoker.require = function() {\n\t\tlet h = xsloader.require.apply(invoker, arguments);\n\t\treturn h;\n\t};\n\tinvoker.define = function() {\n\t\tlet h = xsloader.define.apply(invoker, arguments);\n\t\treturn h;\n\t};\n\tinvoker.rurl = function(thenHandle) {\n\t\treturn thenHandle && thenHandle.absUrl() || this.absUrl() || this.getAbsoluteUrl();\n\t};\n\tinvoker.defineAsync = function() {\n\t\tlet h = this.define.apply(this, arguments);\n\t\treturn h;\n\t};\n\tinvoker.withAbsUrl = function(absoluteUrl) {\n\t\tlet moduleMap = {\n\t\t\tmodule: module,\n\t\t\tsrc: absoluteUrl,\n\t\t\tabsoluteUrl: absoluteUrl,\n\t\t\tname: invoker.getName(),\n\t\t\tinvoker: invoker.invoker()\n\t\t};\n\t\tmoduleMap.thiz = new script.Invoker(moduleMap);\n\t\tbuildInvoker(moduleMap);\n\t\treturn moduleMap.thiz;\n\t};\n}\n\nfunction _newModule(name, absoluteUrl, thatInvoker, callback) {\n\tlet defineObject = new script.DefineObject(null, null, false);\n\tdefineObject.selfname = name;\n\tdefineObject.src = null;\n\tdefineObject.deps = null;\n\tdefineObject.thatInvoker = thatInvoker;\n\tdefineObject.callback = callback;\n\tdefineObject.handle = {\n\t\tabsUrl() {\n\t\t\treturn null;\n\t\t}\n\t};\n\treturn newModule(defineObject);\n}\n\n//\n//模块依赖来源：\n//1、define里声明的\n//2、define或require里直接require('...')\n//3、config里配置的\n//4、手动通过handle.before或depBefore进行修改的\n/*\n *模块的名字来源：\n * 1、模块url地址:一定存在\n * 2、模块define时提供的：可选\n * 3、paths或depsPaths提供的：可选\n * 4、name!提供的：可选\n */\nfunction newModule(defineObject) {\n\n\tlet instances = []; //所有模块实例\n\tlet moduleMap = {\n\t\tid: utils.getAndIncIdCount(),\n\t\tname: defineObject.selfname || defineObject.src,\n\t\tdeps: defineObject.deps || [],\n\t\trelys: [],\n\t\totherModule: undefined,\n\t\tdirectDefineIndex: 0, //模块直接声明的依赖开始索引\n\t\tignoreAspect: false,\n\t\tdepModules: null,\n\t\tsrc: null, //绝对路径,可能等于当前页面路径\n\t\tabsoluteUrl: defineObject.absoluteUrl,\n\t\tcallback: defineObject.callback,\n\t\t_loadCallback: null,\n\t\tmoduleObject: undefined, //依赖模块对应的对象\n\t\tloopObject: undefined, //循环依赖对象\n\t\tinvoker: defineObject.thatInvoker,\n\t\tinstanceType: \"single\",\n\t\tsetInstanceType(instanceType) {\n\t\t\tthis.instanceType = instanceType;\n\t\t},\n\t\t_singlePluginResult: {},\n\t\tlastSinglePluginResult(id, pluginArgs) {\n\t\t\tif(this._singlePluginResult[id]) {\n\t\t\t\treturn this._singlePluginResult[id][pluginArgs];\n\t\t\t}\n\t\t},\n\t\tsetSinglePluginResult(willCache, id, pluginArgs, obj) {\n\t\t\tif(willCache) {\n\t\t\t\tif(!this._singlePluginResult[id]) {\n\t\t\t\t\tthis._singlePluginResult[id] = {};\n\t\t\t\t}\n\t\t\t\tthis._singlePluginResult[id][pluginArgs] = obj;\n\t\t\t} else {\n\t\t\t\tif(this._singlePluginResult[id]) {\n\t\t\t\t\tdelete this._singlePluginResult[id][pluginArgs];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tfinish(args) {\n\t\t\tif(this.directDefineIndex != 0) {\n\t\t\t\tlet _directArgs = [];\n\t\t\t\tfor(let i = this.directDefineIndex; i < args.length; i++) {\n\t\t\t\t\t_directArgs.push(args[i]);\n\t\t\t\t}\n\t\t\t\targs = _directArgs;\n\t\t\t}\n\t\t\tthis.depModules = args;\n\t\t\tlet obj;\n\t\t\tif(xsloader.isFunction(this.callback)) {\n\t\t\t\ttry {\n\t\t\t\t\tscript.currentDefineModuleQueue.push(this);\n\t\t\t\t\tscript.obj = this.callback.apply(this.thiz, args);\n\t\t\t\t\tscript.currentDefineModuleQueue.pop();\n\t\t\t\t} catch(e) {\n\t\t\t\t\tscript.currentDefineModuleQueue.pop();\n\t\t\t\t\tconsole.error(\"error occured,invoker.url=\", this.invoker ? this.invoker.getUrl() : \"\");\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t\tthis.setState(\"error\", e);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tobj = this.callback;\n\t\t\t\tif(this.moduleObject !== undefined) {\n\t\t\t\t\tconsole.log(\"ignore moudule named '\" + moduleMap.name + \"':\" + obj);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet isDefault = false;\n\t\t\tif(obj === undefined) {\n\t\t\t\tisDefault = true;\n\t\t\t\tobj = {\n\t\t\t\t\t__default: true\n\t\t\t\t};\n\t\t\t}\n\t\t\tif(this.loopObject) {\n\t\t\t\tif(!xsloader.isObject(obj)) {\n\t\t\t\t\tthrow new Error(\"循环依赖的模块必须是对象：\" + this.name);\n\t\t\t\t}\n\t\t\t\tfor(let x in obj) {\n\t\t\t\t\tthis.loopObject[x] = obj[x];\n\t\t\t\t}\n\t\t\t\tobj = this.loopObject;\n\t\t\t}\n\t\t\t//this.moduleObject不为undefined，则使用了exports\n\t\t\tif(this.moduleObject === undefined ||\n\t\t\t\t!isDefault && obj !== undefined //如果使用了return、则优先使用\n\t\t\t) {\n\t\t\t\tthis.moduleObject = obj;\n\t\t\t}\n\t\t\tthis.setState(\"defined\");\n\t\t},\n\t\tstate: \"init\", //init,loading,loaded,defined,error,\n\t\terrinfo: null,\n\t\t_callback(fun) {\n\t\t\tlet thiz = this;\n\t\t\tlet _state = thiz.state;\n\t\t\tif(_state == 'defined' || thiz.loopObject) {\n\t\t\t\tlet theCallback = function() {\n\t\t\t\t\tif(fun) {\n\t\t\t\t\t\tlet depModule = _newDepModule(thiz, fun.thatInvoker, fun.relyCallback, fun.pluginArgs);\n\t\t\t\t\t\tdepModule.init();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t//已经加载了模块，仍然需要判断为其另外设置的依赖模块是否已被加载\n\t\t\t\tlet deps = !thiz.loopObject && xsloader.config().getDeps(thiz.name);\n\t\t\t\t//console.log(this.name,\":\",deps);\n\t\t\t\t//deps=null;\n\t\t\t\tif(deps && deps.length > 0) {\n\t\t\t\t\txsloader.require(deps, function() {\n\t\t\t\t\t\ttheCallback();\n\t\t\t\t\t}).then({\n\t\t\t\t\t\tdefined_module_for_deps: thiz.name\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\ttheCallback();\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t} else if(_state == \"timeout\" || _state == \"error\") {\n\t\t\t\tif(fun) {\n\t\t\t\t\tfun.relyCallback(this, this.errinfo);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\tsetState(_state, errinfo) {\n\t\t\tthis.state = _state;\n\t\t\tthis.errinfo = errinfo;\n\t\t\tif(!this._callback()) {\n\t\t\t\twhile(this.relys.length) {\n\t\t\t\t\tlet fun = this.relys.shift();\n\t\t\t\t\tthis._callback(fun);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tget() {\n\t\t\tif(this.otherModule) {\n\t\t\t\tthis.state = this.otherModule.state; //状态同步,保持与otherModule状态相同\n\t\t\t\treturn this.otherModule;\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * 依赖当前模块、表示依赖otherModule模块，当前模块为别名或引用。\n\t\t * @param {Object} otherModule\n\t\t */\n\t\ttoOtherModule(otherModule) {\n\t\t\tthis.otherModule = otherModule;\n\t\t\tthis.get(); //状态同步\n\t\t\tlet theRelys = this.relys;\n\t\t\tthis.relys = [];\n\t\t\twhile(theRelys.length) {\n\t\t\t\tlet fun = theRelys.shift();\n\t\t\t\totherModule.relyIt(fun.thatInvoker, fun.relyCallback, fun.pluginArgs);\n\t\t\t}\n\t\t},\n\t\twhenNeed(loadCallback) {\n\t\t\tif(this.relys.length || this.otherModule && this.otherModule.relys.length) {\n\t\t\t\tloadCallback(); //已经被依赖了\n\t\t\t} else {\n\t\t\t\tthis._loadCallback = loadCallback;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * \n\t\t * @param {Object} thatInvoker\n\t\t * @param {Object} callbackFun function(depModule,err)\n\t\t * @param {Object} pluginArgs\n\t\t */\n\t\trelyIt(thatInvoker, callbackFun, pluginArgs) {\n\t\t\tif(this.otherModule) {\n\t\t\t\tthis.get(); //状态同步\n\t\t\t\tthis.otherModule.relyIt(thatInvoker, callbackFun, pluginArgs); //传递给otherModule\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet fun = {\n\t\t\t\tthatInvoker: thatInvoker,\n\t\t\t\trelyCallback: callbackFun,\n\t\t\t\tpluginArgs: pluginArgs\n\t\t\t};\n\t\t\tif(this._callback(fun)) {\n\t\t\t\tthis.relys.push(fun);\n\t\t\t}\n\t\t\tif(this._loadCallback) { //将会加载此模块及其依赖的模块\n\t\t\t\tlet loadCallback = this._loadCallback;\n\t\t\t\tthis._loadCallback = null;\n\t\t\t\tloadCallback();\n\t\t\t}\n\t\t}\n\t};\n\tmoduleMap.thiz = new script.Invoker(moduleMap);\n\n\t//返回_module_\n\tmoduleMap.dealInstance = function(moduleInstance) {\n\t\tinstances.push(moduleInstance);\n\t\tlet _module_ = {\n\t\t\topId: null,\n\t\t\tsetToAll(name, value, opId) {\n\t\t\t\tif(opId !== undefined && opId == this.opId) {\n\t\t\t\t\treturn; //防止循环\n\t\t\t\t}\n\t\t\t\topId = opId || _getModuleId();\n\t\t\t\tthis.opId = opId;\n\n\t\t\t\tlet obj = {};\n\t\t\t\tif(xsloader.isString(name)) {\n\t\t\t\t\tobj[name] = value;\n\t\t\t\t} else if(xsloader.isObject(name)) {\n\t\t\t\t\tfor(let k in name) {\n\t\t\t\t\t\tobj[k] = name[k];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(\"unknown param:\" + name);\n\t\t\t\t}\n\n\t\t\t\tutils.each(instances, function(ins) {\n\t\t\t\t\tlet mobj = ins.moduleObject();\n\t\t\t\t\tfor(let k in obj) {\n\t\t\t\t\t\tmobj[k] = obj[k];\n\t\t\t\t\t}\n\t\t\t\t\tif(mobj._modules_) {\n\t\t\t\t\t\tutils.each(mobj._modules_, function(_m_) {\n\t\t\t\t\t\t\t_m_.setToAll(name, value, opId);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t};\n\n\t\treturn _module_;\n\t};\n\n\t//添加到前面\n\t//提供的参数deps为define里声明的\n\tmoduleMap.mayAddDeps = function(deps) {\n\t\tlet moduleDeps = this.deps;\n\t\tutils.each(moduleDeps, function(dep) {\n\t\t\tif(xsloader.indexInArray(deps, dep) < 0) {\n\t\t\t\tdeps.push(dep);\n\t\t\t}\n\t\t}, false, true);\n\t\tthis.deps = deps;\n\t\treturn deps;\n\t};\n\tmoduleMap.printOnNotDefined = function() {\n\t\tlet root = {\n\t\t\tnodes: []\n\t\t};\n\t\tthis._printOnNotDefined(root);\n\n\t\tlet leafs = [];\n\n\t\tfunction findLeaf(node) {\n\t\t\tif(node.nodes.length) {\n\t\t\t\tutils.each(node.nodes, function(item) {\n\t\t\t\t\tfindLeaf(item);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tleafs.push(node);\n\t\t\t}\n\t\t}\n\t\tfindLeaf(root);\n\n\t\tfunction genErrs(node, infos) {\n\t\t\tinfos.push(node.err);\n\t\t\tif(node.parent) {\n\t\t\t\tgenErrs(node.parent, infos);\n\t\t\t}\n\t\t}\n\t\tutils.each(leafs, function(leaf) {\n\t\t\tlet infos = [];\n\t\t\tgenErrs(leaf, infos);\n\t\t\tinfos = infos.reverse();\n\t\t\tconsole.error(\"load module error stack:my page=\" + location.href);\n\t\t\tfor(let i = 1; i < infos.length;) {\n\t\t\t\tlet as = [];\n\t\t\t\tas.push(\"\");\n\t\t\t\tfor(let k = 0; k < 3 && i < infos.length; k++) {\n\t\t\t\t\tas.push(infos[i++]);\n\t\t\t\t}\n\t\t\t\tconsole.info(as.join(\"--->\"));\n\t\t\t}\n\t\t\tlet errModule = leaf.module;\n\t\t\tif(leaf.module && leaf.module.state == \"defined\") {\n\t\t\t\terrModule = leaf.parent.module;\n\t\t\t}\n\t\t\tif(errModule) {\n\t\t\t\tlet as = [];\n\t\t\t\tfor(let i = 0; i < errModule.deps.length; i++) {\n\t\t\t\t\tlet dep = errModule.deps[i];\n\t\t\t\t\tlet index = dep.lastIndexOf(\"!\");\n\t\t\t\t\tif(index != -1) {\n\t\t\t\t\t\tdep = dep.substring(0, index);\n\t\t\t\t\t}\n\t\t\t\t\tlet depMod = theDefinedMap[dep];\n\t\t\t\t\tif(depMod) {\n\t\t\t\t\t\tas.push(dep + \":\" + depMod.state);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tas.push(dep + \":null\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconsole.info(\"failed module '\" + errModule.name + \"' deps state infos [\" + as.join(\",\") + \"]\");\n\t\t\t}\n\t\t});\n\n\t};\n\tmoduleMap._printOnNotDefined = function(parentNode) {\n\t\tlet node = {\n\t\t\terr: \"[\" + this.name + \"].state=\" + this.state,\n\t\t\tmodule: this,\n\t\t\tparent: parentNode,\n\t\t\tnodes: []\n\t\t};\n\t\tparentNode.nodes.push(node);\n\t\tif(this.state == \"defined\") {\n\t\t\treturn;\n\t\t}\n\n\t\tutils.each(this.deps, function(dep) {\n\t\t\tlet indexPlguin = dep.indexOf(\"!\");\n\t\t\tif(indexPlguin > 0) {\n\t\t\t\tdep = dep.substring(0, indexPlguin);\n\t\t\t}\n\t\t\tlet mod = getModule(dep);\n\t\t\tif(mod && mod.state == \"defined\") {\n\t\t\t\tmod._printOnNotDefined(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//只打印一个错误栈\n\t\t\tif(mod) {\n\t\t\t\tmod._printOnNotDefined(node);\n\t\t\t} else {\n\t\t\t\tnode.nodes.push({\n\t\t\t\t\tparent: parentNode,\n\t\t\t\t\tnodes: [],\n\t\t\t\t\terr: \"[\" + dep + \"] has not module\"\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\tsetModule(moduleMap.name, moduleMap);\n\n\tbuildInvoker(moduleMap);\n\treturn moduleMap;\n}\n\nlet randModuleIndex = 0;\n\nfunction _getModuleId() {\n\treturn \"_xs_req_2019_\" + randModuleIndex++;\n}\n//处理嵌套依赖\nfunction _dealEmbedDeps(deps) {\n\tfor(let i = 0; i < deps.length; i++) {\n\t\tlet dep = deps[i];\n\t\tif(xsloader.isArray(dep)) {\n\t\t\t//内部的模块顺序加载\n\t\t\tlet modName = \"inner_order_\" + _getModuleId();\n\t\t\tlet isOrderDep = !(dep.length > 0 && dep[0] === false);\n\t\t\tif(dep.length > 0 && (dep[0] === false || dep[0] === true)) {\n\t\t\t\tdep = dep.slice(1);\n\t\t\t}\n\t\t\tinnerDepsMap[modName] = {\n\t\t\t\tdeps: dep,\n\t\t\t\torderDep: isOrderDep\n\t\t\t};\n\n\t\t\t//console.log(innerDepsMap[modName]);\n\t\t\tdeps[i] = INNER_DEPS_PLUGIN + \"!\" + modName;\n\t\t}\n\t}\n}\n\nfunction _getPluginParam(path) {\n\tvar pluginIndex = path.indexOf(\"!\");\n\tif(pluginIndex > 0) {\n\t\treturn path.substring(pluginIndex);\n\t} else {\n\t\treturn \"\";\n\t}\n}\n\n//everyOkCallback(depModules,module),errCallback(err,invoker)\nfunction everyRequired(defineObject, module, everyOkCallback, errCallback) {\n\tif(defineObject.isError) {\n\t\treturn;\n\t}\n\n\tlet config = xsloader.config();\n\tconst deps = module.deps;\n\n\tutils.replaceModulePrefix(config, deps); //前缀替换\n\t_dealEmbedDeps(deps); //处理嵌套依赖\n\n\tfor(let i = 0; i < deps.length; i++) {\n\t\t//console.log(module.name+(\"(\"+defineObject.hanle.defined_module_for_deps+\")\"), \":\", deps);\n\t\tlet m = deps[i];\n\t\tlet jsFilePath = utils.isJsFile(m);\n\n\t\tif(module.thiz.rurl(defineObject.hanle)) { //替换相对路径为绝对路径\n\t\t\tif(jsFilePath && xsloader.startsWith(m, \".\")) {\n\t\t\t\tm = utils.getPathWithRelative(module.thiz.rurl(defineObject.hanle), jsFilePath.path) + _getPluginParam(m);\n\t\t\t\tdeps[i] = m;\n\t\t\t}\n\t\t}\n\t\tlet paths = utils.graphPath.tryAddEdge(defineObject.hanle.defined_module_for_deps || module.name, m);\n\t\tif(paths.length > 0) {\n\t\t\tlet moduleLoop = getModule(m); //该模块必定已经被定义过\n\t\t\tmoduleLoop.loopObject = {};\n\t\t}\n\t}\n\n\tlet isError = false,\n\t\thasCallErr = false,\n\t\ttheExports;\n\tlet depCount = deps.length;\n\t//module.jsScriptCount = 0;\n\tlet depModules = new Array(depCount);\n\n\tlet invoker_the_module = module.thiz;\n\n\tfunction checkFinish(index, dep_name, depModule, syncHandle) {\n\t\tdepModules[index] = depModule;\n\n\t\tif( /*(depCount == 0 || depCount - module.jsScriptCount == 0)*/ depCount <= 0 && !isError) {\n\t\t\teveryOkCallback(depModules, module);\n\t\t} else if(isError) {\n\t\t\tmodule.setState('error', isError);\n\t\t\tif(!hasCallErr) {\n\t\t\t\thasCallErr = true;\n\t\t\t\terrCallback({\n\t\t\t\t\terr: isError,\n\t\t\t\t\tindex: index,\n\t\t\t\t\tdep_name: dep_name\n\t\t\t\t}, invoker_the_module);\n\t\t\t}\n\t\t}!isError && syncHandle && syncHandle();\n\t}\n\n\tutils.each(deps, function(dep, index, ary, syncHandle) {\n\t\tlet originDep = dep;\n\t\tlet pluginArgs = undefined;\n\t\tlet pluginIndex = dep.indexOf(\"!\");\n\t\tif(pluginIndex > 0) {\n\t\t\tpluginArgs = dep.substring(pluginIndex + 1);\n\t\t\tdep = dep.substring(0, pluginIndex);\n\t\t}\n\t\tlet relyItFun = function() {\n\t\t\tgetModule(dep).relyIt(invoker_the_module, function(depModule, err) {\n\n\t\t\t\tif(!err) {\n\t\t\t\t\tdepCount--;\n\t\t\t\t\tif(dep == \"exports\") {\n\t\t\t\t\t\tif(theExports) {\n\t\t\t\t\t\t\tmodule.moduleObject = theExports;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttheExports = module.moduleObject = depModule.genExports();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tisError = err;\n\t\t\t\t}\n\t\t\t\tcheckFinish(index, originDep, depModule, syncHandle);\n\t\t\t}, pluginArgs);\n\t\t};\n\n\t\tif(!getModule(dep)) {\n\t\t\tlet isJsFile = utils.isJsFile(dep);\n\t\t\tdo {\n\n\t\t\t\tlet urls;\n\n\t\t\t\tif(!isJsFile && dep.indexOf(\"/\") < 0 && dep.indexOf(\":\") >= 0) {\n\t\t\t\t\tlet i1 = dep.indexOf(\":\");\n\t\t\t\t\tlet i2 = dep.indexOf(\":\", i1 + 1);\n\t\t\t\t\tlet i3 = i2 > 0 ? dep.indexOf(\":\", i2 + 1) : -1;\n\t\t\t\t\tif(i2 == -1) {\n\t\t\t\t\t\tisError = \"illegal module:\" + dep;\n\t\t\t\t\t\terrCallback(isError, invoker_the_module);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tlet version;\n\t\t\t\t\tlet groupModule;\n\t\t\t\t\tif(i3 == -1) {\n\t\t\t\t\t\tversion = config.defaultVersion[dep];\n\t\t\t\t\t\tgroupModule = dep + \":\" + version;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tversion = dep.substring(i3 + 1);\n\t\t\t\t\t\tgroupModule = dep;\n\t\t\t\t\t}\n\t\t\t\t\tif(version === undefined) {\n\t\t\t\t\t\tisError = \"unknown version for:\" + dep;\n\t\t\t\t\t\terrCallback(isError, invoker_the_module);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tlet _url = xsloader._resUrlBuilder(groupModule);\n\t\t\t\t\turls = xsloader.isArray(_url) ? _url : [_url];\n\t\t\t\t} else if(config.isInUrls(dep)) {\n\t\t\t\t\turls = config.getUrls(dep);\n\t\t\t\t} else if(isJsFile) {\n\t\t\t\t\turls = [dep];\n\t\t\t\t} else {\n\t\t\t\t\turls = [];\n\t\t\t\t}\n\n\t\t\t\tlet module2 = _newModule(dep, module.absoluteUrl, module.thiz);\n\t\t\t\tmodule2.setState(\"loading\");\n\t\t\t\tutils.each(urls, function(url, index) {\n\t\t\t\t\tif(xsloader.startsWith(url, \".\") || xsloader.startsWith(url, \"/\")) {\n\t\t\t\t\t\tif(!module2.thiz.rurl(defineObject.hanle)) {\n\t\t\t\t\t\t\tisError = \"script url is null:'\" + module2.name;\n\t\t\t\t\t\t\tthrow new Error(isError);\n\t\t\t\t\t\t}\n\t\t\t\t\t\turl = utils.getPathWithRelative(module2.thiz.rurl(defineObject.hanle), url);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet absolute = utils.dealPathMayAbsolute(url);\n\t\t\t\t\t\tif(absolute.absolute) {\n\t\t\t\t\t\t\turl = absolute.path;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\turl = config.baseUrl + url;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\turls[index] = config.dealUrl(module2, url);\n\t\t\t\t});\n\n\t\t\t\tmayAsyncCallLoadModule();\n\n\t\t\t\tfunction mayAsyncCallLoadModule() {\n\t\t\t\t\t//\t\t\t\t\tif(IE_VERSION > 0 && IE_VERSION <= 10) {\n\t\t\t\t\t//\t\t\t\t\t\tasyncCall(function() {\n\t\t\t\t\t//\t\t\t\t\t\t\tloadModule();\n\t\t\t\t\t//\t\t\t\t\t\t});\n\t\t\t\t\t//\t\t\t\t\t} else {\n\t\t\t\t\t//\t\t\t\t\t\tloadModule();\n\t\t\t\t\t//\t\t\t\t\t}\n\t\t\t\t\tloadModule();\n\t\t\t\t}\n\n\t\t\t\t//加载模块dep:module2\n\t\t\t\tfunction loadModule(index = 0) {\n\t\t\t\t\tif(index >= urls.length) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlet url = urls[index];\n\t\t\t\t\tmodule2.src = url;\n\t\t\t\t\tscript.loadScript(module2.name, url, (scriptData) => {\n\n\t\t\t\t\t}, (err) => {\n\t\t\t\t\t\tisError = err;\n\t\t\t\t\t\terrCallback(isError, invoker_the_module);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t} while (false);\n\t\t}\n\t\trelyItFun();\n\t}, defineObject.handle.orderDep);\n\t//TODO STRONG ie10及以下版本，js文件一个一个加载，从而解决缓存等造成的混乱问题\n}\n\nexport default {\n\tsetModule,\n\tnewModule,\n\tgetModule,\n\teveryRequired,\n\tINNER_DEPS_PLUGIN,\n\tinnerDepsMap,\n};","import utils from \"../util/index.js\";\nimport script from \"./script.js\";\nimport moduleScript from \"./module.js\";\n\nconst global = utils.global;\nconst xsloader = global.xsloader;\nconst theDefinedMap = {};\n\nconst defineHandle = script.initDefine(function theRealDefine(defines) {\n\tutils.each(defines, (defineObject) => {\n\t\tlet {\n\t\t\tthiz,\n\t\t\targs,\n\t\t\tisRequire,\n\t\t\tsrc, //必存在src\n\t\t\tparentDefine,\n\t\t\tthatInvoker,\n\t\t\thandle: {\n\t\t\t\tonError,\n\t\t\t\tbefore,\n\t\t\t\tdepBefore,\n\t\t\t\torderDep,\n\t\t\t\tabsoluteUrl,\n\t\t\t\tinstance,\n\t\t\t},\n\t\t} = defineObject;\n\n\t\tlet [selfname, deps, callback] = args;\n\n\t\tif(typeof selfname !== 'string') {\n\t\t\tcallback = deps;\n\t\t\tdeps = selfname;\n\t\t\tselfname = src;\n\t\t}\n\n\t\tif(!utils.isArray(deps)) {\n\t\t\tcallback = deps;\n\t\t\tdeps = null;\n\t\t}\n\n\t\tif(!deps) {\n\t\t\tdeps = [];\n\t\t}\n\n\t\t//获取函数体里直接require('...')的依赖\n\t\t//if(!isRequire) {\n\t\tutils.appendInnerDeps(deps, callback);\n\t\t//}\n\t\t//获取配置里配置的依赖\n\t\tlet _deps = xsloader.script().getDeps(src);\n\t\tutils.each(_deps, (dep) => {\n\t\t\tdeps.push(dep);\n\t\t});\n\t\tif(selfname && selfname != src) {\n\t\t\tdeps = xsloader.script().getDeps(selfname);\n\t\t\tutils.each(_deps, (dep) => {\n\t\t\t\tdeps.push(dep);\n\t\t\t});\n\t\t}\n\n\t\tif(xsloader.isFunction(callback)) {\n\t\t\tlet originCallback = callback;\n\t\t\tcallback = function() {\n\t\t\t\tlet config = xsloader.script();\n\t\t\t\tlet rt;\n\t\t\t\tif(xsloader.isFunction(config.defineFunction[cache.name])) {\n\t\t\t\t\tlet args = [];\n\t\t\t\t\tfor(let i = 0; i < arguments.length; i++) {\n\t\t\t\t\t\targs.push(arguments[i]);\n\t\t\t\t\t}\n\t\t\t\t\trt = config.defineFunction[cache.name].apply(this, [originCallback, this, args]);\n\t\t\t\t} else {\n\t\t\t\t\trt = originCallback.apply(this, arguments);\n\t\t\t\t}\n\n\t\t\t\toriginCallback = null;\n\t\t\t\treturn rt;\n\t\t\t};\n\t\t\tcallback.originCallback = originCallback;\n\t\t}\n\t\tdefineObject.selfname = selfname;\n\t\tdefineObject.deps = deps;\n\t\tdefineObject.callback = callback;\n\t\tonModuleLoaded(defineObject);\n\n\t});\n});\n\n/**\n * 当前模块脚本已经完成加载、但其依赖的模块可能需要加载。\n * 当前模块：src、selfname已经确定。\n * 若当前模块依赖为0、则可以直接finish；若当前模块存在其他依赖、则设置回调，等待被其他地方依赖时再触发。\n * @param {Object} defineObject 当前模块\n * @param {Object} lastDefineObject 第一次加载当前模块的模块\n */\nfunction onModuleLoaded(defineObject, lastDefineObject) {\n\n\t//先根据src获取模块\n\tlet ifmodule = moduleScript.getModule(defineObject.src);\n\tif(ifmodule) {\n\t\tif(ifmodule.state != 'loading' && ifmodule.state != 'init') {\n\t\t\t//正常\n\t\t} else if(ifmodule.state == \"defined\") {\n\t\t\tthrow new Error(\"already define '\" + ifmodule.selfname + \"'(src=\" + ifmodule.src + \")\");\n\t\t} else {\n\t\t\tthrow new Error(\"already define failed '\" + ifmodule.selfname + \"'(src=\" + ifmodule.src + \")\");\n\t\t}\n\n\t} else {\n\t\tifmodule = moduleScript.newModule(defineObject);\n\t}\n\n\tif(ifmodule.selfname != ifmodule.src) {\n\t\t//此处的名字可能由配置指定\n\t\tlet moduleSelf = moduleScript.getModule(ifmodule.selfname);\n\t\tif(moduleSelf) { //让配置的名字也最终指向src的\n\t\t\tif(moduleSelf != ifmodule) {\n\t\t\t\tif(moduleSelf.state == \"init\") {\n\t\t\t\t\tmoduleScript.setModule(ifmodule.selfname, module);\n\t\t\t\t\tmoduleSelf.toOtherModule(module);\n\t\t\t\t} else {\n\t\t\t\t\tthrow Error(\"already define '\" + ifmodule.selfname + \"'\");\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tmoduleScript.setModule(ifmodule.selfname, module);\n\t\t}\n\t}\n\n\tif(defineObject.selfname != defineObject.src && defineObject.selfname != ifmodule.selfname) {\n\t\t//此处的名字一定是define时指定\n\t\tlet moduleSelf = moduleScript.getModule(defineObject.selfname);\n\t\tif(moduleSelf) { //让define的名字也最终指向src的\n\t\t\tif(moduleSelf != ifmodule) {\n\t\t\t\tif(moduleSelf.state == \"init\") {\n\t\t\t\t\tmoduleScript.setModule(ifmodule.selfname, module);\n\t\t\t\t\tmoduleSelf.toOtherModule(module);\n\t\t\t\t} else {\n\t\t\t\t\tthrow Error(\"already define '\" + ifmodule.selfname + \"'\");\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tmoduleScript.setModule(ifmodule.selfname, module);\n\t\t}\n\t}\n\n\tlet module = ifmodule;\n\t//defineObject里的deps最初是直接声明的依赖,应该出现在最前面\n\tmodule.mayAddDeps(defineObject.deps);\n\n\tif(defineObject.handle.before) {\n\t\tdefineObject.before(module.deps);\n\t}\n\tif(lastDefineObject && lastDefineObject.handle.depBefore) {\n\t\tlastDefineObject.handle.depBefore(lastDefineObject.index, module.name, module.deps, 2);\n\t}\n\n\tif(xsloader._ignoreAspect_[module.name]) {\n\t\tmodule.ignoreAspect = true;\n\t}\n\n\tmodule.setState(\"loaded\");\n\tmodule.setInstanceType(defineObject.handle.instance || xsloader.config().instance);\n\n\tif(deps.length == 0) {\n\t\tmodule.finish([]); //递归结束\n\t} else {\n\t\t//在其他模块依赖此模块时进行加载\n\t\tlet needCallback = function() {\n\t\t\tmoduleScript.everyRequired(defineObject, module, (depModules) => {\n\t\t\t\tlet args = [];\n\t\t\t\tlet depModuleArgs = [];\n\t\t\t\tutils.each(depModules, (depModule) => {\n\t\t\t\t\tdepModuleArgs.push(depModule);\n\t\t\t\t\targs.push(depModule && depModule.moduleObject());\n\t\t\t\t});\n\t\t\t\targs.push(depModuleArgs);\n\t\t\t\tmodule.finish(args);\n\t\t\t}, (err, invoker) => {\n\t\t\t\tdefine.handle.onError(err, invoker);\n\t\t\t});\n\t\t};\n\n\t\tif(defineObject.isRequire) {\n\t\t\tneedCallback();\n\t\t} else {\n\t\t\tmodule.whenNeed(needCallback);\n\t\t}\n\t}\n\n};\n\n//定义模块\nconst define = function() {\n\treturn defineHandle.predefine.apply(this, arguments);\n}\n\nconst require = function() {\n\treturn defineHandle.prerequire.apply(this, arguments);\n}\n\nxsloader.define = define;\nxsloader.defineAsync = define;\nxsloader.require = require;\nglobal.define = define;\nglobal.require = require;","import moduleScript from \"../module.js\";\nimport utils from \"../../util/index.js\";\nconst global = utils.global;\nconst xsloader = global.xsloader;\n\nxsloader.define(moduleScript.INNER_DEPS_PLUGIN, {\n\tpluginMain(depId, onload, onerror, config) {\n\t\tlet depsObj = moduleScript.innerDepsMap[depId];\n\t\tlet deps = depsObj.deps;\n\t\t//delete innerDepsMap[depId];\n\t\tthis.invoker().require(deps, function() {\n\t\t\tlet args = [];\n\t\t\tfor(let k = 0; k < arguments.length; k++) {\n\t\t\t\targs.push(arguments[k]);\n\t\t\t}\n\t\t\tonload(args);\n\t\t}).then({\n\t\t\torderDep: depsObj.orderDep\n\t\t});\n\t},\n\tgetCacheKey(depId) {\n\t\treturn depId;\n\t}\n});","import utils from \"../util/index.js\";\nimport script from \"./script.js\";\nimport \"./define.js\";\nimport \"./plugins/index.js\";\n\nconst global = utils.global;\n\nlet theContext;\nlet theConfig;\nlet globalDefineQueue = []; //在config之前，可以调用define来定义模块\nlet requiresQueueBeforeConf = []; //配置前的require\nlet argsObject = {};\n\nfunction _newContext() {\n\tlet context = {\n\t\tcontextName: script.contextName,\n\t\tdefQueue: []\n\t};\n\treturn context;\n}\n\nlet xsloader = global.xsloader = function(option) {\n\tif(theContext) {\n\t\tthrow new Error(\"already configed!\");\n\t}\n\toption = xsloader.extend({\n\t\tbaseUrl: utils.getPathWithRelative(location.pathname, \"./\", xsloader.endsWith(location.pathname, \"/\")),\n\t\turlArgs: {},\n\t\tignoreProperties: false,\n\t\tpaths: {},\n\t\tdepsPaths: {},\n\t\tdeps: {},\n\t\tjsExts: undefined,\n\t\tproperties: {},\n\t\tmodulePrefix: {},\n\t\tdefineFunction: {},\n\t\tmodulePrefixCount: 0,\n\t\twaitSeconds: 10,\n\t\tautoUrlArgs() {\n\t\t\treturn false;\n\t\t},\n\t\tinstance: \"single\",\n\t\tdealtDeps: {},\n\t\tdealProperties(obj) {\n\t\t\treturn utils.propertiesDeal(obj, option.properties);\n\t\t},\n\t\tisInUrls(m) {\n\t\t\treturn !!this.getUrls(m);\n\t\t},\n\t\tgetUrls(m) {\n\t\t\treturn this.paths[m] || this.depsPaths[m];\n\t\t},\n\t\tgetDeps(m) {\n\t\t\tlet as = this.dealtDeps[m] || [];\n\t\t\tlet deps = [];\n\t\t\tlet hasOrderDep = undefined;\n\n\t\t\tif(as.length > 0 && (as[0] === true || as[0] === false)) {\n\t\t\t\tif(as[0]) {\n\t\t\t\t\tdeps = [\n\t\t\t\t\t\t[]\n\t\t\t\t\t];\n\t\t\t\t\thasOrderDep = true;\n\t\t\t\t} else {\n\t\t\t\t\tas.splice(0, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(let i = 0; i < as.length; i++) {\n\t\t\t\tif(hasOrderDep === true) {\n\t\t\t\t\tdeps[0].push(as[i]);\n\t\t\t\t} else {\n\t\t\t\t\tdeps.push(as[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn deps;\n\t\t},\n\t\tdealUrl(module, url) {\n\t\t\tlet urlArg;\n\t\t\tlet nameOrUrl;\n\t\t\tif(this.autoUrlArgs()) {\n\t\t\t\turlArg = \"_t=\" + new Date().getTime();\n\t\t\t} else if(xsloader.isString(module)) {\n\t\t\t\turlArg = this.urlArgs[module];\n\t\t\t\tif(urlArg) {\n\t\t\t\t\tnameOrUrl = module;\n\t\t\t\t} else {\n\t\t\t\t\tnameOrUrl = module;\n\t\t\t\t\turlArg = this.forPrefixSuffix(module);\n\t\t\t\t}\n\n\t\t\t\tif(!urlArg) {\n\t\t\t\t\tnameOrUrl = \"*\";\n\t\t\t\t\turlArg = this.urlArgs[\"*\"];\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\turlArg = this.urlArgs[url];\n\t\t\t\tif(urlArg) {\n\t\t\t\t\tnameOrUrl = url;\n\t\t\t\t} else {\n\t\t\t\t\turlArg = this.forPrefixSuffix(url);\n\t\t\t\t}\n\n\t\t\t\tif(!urlArg) {\n\t\t\t\t\tnameOrUrl = module.name;\n\t\t\t\t\turlArg = this.urlArgs[nameOrUrl];\n\t\t\t\t}\n\n\t\t\t\tif(!urlArg) {\n\t\t\t\t\tnameOrUrl = module.aurl;\n\t\t\t\t\turlArg = this.forPrefixSuffix(nameOrUrl);\n\t\t\t\t}\n\n\t\t\t\tif(!urlArg) {\n\t\t\t\t\tnameOrUrl = \"*\";\n\t\t\t\t\turlArg = this.urlArgs[\"*\"];\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif(xsloader.isFunction(urlArg)) {\n\t\t\t\turlArg = urlArg.call(this, nameOrUrl);\n\t\t\t}\n\t\t\tfor(let k in argsObject) { //加入全局的参数\n\t\t\t\turlArg += \"&\" + k + \"=\" + encodeURIComponent(argsObject[k]);\n\t\t\t}\n\t\t\treturn xsloader.appendArgs2Url(url, urlArg);\n\t\t},\n\t\tdealUrlArgs(url) {\n\t\t\turl = utils.getPathWithRelative(location.href, url);\n\t\t\treturn this.dealUrl(url, url);\n\t\t},\n\t\tdefaultVersion: {}\n\t}, option);\n\n\tif(!xsloader.endsWith(option.baseUrl, \"/\")) {\n\t\toption.baseUrl += \"/\";\n\t}\n\toption.baseUrl = utils.getPathWithRelative(location.href, option.baseUrl);\n\n\tif(!option.ignoreProperties) {\n\t\toption = option.dealProperties(option);\n\t}\n\n\tutils.strValue2Arr(option.paths);\n\tutils.strValue2Arr(option.depsPaths);\n\tutils.strValue2Arr(option.deps);\n\n\tif(!xsloader.isFunction(option.autoUrlArgs)) {\n\t\tlet isAutoUrlArgs = option.autoUrlArgs;\n\t\toption.autoUrlArgs = function() {\n\t\t\treturn isAutoUrlArgs;\n\t\t};\n\t}\n\n\tlet modulePrefixCount = 0;\n\tfor(let prefix in option.modulePrefix) {\n\t\tif(xsloader.startsWith(prefix, \".\") || xsloader.startsWith(prefix, \"/\")) {\n\t\t\tthrow new Error(\"modulePrefix can not start with '.' or '/'(\" + prefix + \")\");\n\t\t}\n\t\tmodulePrefixCount++;\n\t}\n\toption.modulePrefixCount = modulePrefixCount;\n\tif(modulePrefixCount > 0) {\n\t\t//替换urlArgs中地址前缀\n\t\tlet star = option.urlArgs[\"*\"];\n\t\tdelete option.urlArgs[\"*\"];\n\n\t\tlet urlArgsArr = [];\n\t\tfor(let k in option.urlArgs) {\n\t\t\tlet url = k;\n\t\t\tif(utils.isJsFile(url)) { //处理相对\n\t\t\t\tif(xsloader.startsWith(url, \".\") || xsloader.startsWith(url, \"/\") && !xsloader.startsWith(url, \"//\")) {\n\t\t\t\t\turl = utils.getPathWithRelative(theLoaderUrl, url);\n\t\t\t\t} else {\n\t\t\t\t\tlet absolute = utils.dealPathMayAbsolute(url);\n\t\t\t\t\tif(absolute.absolute) {\n\t\t\t\t\t\turl = absolute.path;\n\t\t\t\t\t} else if(!xsloader.startsWith(url, \"*]\")) { //排除*]；单*[可以有前缀\n\t\t\t\t\t\turl = option.baseUrl + url;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\turlArgsArr.push({\n\t\t\t\turl: url,\n\t\t\t\targs: option.urlArgs[k]\n\t\t\t});\n\t\t}\n\n\t\tfor(let prefix in option.modulePrefix) {\n\t\t\tlet replaceStr = option.modulePrefix[prefix].replace;\n\t\t\tfor(let i = 0; i < urlArgsArr.length; i++) {\n\t\t\t\tlet urlArgObj = urlArgsArr[i];\n\t\t\t\tlet starP = \"\";\n\t\t\t\tif(xsloader.startsWith(urlArgObj.url, \"*[\")) {\n\t\t\t\t\tstarP = \"*[\";\n\t\t\t\t\turlArgObj.url = urlArgObj.url.substring(2);\n\t\t\t\t}\n\t\t\t\tif(xsloader.startsWith(urlArgObj.url, prefix)) {\n\t\t\t\t\turlArgObj.url = replaceStr + urlArgObj.url.substring(prefix.length);\n\t\t\t\t}\n\t\t\t\tstarP && (urlArgObj.url = starP + urlArgObj.url);\n\t\t\t}\n\t\t}\n\t\toption.urlArgs = {};\n\t\toption.urlArgs[\"*\"] = star;\n\t\tfor(let i = 0; i < urlArgsArr.length; i++) {\n\t\t\tlet urlArgObj = urlArgsArr[i];\n\t\t\toption.urlArgs[urlArgObj.url] = urlArgObj.args;\n\t\t}\n\t}\n\n\t//预处理urlArgs中的*[与*]\n\tlet _urlArgs_prefix = [];\n\tlet _urlArgs_suffix = [];\n\toption._urlArgs_prefix = _urlArgs_prefix;\n\toption._urlArgs_suffix = _urlArgs_suffix;\n\n\tfor(let k in option.urlArgs) {\n\t\tlet url = k;\n\t\tif(xsloader.startsWith(url, \"*[\")) {\n\t\t\tlet strfix = url.substring(2);\n\t\t\tif(xsloader.startsWith(strfix, \".\") || xsloader.startsWith(strfix, \"/\") && !xsloader.startsWith(strfix, \"//\")) {\n\t\t\t\tstrfix = utils.getPathWithRelative(theLoaderUrl, strfix);\n\t\t\t} else {\n\t\t\t\tlet absolute = utils.dealPathMayAbsolute(strfix);\n\t\t\t\tif(absolute.absolute) {\n\t\t\t\t\tstrfix = absolute.path;\n\t\t\t\t} else {\n\t\t\t\t\turl = option.baseUrl + url;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_urlArgs_prefix.push({\n\t\t\t\tstrfix: strfix,\n\t\t\t\tvalue: option.urlArgs[k]\n\t\t\t});\n\t\t\tdelete option.urlArgs[k];\n\t\t} else if(xsloader.startsWith(url, \"*]\")) {\n\t\t\t_urlArgs_suffix.push({\n\t\t\t\tstrfix: url.substring(2),\n\t\t\t\tvalue: option.urlArgs[k]\n\t\t\t});\n\t\t\tdelete option.urlArgs[k];\n\t\t}\n\t}\n\n\toption.forPrefixSuffix = function(urlOrName) {\n\t\t//前缀判断\n\t\tfor(let i = 0; i < _urlArgs_prefix.length; i++) {\n\t\t\tlet strfixObj = _urlArgs_prefix[i];\n\t\t\tif(xsloader.startsWith(urlOrName, strfixObj.strfix)) {\n\t\t\t\tlet value;\n\t\t\t\tif(xsloader.isFunction(strfixObj.value)) {\n\t\t\t\t\tvalue = strfixObj.value.call(this, urlOrName);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = strfixObj.value;\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\n\t\t//后缀判断\n\t\tfor(let i = 0; i < _urlArgs_suffix.length; i++) {\n\t\t\tlet strfixObj = _urlArgs_suffix[i];\n\t\t\tif(xsloader.endsWith(urlOrName, strfixObj.strfix)) {\n\t\t\t\tlet value;\n\t\t\t\tif(xsloader.isFunction(strfixObj.value)) {\n\t\t\t\t\tvalue = strfixObj.value.call(this, urlOrName);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = strfixObj.value;\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\t};\n\n\tfor(let name in option.paths) {\n\t\tutils.replaceModulePrefix(option, option.paths[name]); //前缀替换\n\t}\n\tfor(let name in option.depsPaths) {\n\t\tutils.replaceModulePrefix(option, option.depsPaths[name]); //前缀替换\n\t}\n\n\t//处理依赖\n\tlet dealtDeps = option.dealtDeps;\n\n\tlet pushDeps = (dealtDepArray, depsArray) => {\n\t\tutils.each(depsArray, (dep) => {\n\t\t\tdealtDepArray.push(dep);\n\t\t});\n\t};\n\n\tfor(let keyName in option.deps) {\n\t\tlet paths = keyName.split('::');\n\t\tlet depsArray = option.deps[keyName];\n\t\tutils.each(paths, (path) => {\n\t\t\tif(path == '*') {\n\t\t\t\tfor(let m in option.depsPaths) {\n\t\t\t\t\tlet dealtDepArray = dealtDeps[m] = dealtDeps[m] || [];\n\t\t\t\t\tpushDeps(dealtDepArray, depsArray);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet dealtDepArray = (dealtDeps[path] = dealtDeps[path] || []);\n\t\t\t\tpushDeps(dealtDepArray, depsArray);\n\t\t\t}\n\t\t});\n\t}\n\n\ttheConfig = option;\n\ttheContext = _newContext();\n\n\tlet arr = globalDefineQueue;\n\tglobalDefineQueue = null;\n\t//定义config之前的模块\n\tutils.each(arr, (elem) => {\n\t\telem.data.isGlobal = true;\n\t\t__define(elem.data, elem.name, elem.deps, elem.callback, elem.src).then(elem.thenOption);\n\t});\n\tif(requiresQueueBeforeConf && requiresQueueBeforeConf.length) {\n\t\twhile(requiresQueueBeforeConf.length) {\n\t\t\trequiresQueueBeforeConf.shift()();\n\t\t}\n\t}\n\treturn theConfig;\n};\n\nxsloader.config = () => theConfig;\nxsloader.script = () => script.theLoaderScript;\nxsloader.scriptSrc = () => script.theLoaderUrl;\n\nxsloader.putUrlArgs = function(argsObj) {\n\targsObject = xsloader.extend(argsObject, argsObj);\n};\n\nxsloader.getUrlArgs = function(argsObj) {\n\tlet obj = xsloader.extend({}, argsObject);\n\treturn obj;\n};\n\nxsloader.clearUrlArgs = function() {\n\targsObject = {};\n};","import utils from \"../util/index.js\";\n\nconst global = utils.global;\nconst xsloader = global.xsloader;\n\n//ie9\ntry {\n\tif(Function.prototype.bind && console && (typeof console['log'] == \"object\")) {\n\t\tutils.each([\"log\", \"info\", \"warn\", \"error\", \"assert\", \"dir\", \"clear\", \"profile\", \"profileEnd\"], (method) => {\n\t\t\tvar thiz = Function.prototype.bind;\n\t\t\tconsole[method] = thiz.call(console[method], console);\n\t\t});\n\t}\n} catch(e) {\n\tglobal.console = {\n\t\tlog: function() {},\n\t\terror: function() {},\n\t\twarn: function() {}\n\t};\n}\n\ntry {\n\n\tif(!Array.prototype.indexOf) {\n\t\tArray.prototype.indexOf = function(elem, offset) {\n\t\t\tfor(let i = offset === undefined ? 0 : offset; i < this.length; i++) {\n\t\t\t\tif(this[i] == elem) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\t}\n\n\tif(!Array.pushAll) {\n\t\tArray.pushAll = function(thiz, arr) {\n\t\t\tif(!xsloader.isArray(arr)) {\n\t\t\t\tthrow new Error(\"not array:\" + arr);\n\t\t\t}\n\t\t\tfor(let i = 0; i < arr.length; i++) {\n\t\t\t\tthiz.push(arr[i]);\n\t\t\t}\n\t\t\treturn thiz;\n\t\t};\n\t}\n} catch(e) {\n\tconsole.error(e);\n}\n\nfunction startsWith(str, starts) {\n\tif(!(typeof str == \"string\")) {\n\t\treturn false;\n\t}\n\treturn str.indexOf(starts) == 0;\n}\n\nfunction endsWith(str, ends) {\n\tif(!(typeof str == \"string\")) {\n\t\treturn false;\n\t}\n\tlet index = str.lastIndexOf(ends);\n\tif(index >= 0 && (str.length - ends.length == index)) {\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n}\n\nfunction _indexInArray(array, ele, offset = 0, compare) {\n\tlet index = -1;\n\tif(array) {\n\t\tfor(let i = offset || 0; i < array.length; i++) {\n\t\t\tif(compare) {\n\t\t\t\tif(compare(array[i], ele, i, array)) {\n\t\t\t\t\tindex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(array[i] == ele) {\n\t\t\t\t\tindex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\treturn index;\n}\n\nfunction indexInArray(array, ele, compare) {\n\treturn _indexInArray(array, ele, 0, compare);\n}\n\nfunction indexInArrayFrom(array, ele, offset, compare) {\n\treturn _indexInArray(array, ele, offset, compare);\n}\n\nexport default {\n\tstartsWith,\n\tendsWith,\n\tindexInArray,\n\tindexInArrayFrom\n};","//https://github.com/douglascrockford/JSON-js\n//  json2.js\n//  2017-06-12\n//  Public Domain.\n//  NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n\n//  USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO\n//  NOT CONTROL.\nconst JSON = {};\n\nexport default JSON;\n\nlet rx_one = /^[\\],:{}\\s]*$/;\nlet rx_two = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\nlet rx_three = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nlet rx_four = /(?:^|:|,)(?:\\s*\\[)+/g;\nlet rx_escapable = /[\\\\\"\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\nlet rx_dangerous = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\nfunction f(n) {\n\t// Format integers to have at least two digits.\n\treturn(n < 10) ?\n\t\t\"0\" + n :\n\t\tn;\n}\n\nfunction this_value() {\n\treturn this.valueOf();\n}\n\nif(typeof Date.prototype.toJSON !== \"function\") {\n\n\tDate.prototype.toJSON = function() {\n\t\treturn isFinite(this.valueOf()) ?\n\t\t\t(\n\t\t\t\tthis.getUTCFullYear() +\n\t\t\t\t\"-\" +\n\t\t\t\tf(this.getUTCMonth() + 1) +\n\t\t\t\t\"-\" +\n\t\t\t\tf(this.getUTCDate()) +\n\t\t\t\t\"T\" +\n\t\t\t\tf(this.getUTCHours()) +\n\t\t\t\t\":\" +\n\t\t\t\tf(this.getUTCMinutes()) +\n\t\t\t\t\":\" +\n\t\t\t\tf(this.getUTCSeconds()) +\n\t\t\t\t\"Z\"\n\t\t\t) :\n\t\t\tnull;\n\t};\n\n\tBoolean.prototype.toJSON = this_value;\n\tNumber.prototype.toJSON = this_value;\n\tString.prototype.toJSON = this_value;\n}\n\nlet gap;\nlet indent;\nlet meta;\nlet rep;\n\nfunction quote(string) {\n\n\t// If the string contains no control characters, no quote characters, and no\n\t// backslash characters, then we can safely slap some quotes around it.\n\t// Otherwise we must also replace the offending characters with safe escape\n\t// sequences.\n\n\trx_escapable.lastIndex = 0;\n\treturn rx_escapable.test(string) ?\n\t\t\"\\\"\" + string.replace(rx_escapable, function(a) {\n\t\t\tlet c = meta[a];\n\t\t\treturn typeof c === \"string\" ?\n\t\t\t\tc :\n\t\t\t\t\"\\\\u\" + (\"0000\" + a.charCodeAt(0).toString(16)).slice(-4);\n\t\t}) + \"\\\"\" :\n\t\t\"\\\"\" + string + \"\\\"\";\n}\n\nfunction str(key, holder) {\n\t// Produce a string from holder[key].\n\tlet i; // The loop counter.\n\tlet k; // The member key.\n\tlet v; // The member value.\n\tlet length;\n\tlet mind = gap;\n\tlet partial;\n\tlet value = holder[key];\n\n\t// If the value has a toJSON method, call it to obtain a replacement value.\n\tif(\n\t\tvalue &&\n\t\ttypeof value === \"object\" &&\n\t\ttypeof value.toJSON === \"function\"\n\t) {\n\t\tvalue = value.toJSON(key);\n\t}\n\n\t// If we were called with a replacer function, then call the replacer to\n\t// obtain a replacement value.\n\n\tif(typeof rep === \"function\") {\n\t\tvalue = rep.call(holder, key, value);\n\t}\n\n\t// What happens next depends on the value's type.\n\n\tswitch(typeof value) {\n\t\tcase \"string\":\n\t\t\treturn quote(value);\n\t\tcase \"number\":\n\t\t\t// JSON numbers must be finite. Encode non-finite numbers as null.\n\t\t\treturn(isFinite(value)) ?\n\t\t\t\tString(value) :\n\t\t\t\t\"null\";\n\n\t\tcase \"boolean\":\n\t\tcase \"null\":\n\t\t\t// If the value is a boolean or null, convert it to a string. Note:\n\t\t\t// typeof null does not produce \"null\". The case is included here in\n\t\t\t// the remote chance that this gets fixed someday.\n\t\t\treturn String(value);\n\n\t\t\t// If the type is \"object\", we might be dealing with an object or an array or\n\t\t\t// null.\n\t\tcase \"object\":\n\t\t\t// Due to a specification blunder in ECMAScript, typeof null is \"object\",\n\t\t\t// so watch out for that case.\n\t\t\tif(!value) {\n\t\t\t\treturn \"null\";\n\t\t\t}\n\n\t\t\t// Make an array to hold the partial results of stringifying this object value.\n\n\t\t\tgap += indent;\n\t\t\tpartial = [];\n\t\t\t// Is the value an array?\n\t\t\tif(Object.prototype.toString.apply(value) === \"[object Array]\") {\n\n\t\t\t\t// The value is an array. Stringify every element. Use null as a placeholder\n\t\t\t\t// for non-JSON values.\n\t\t\t\tlength = value.length;\n\t\t\t\tfor(i = 0; i < length; i += 1) {\n\t\t\t\t\tpartial[i] = str(i, value) || \"null\";\n\t\t\t\t}\n\t\t\t\t// Join all of the elements together, separated with commas, and wrap them in\n\t\t\t\t// brackets.\n\n\t\t\t\tv = partial.length === 0 ?\n\t\t\t\t\t\"[]\" :\n\t\t\t\t\tgap ?\n\t\t\t\t\t(\n\t\t\t\t\t\t\"[\\n\" +\n\t\t\t\t\t\tgap +\n\t\t\t\t\t\tpartial.join(\",\\n\" + gap) +\n\t\t\t\t\t\t\"\\n\" +\n\t\t\t\t\t\tmind +\n\t\t\t\t\t\t\"]\"\n\t\t\t\t\t) :\n\t\t\t\t\t\"[\" + partial.join(\",\") + \"]\";\n\t\t\t\tgap = mind;\n\t\t\t\treturn v;\n\t\t\t}\n\n\t\t\t// If the replacer is an array, use it to select the members to be stringified.\n\t\t\tif(rep && typeof rep === \"object\") {\n\t\t\t\tlength = rep.length;\n\t\t\t\tfor(i = 0; i < length; i += 1) {\n\t\t\t\t\tif(typeof rep[i] === \"string\") {\n\t\t\t\t\t\tk = rep[i];\n\t\t\t\t\t\tv = str(k, value);\n\t\t\t\t\t\tif(v) {\n\t\t\t\t\t\t\tpartial.push(quote(k) + (\n\t\t\t\t\t\t\t\t(gap) ?\n\t\t\t\t\t\t\t\t\": \" : \":\"\n\t\t\t\t\t\t\t) + v);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Otherwise, iterate through all of the keys in the object.\n\t\t\t\tfor(k in value) {\n\t\t\t\t\tif(Object.prototype.hasOwnProperty.call(value, k)) {\n\t\t\t\t\t\tv = str(k, value);\n\t\t\t\t\t\tif(v) {\n\t\t\t\t\t\t\tpartial.push(quote(k) + (\n\t\t\t\t\t\t\t\t(gap) ?\n\t\t\t\t\t\t\t\t\": \" :\n\t\t\t\t\t\t\t\t\":\"\n\t\t\t\t\t\t\t) + v);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Join all of the member texts together, separated with commas,\n\t\t\t// and wrap them in braces.\n\n\t\t\tv = partial.length === 0 ?\n\t\t\t\t\"{}\" : gap ?\n\t\t\t\t\"{\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"}\" :\n\t\t\t\t\"{\" + partial.join(\",\") + \"}\";\n\t\t\tgap = mind;\n\t\t\treturn v;\n\t}\n}\n\n// If the JSON object does not yet have a stringify method, give it one.\nif(typeof JSON.stringify !== \"function\") {\n\tmeta = { // table of character substitutions\n\t\t\"\\b\": \"\\\\b\",\n\t\t\"\\t\": \"\\\\t\",\n\t\t\"\\n\": \"\\\\n\",\n\t\t\"\\f\": \"\\\\f\",\n\t\t\"\\r\": \"\\\\r\",\n\t\t\"\\\"\": \"\\\\\\\"\",\n\t\t\"\\\\\": \"\\\\\\\\\"\n\t};\n\tJSON.stringify = function(value, replacer, space) {\n\n\t\t// The stringify method takes a value and an optional replacer, and an optional\n\t\t// space parameter, and returns a JSON text. The replacer can be a function\n\t\t// that can replace values, or an array of strings that will select the keys.\n\t\t// A default replacer method can be provided. Use of the space parameter can\n\t\t// produce text that is more easily readable.\n\n\t\tlet i;\n\t\tgap = \"\";\n\t\tindent = \"\";\n\t\t// If the space parameter is a number, make an indent string containing that\n\t\t// many spaces.\n\t\tif(typeof space === \"number\") {\n\t\t\tfor(i = 0; i < space; i += 1) {\n\t\t\t\tindent += \" \";\n\t\t\t}\n\n\t\t\t// If the space parameter is a string, it will be used as the indent string.\n\n\t\t} else if(typeof space === \"string\") {\n\t\t\tindent = space;\n\t\t}\n\n\t\t// If there is a replacer, it must be a function or an array.\n\t\t// Otherwise, throw an error.\n\n\t\trep = replacer;\n\t\tif(replacer && typeof replacer !== \"function\" && (\n\t\t\t\ttypeof replacer !== \"object\" ||\n\t\t\t\ttypeof replacer.length !== \"number\"\n\t\t\t)) {\n\t\t\tthrow new Error(\"JSON.stringify\");\n\t\t}\n\n\t\t// Make a fake root object containing our value under the key of \"\".\n\t\t// Return the result of stringifying the value.\n\n\t\treturn str(\"\", {\n\t\t\t\"\": value\n\t\t});\n\t};\n}\n\n// If the JSON object does not yet have a parse method, give it one.\n\nif(typeof JSON.parse !== \"function\") {\n\tJSON.parse = function(text, reviver) {\n\t\t// The parse method takes a text and an optional reviver function, and returns\n\t\t// a JavaScript value if the text is a valid JSON text.\n\t\tlet j;\n\n\t\tfunction walk(holder, key) {\n\t\t\t// The walk method is used to recursively walk the resulting structure so\n\t\t\t// that modifications can be made.\n\t\t\tlet k;\n\t\t\tlet v;\n\t\t\tlet value = holder[key];\n\t\t\tif(value && typeof value === \"object\") {\n\t\t\t\tfor(k in value) {\n\t\t\t\t\tif(Object.prototype.hasOwnProperty.call(value, k)) {\n\t\t\t\t\t\tv = walk(value, k);\n\t\t\t\t\t\tif(v !== undefined) {\n\t\t\t\t\t\t\tvalue[k] = v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdelete value[k];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn reviver.call(holder, key, value);\n\t\t}\n\n\t\t// Parsing happens in four stages. In the first stage, we replace certain\n\t\t// Unicode characters with escape sequences. JavaScript handles many characters\n\t\t// incorrectly, either silently deleting them, or treating them as line endings.\n\t\ttext = String(text);\n\t\trx_dangerous.lastIndex = 0;\n\t\tif(rx_dangerous.test(text)) {\n\t\t\ttext = text.replace(rx_dangerous, function(a) {\n\t\t\t\treturn(\n\t\t\t\t\t\"\\\\u\" +\n\t\t\t\t\t(\"0000\" + a.charCodeAt(0).toString(16)).slice(-4)\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\n\t\t// In the second stage, we run the text against regular expressions that look\n\t\t// for non-JSON patterns. We are especially concerned with \"()\" and \"new\"\n\t\t// because they can cause invocation, and \"=\" because it can cause mutation.\n\t\t// But just to be safe, we want to reject all unexpected forms.\n\n\t\t// We split the second stage into 4 regexp operations in order to work around\n\t\t// crippling inefficiencies in IE's and Safari's regexp engines. First we\n\t\t// replace the JSON backslash pairs with \"@\" (a non-JSON character). Second, we\n\t\t// replace all simple value tokens with \"]\" characters. Third, we delete all\n\t\t// open brackets that follow a colon or comma or that begin the text. Finally,\n\t\t// we look to see that the remaining characters are only whitespace or \"]\" or\n\t\t// \",\" or \":\" or \"{\" or \"}\". If that is so, then the text is safe for eval.\n\n\t\tif(\n\t\t\trx_one.test(\n\t\t\t\ttext\n\t\t\t\t.replace(rx_two, \"@\")\n\t\t\t\t.replace(rx_three, \"]\")\n\t\t\t\t.replace(rx_four, \"\")\n\t\t\t)\n\t\t) {\n\n\t\t\t// In the third stage we use the eval function to compile the text into a\n\t\t\t// JavaScript structure. The \"{\" operator is subject to a syntactic ambiguity\n\t\t\t// in JavaScript: it can begin a block or an object literal. We wrap the text\n\t\t\t// in parens to eliminate the ambiguity.\n\t\t\tj = eval(\"(\" + text + \")\");\n\t\t\t// In the optional fourth stage, we recursively walk the new structure, passing\n\t\t\t// each name/value pair to a reviver function for possible transformation.\n\n\t\t\treturn(typeof reviver === \"function\") ?\n\t\t\t\twalk({\n\t\t\t\t\t\"\": j\n\t\t\t\t}, \"\") : j;\n\t\t}\n\t\t// If the text is not JSON parseable, then a SyntaxError is thrown.\n\t\tthrow new SyntaxError(\"JSON.parse\");\n\t};\n}","import {\n\tJSON as xsJSON\n} from \"../polyfill/index.js\";\nimport utils from \"../util/index.js\";\n\nconst global = utils.global;\nconst xsloader = global.xsloader;\n\nif(!String.prototype.trim) {\n\tString.prototype.trim = function() {\n\t\treturn this.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n\t};\n}\n\n//生成一个随机的id，只保证在本页面是唯一的\nfunction randId(suffix) {\n\tlet id = \"r\" + parseInt(new Date().getTime() / 1000) + \"_\" + parseInt(Math.random() * 1000) + \"_\" + utils.getAndIncIdCount();\n\tif(suffix !== undefined) {\n\t\tid += suffix;\n\t}\n\treturn id;\n}\n\nfunction xsEval(scriptString) {\n\ttry {\n\t\tlet rs = xsloader.IE_VERSION > 0 && xsloader.IE_VERSION < 9 ? eval(\"[\" + scriptString + \"][0]\") : eval(\"(\" + scriptString + \")\");\n\t\treturn rs;\n\t} catch(e) {\n\t\tthrow e;\n\t}\n}\n\n/**\n * 注意key需要用引号包裹\n * @param {Object} str\n * @param {Object} option\n */\nfunction xsParseJson(str, option) {\n\tif(str === \"\" || str === null || str === undefined || !xsloader.isString(str)) {\n\t\treturn str;\n\t}\n\n\toption = xsloader.extend({\n\t\tfnStart: \"\", //\"/*{f}*/\",\n\t\tfnEnd: \"\", //\"/*{f}*/\",\n\t\trcomment: \"\\\\/\\\\/#\\\\/\\\\/\"\n\t}, option);\n\n\tlet fnMap = {};\n\tlet fnOffset = 0;\n\tlet replacer = undefined;\n\tif(option.fnStart && option.fnEnd) {\n\t\twhile(true) {\n\t\t\tlet indexStart = str.indexOf(option.fnStart, fnOffset);\n\t\t\tlet indexEnd = str.indexOf(option.fnEnd, indexStart == -1 ? fnOffset : indexStart + option.fnStart.length);\n\t\t\tif(indexStart == -1 && indexEnd == -1) {\n\t\t\t\tbreak;\n\t\t\t} else if(indexStart == -1) {\n\t\t\t\tconsole.warn(\"found end:\" + option.fnEnd + \",may lack start:\" + option.fnStart);\n\t\t\t\tbreak;\n\t\t\t} else if(indexEnd == -1) {\n\t\t\t\tconsole.warn(\"found start:\" + option.fnStart + \",may lack end:\" + option.fnEnd);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlet fnId = \"_[_\" + randId() + \"_]_\";\n\t\t\tlet fnStr = str.substring(indexStart + option.fnStart.length, indexEnd).trim();\n\t\t\tif(!xsloader.startsWith(fnStr, \"function(\")) {\n\t\t\t\tthrow \"not a function:\" + fnStr;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tstr = str.substring(0, indexStart) + '\"' + fnId + '\"' + str.substring(indexEnd + option.fnEnd.length);\n\t\t\t\tlet fn = xsloader.xsEval(fnStr);\n\t\t\t\tfnMap[fnId] = fn;\n\t\t\t} catch(e) {\n\t\t\t\tconsole.error(fnStr);\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\tfnOffset = indexStart + fnId.length;\n\t\t}\n\t\treplacer = function(key, val) {\n\t\t\tif(xsloader.isString(val) && fnMap[val]) {\n\t\t\t\treturn fnMap[val];\n\t\t\t} else {\n\t\t\t\treturn val;\n\t\t\t}\n\t\t};\n\t}\n\n\tif(option.rcomment) {\n\t\tstr = str.replace(/(\\r\\n)|\\r/g, \"\\n\"); //统一换行符号\n\t\tstr = str.replace(new RegExp(option.rcomment + \"[^\\\\n]*(\\\\n|$)\", \"g\"), \"\"); //去除行注释\n\t}\n\n\ttry {\n\t\tlet jsonObj = xsJSON;\n\t\treturn jsonObj.parse(str, replacer);\n\t} catch(e) {\n\t\ttry {\n\t\t\tlet reg = new RegExp('position[\\\\s]*([0-9]+)[\\\\s]*$');\n\t\t\tif(e.message && reg.test(e.message)) {\n\t\t\t\tlet posStr = e.message.substring(e.message.lastIndexOf(\"position\") + 8);\n\t\t\t\tlet pos = parseInt(posStr.trim());\n\t\t\t\tlet _str = str.substring(pos);\n\t\t\t\tconsole.error(e.message + \":\" + _str.substring(0, _str.length > 100 ? 100 : _str.length));\n\t\t\t}\n\t\t} catch(e2) {\n\t\t\tconsole.warn(e2);\n\t\t}\n\t\tthrow e;\n\t}\n}\n\nfunction xsJson2String(obj) {\n\tlet jsonObj = xsJSON;\n\treturn jsonObj.stringify(obj);\n}\n\nconst getPathWithRelative = utils.getPathWithRelative;\n\nfunction _toParamsMap(argsStr, decode = true) {\n\tif(xsloader.isObject(argsStr)) {\n\t\treturn argsStr;\n\t}\n\tif(!argsStr) {\n\t\targsStr = location.search;\n\t}\n\n\tlet index = argsStr.indexOf(\"?\");\n\tif(index >= 0) {\n\t\targsStr = argsStr.substring(index + 1);\n\t} else {\n\t\tif(utils.dealPathMayAbsolute(argsStr).absolute) {\n\t\t\treturn {};\n\t\t}\n\t}\n\tindex = argsStr.lastIndexOf(\"#\");\n\tif(index >= 0) {\n\t\targsStr = argsStr.substring(0, index);\n\t}\n\n\tlet ret = {},\n\t\tseg = argsStr.split('&'),\n\t\ts;\n\tfor(let i = 0; i < seg.length; i++) {\n\t\tif(!seg[i]) {\n\t\t\tcontinue;\n\t\t}\n\t\ts = seg[i].split('=');\n\t\tlet name = decode ? decodeURIComponent(s[0]) : s[0];\n\t\tret[name] = decode ? decodeURIComponent(s[1]) : s[1];\n\t}\n\treturn ret;\n}\n\nfunction appendArgs2Url(url, urlArgs) {\n\tif(url === undefined || url === null || !urlArgs) {\n\t\treturn url;\n\t}\n\n\tlet index = url.lastIndexOf(\"?\");\n\tlet hashIndex = url.lastIndexOf(\"#\");\n\tif(hashIndex < 0) {\n\t\thashIndex = url.length;\n\t}\n\tlet oldParams = index < 0 ? {} : _toParamsMap(url.substring(index + 1, hashIndex), false);\n\tlet newParams = _toParamsMap(urlArgs, false);\n\tlet has = false;\n\tfor(let k in newParams) {\n\t\tif(oldParams[k] != newParams[k]) {\n\t\t\toldParams[k] = newParams[k];\n\t\t\thas = true;\n\t\t}\n\t}\n\tif(!has) {\n\t\treturn url; //参数没有变化直接返回\n\t}\n\n\tlet paramKeys = [];\n\tfor(let k in oldParams) {\n\t\tparamKeys.push(k);\n\t}\n\tparamKeys.sort();\n\n\tlet path = index < 0 ? url.substring(0, hashIndex) : url.substring(0, index);\n\tlet params = [];\n\n\tfor(let i = 0; i < paramKeys.length; i++) { //保证参数按照顺序\n\t\tlet k = paramKeys[i];\n\t\tparams.push(k + \"=\" + oldParams[k]);\n\t}\n\tparams = params.join(\"&\");\n\tlet hash = \"\";\n\tif(hashIndex >= 0 && hashIndex < url.length) {\n\t\thash = url.substring(hashIndex);\n\t}\n\treturn path + (params ? \"?\" + params : \"\") + (hash ? hash : \"\");\n\n}\n\nfunction queryString2ParamsMap(argsStr, decode) {\n\treturn _toParamsMap(argsStr, decode);\n}\n\nexport default {\n\trandId,\n\txsEval,\n\txsParseJson,\n\txsJson2String,\n\tgetPathWithRelative,\n\tappendArgs2Url,\n\tqueryString2ParamsMap\n};","const ostring = Object.prototype.toString;\n\nfunction isArray(it) {\n\treturn it && (it instanceof Array) || ostring.call(it) === '[object Array]';\n}\n\nfunction isFunction(it) {\n\treturn it && (typeof it == \"function\") || ostring.call(it) === '[object Function]';\n}\n\nfunction isObject(it) {\n\tif(it === null || it === undefined) {\n\t\treturn false;\n\t}\n\treturn(typeof it == \"object\") || ostring.call(it) === '[object Object]';\n}\n\nfunction isString(it) {\n\treturn it && (typeof it == \"string\") || ostring.call(it) === '[object String]';\n}\n\nfunction isDate(it) {\n\treturn it && (it instanceof Date) || ostring.call(it) === '[object Date]';\n}\n\nfunction isRegExp(it) {\n\treturn it && (it instanceof RegExp) || ostring.call(it) === '[object RegExp]';\n}\n\nexport default {\n\tisArray,\n\tisFunction,\n\tisObject,\n\tisString,\n\tisDate,\n\tisRegExp,\n};","import utils from \"../util/index.js\";\n\nconst global = utils.globa;\nconst xsloader = global.xsloader;\n\nfunction queryParam(name, otherValue, optionUrl) {\n\tlet search;\n\tif(optionUrl) {\n\t\tlet index = optionUrl.indexOf('?');\n\t\tif(index < 0) {\n\t\t\tindex = 0;\n\t\t} else {\n\t\t\tindex += 1;\n\t\t}\n\t\tsearch = optionUrl.substr(index);\n\t} else {\n\t\tsearch = window.location.search.substr(1);\n\t}\n\n\tlet reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\n\tlet r = search.match(reg);\n\tif(r != null) return decodeURIComponent(r[2]);\n\treturn otherValue !== undefined ? otherValue : null;\n}\n\nfunction getUrl(relativeUrl, appendArgs, optionalAbsUrl) {\n\tif(optionalAbsUrl && !utils.dealPathMayAbsolute(optionalAbsUrl).absolute) {\n\t\tthrow new Error(\"expected absolute url:\" + optionalAbsUrl);\n\t}\n\tif(appendArgs === undefined) {\n\t\tappendArgs = true;\n\t}\n\tlet theConfig = xsloader.config();\n\tlet thePageUrl = xsloader.pageUrl();\n\tlet url;\n\tif(relativeUrl === undefined) {\n\t\turl = thePageUrl;\n\t} else if(xsloader.startsWith(relativeUrl, \".\") || utils.dealPathMayAbsolute(relativeUrl).absolute) {\n\t\turl = utils.getPathWithRelative(optionalAbsUrl || thePageUrl, relativeUrl);\n\t} else {\n\t\turl = theConfig.baseUrl + relativeUrl;\n\t}\n\tif(appendArgs) {\n\t\tif(url == thePageUrl) {\n\t\t\turl += location.search + location.hash;\n\t\t}\n\t\treturn theConfig.dealUrl({}, url);\n\t} else {\n\t\treturn url;\n\t}\n}\n\nfunction tryCall(fun, defaultReturn, thiz, exCallback) {\n\tlet rs;\n\ttry {\n\t\tthiz = thiz === undefined ? this : thiz;\n\t\trs = fun.call(thiz);\n\t} catch(e) {\n\t\tif(xsloader.isFunction(exCallback)) {\n\t\t\texCallback(e);\n\t\t} else {\n\t\t\tconsole.warn(e);\n\t\t}\n\t}\n\tif(rs === undefined || rs === null) {\n\t\trs = defaultReturn;\n\t}\n\treturn rs;\n}\n\nfunction dealProperties(obj, properties) {\n\treturn utils.propertiesDeal(obj, properties);\n}\n\nfunction extend(target) {\n\tfor(let i = 1; i < arguments.length; i++) {\n\t\tlet obj = arguments[i];\n\t\tif(!obj) {\n\t\t\tcontinue;\n\t\t}\n\t\tfor(let x in obj) {\n\t\t\tlet value = obj[x];\n\t\t\tif(value === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ttarget[x] = obj[x];\n\t\t}\n\t}\n\treturn target;\n}\n\nfunction extendDeep(target) {\n\tif(!target) {\n\t\treturn target;\n\t}\n\tfor(let i = 1; i < arguments.length; i++) {\n\t\tlet obj = arguments[i];\n\t\tif(!obj) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tfor(let x in obj) {\n\t\t\tlet value = obj[x];\n\t\t\tif(value === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(xsloader.isObject(value) && xsloader.isObject(target[x])) {\n\t\t\t\ttarget[x] = xsloader.extendDeep(target[x], value);\n\t\t\t} else {\n\t\t\t\ttarget[x] = obj[x];\n\t\t\t}\n\t\t}\n\t}\n\treturn target;\n}\n\nfunction _AsyncCall(useTimer) {\n\tlet thiz = this;\n\tlet count = 0;\n\tlet ctrlCallbackMap = {};\n\n\tfunction initCtrlCallback(callbackObj) {\n\t\tlet mineCount = count + \"\";\n\t\tif(!ctrlCallbackMap[mineCount]) {\n\t\t\tlet ctrlCallback = function() {\n\t\t\t\tcount++;\n\t\t\t\tlet asyncCallQueue = ctrlCallbackMap[mineCount];\n\t\t\t\tdelete ctrlCallbackMap[mineCount];\n\t\t\t\twhile(asyncCallQueue.length) {\n\t\t\t\t\tlet callbackObj = asyncCallQueue.shift();\n\t\t\t\t\tlet lastReturn = undefined;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif(callbackObj.callback) {\n\t\t\t\t\t\t\tlastReturn = callbackObj.callback.call(callbackObj.handle, callbackObj.obj, mineCount);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t}\n\t\t\t\t\tlet handle;\n\t\t\t\t\twhile(callbackObj.nextCallback.length) {\n\t\t\t\t\t\tlet nextObj = callbackObj.nextCallback.shift();\n\t\t\t\t\t\tif(!handle) {\n\t\t\t\t\t\t\thandle = thiz.pushTask(nextObj.callback, lastReturn);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\thandle.next(nextObj.callback);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tctrlCallbackMap[mineCount] = [];\n\t\t\tif(!useTimer && global.Promise && global.Promise.resolve) {\n\t\t\t\tglobal.Promise.resolve().then(ctrlCallback);\n\t\t\t} else {\n\t\t\t\tsetTimeout(ctrlCallback, 0);\n\t\t\t}\n\t\t}\n\t\tlet queue = ctrlCallbackMap[mineCount];\n\t\tqueue.push(callbackObj);\n\t}\n\n\tthis.pushTask = function(callback, obj) {\n\t\tlet callbackObj;\n\t\tlet handle = {\n\t\t\tnext: function(nextCallback, lastReturn) {\n\t\t\t\tcallbackObj.nextCallback.push({\n\t\t\t\t\tcallback: nextCallback,\n\t\t\t\t\tlastReturn: lastReturn\n\t\t\t\t});\n\t\t\t\treturn this;\n\t\t\t}\n\t\t};\n\t\tcallbackObj = {\n\t\t\tcallback: callback,\n\t\t\tobj: obj,\n\t\t\tnextCallback: [],\n\t\t\thandle: handle\n\t\t};\n\n\t\tinitCtrlCallback(callbackObj);\n\n\t\treturn handle;\n\t};\n}\n\nconst theAsyncCall = new _AsyncCall();\nconst theAsyncCallOfTimer = new _AsyncCall(true);\n\nlet asyncCall = function(callback, useTimer) {\n\tif(useTimer) {\n\t\treturn theAsyncCallOfTimer.pushTask(callback);\n\t} else {\n\t\treturn theAsyncCall.pushTask(callback);\n\t}\n};\n\n/**\n * 得到属性\n * @param {Object} obj\n * @param {Object} attrNames \"rs\"、\"rs.total\"等\n */\nfunction getObjectAttr(obj, attrNames, defaultValue) {\n\tif(!obj || !attrNames) {\n\t\treturn undefined;\n\t}\n\tlet attrs = attrNames.split(\".\");\n\tlet rs = defaultValue;\n\tlet i = 0;\n\tfor(; i < attrs.length && obj; i++) {\n\t\tlet k = attrs[i];\n\t\tobj = obj[k];\n\t}\n\tif(i == attrs.length) {\n\t\trs = obj;\n\t}\n\n\treturn rs;\n}\n\n/**\n * 设置属性\n * @param {Object} obj\n * @param {Object} attrNames \"rs\"、\"rs.total\"等\n */\nfunction setObjectAttr(obj, attrNames, value) {\n\tlet _obj = obj;\n\tlet attrs = attrNames.split(\".\");\n\n\tfor(let i = 0; i < attrs.length; i++) {\n\t\tlet k = attrs[i];\n\n\t\tif(i == attrs.length - 1) {\n\t\t\tobj[k] = value;\n\t\t\tbreak;\n\t\t}\n\t\tlet o = obj[k];\n\t\tif(!o) {\n\t\t\to = {};\n\t\t\tobj[k] = o;\n\t\t}\n\t\tobj = o;\n\t}\n\treturn _obj;\n}\n\nfunction clone(obj, isDeep) {\n\t// Handle the 3 simple types, and null or undefined or function\n\tif(!obj || xsloader.isFunction(obj) || xsloader.isString(obj)) return obj;\n\n\tif(xsloader.isRegExp(obj)) {\n\t\treturn new RegExp(obj.source, obj.flags);\n\t}\n\n\t// Handle Date\n\tif(xsloader.isDate(obj)) {\n\t\tlet copy = new Date();\n\t\tcopy.setTime(obj.getTime());\n\t\treturn copy;\n\t}\n\t// Handle Array or Object\n\tif(xsloader.isArray(obj) || xsloader.isObject(obj)) {\n\t\tlet copy = xsloader.isArray(obj) ? [] : {};\n\t\tfor(let attr in obj) {\n\t\t\tif(obj.hasOwnProperty(attr))\n\t\t\t\tcopy[attr] = isDeep ? clone(obj[attr]) : obj[attr];\n\t\t}\n\t\treturn copy;\n\t}\n\treturn obj;\n}\n\nexport default {\n\tqueryParam,\n\tgetUrl,\n\ttryCall,\n\tdealProperties,\n\textend,\n\textendDeep,\n\tasyncCall,\n\tgetObjectAttr,\n\tsetObjectAttr,\n\tclone\n};","import utils from \"../util/index.js\";\n\nconst global = utils.global;\nconst xsloader=global.xsloader;\n\nlet isDOM = (typeof HTMLElement === 'object') ?\n\tfunction(obj) {\n\t\treturn obj && (obj instanceof HTMLElement);\n\t} :\n\tfunction(obj) {\n\t\treturn obj && typeof obj === 'object' && obj.nodeType === 1 && typeof obj.nodeName === 'string';\n\t};\n\nlet onReadyFun = (function() {\n\tlet isGlobalReady = false;\n\tlet bindReadyQueue = [];\n\n\tfunction BindReady(callback) {\n\t\tif(isGlobalReady) {\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\t\tlet isReady = false;\n\n\t\tfunction ready() {\n\t\t\tif(isReady) return;\n\t\t\tisReady = true;\n\t\t\tisGlobalReady = true;\n\t\t\tcallback();\n\t\t}\n\t\t// Mozilla, Opera and webkit nightlies currently support this event\n\t\tif(document.addEventListener) {\n\t\t\tdocument.addEventListener(\"DOMContentLoaded\", function() {\n\t\t\t\tdocument.removeEventListener(\"DOMContentLoaded\", arguments.callee);\n\t\t\t\tready();\n\t\t\t});\n\n\t\t} else if(document.attachEvent) {\n\t\t\t// ensure firing before onload,\n\t\t\t// maybe late but safe also for iframes\n\t\t\tdocument.attachEvent(\"onreadystatechange\", function() {\n\t\t\t\tif(document.readyState === \"complete\") {\n\t\t\t\t\tdocument.detachEvent(\"onreadystatechange\", arguments.callee);\n\t\t\t\t\tready();\n\t\t\t\t}\n\t\t\t});\n\t\t\t// If IE and not an iframe\n\t\t\t// continually check to see if the document is ready\n\t\t\tif(document.documentElement.doScroll && typeof global.frameElement === \"undefined\")(function() {\n\t\t\t\tif(isReady) return;\n\t\t\t\ttry {\n\t\t\t\t\t// If IE is used, use the trick by Diego Perini\n\t\t\t\t\t// http://javascript.nwbox.com/IEContentLoaded/\n\t\t\t\t\tdocument.documentElement.doScroll(\"left\");\n\t\t\t\t} catch(error) {\n\t\t\t\t\tsetTimeout(arguments.callee, 0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// and execute any waiting functions\n\t\t\t\tready();\n\t\t\t})();\n\t\t} else {\n\t\t\txsloader.asyncCall(null, true).next(function() {\n\t\t\t\tready();\n\t\t\t});\n\t\t}\n\t\tthis.readyCall = ready;\n\t}\n\tlet onReady = function(callback) {\n\t\tif(document.readyState === \"complete\") {\n\t\t\tisGlobalReady = true;\n\t\t}\n\t\tlet br = new BindReady(callback);\n\t\tif(!isGlobalReady) {\n\t\t\tbindReadyQueue.push(br);\n\t\t}\n\t};\n\tonReady(function() {\n\t\tisGlobalReady = true;\n\t});\n\n\tif(document.readyState === \"complete\") {\n\t\tisGlobalReady = true;\n\t} else {\n\t\tlet addEventHandle;\n\t\tif(global.addEventListener) {\n\t\t\taddEventHandle = function(type, callback) {\n\t\t\t\tglobal.addEventListener(type, callback, false);\n\t\t\t};\n\t\t} else if(global.attachEvent) {\n\t\t\taddEventHandle = function(type, callback) {\n\t\t\t\tglobal.attachEvent(\"on\" + type, callback);\n\t\t\t};\n\t\t} else {\n\t\t\taddEventHandle = function(type, callback) {\n\t\t\t\txsloader.asyncCall(null, true).next(function() {\n\t\t\t\t\tcallback();\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t\taddEventHandle(\"load\", function() {\n\t\t\tisGlobalReady = true;\n\t\t\twhile(bindReadyQueue.length) {\n\t\t\t\tbindReadyQueue.shift().readyCall();\n\t\t\t}\n\t\t});\n\t}\n\treturn onReady;\n})();\n\nexport default {\n\tisDOM,\n\tonReady: onReadyFun\n};","import utils from \"../util/index.js\";\n////////////////////\n\nimport deprecated from './global-deprecated.js';\nimport base from './global-base.js';\n//////////////////\nimport is from './is.js';\nimport funs from './funs.js';\nimport browser from './browser.js';\n\nconst global = utils.global;\nconst xsloader=global.xsloader;\n\nlet toGlobal = {\n\t...deprecated,\n\t...base\n};\nfor(let k in toGlobal) {\n\txsloader[k] = toGlobal[k];\n\tglobal[k] = toGlobal[k];\n}\n\nlet justLoader = {\n\t...is,\n\t...funs,\n\t...browser,\n\t_ignoreAspect_: {\n\n\t}\n};\nfor(let k in justLoader) {\n\txsloader[k] = justLoader[k];\n}"],"names":["g","window","undefined","self","global","Error","ABSOLUTE_PROTOCOL_REG","ABSOLUTE_PROTOCOL_REG2","defaultJsExts","xsloader","isJsFile","path","isString","pluginIndex","indexOf","substring","index","theConfig","config","jsExts","i","length","endsWith","ext","dealPathMayAbsolute","currentUrl","location","href","rs","exec","finalPath","absolute","protocol","_protocol","_host","host","getPathWithRelative","relative","isPathDir","relativeQuery","qIndex","lastIndexOf","isRelativeDir","prefix","absolute2","index2","stack","split","pop","relatives","str","push","result","join","appendArgs2Url","getNodeAbsolutePath","node","src","removeQueryHash","url","REPLACE_STRING_PROPERTIES_EXP","RegExp","ALL_TYPE_PROPERTIES_EXP","propertiesDeal","configObject","properties","replaceStringProperties","string","property","propKey","propValue","getObjectAttr","propertyKey","has","replaceProperties","obj","enableKeyAttr","isFunction","isArray","isObject","replaceKeyMap","x","_x","objx","__dealt__","fun","call","replaceModulePrefix","deps","m","pluginParam","query","startsWith","modulePrefixCount","modulePrefix","replaceStr","replace","len","pluginName","dep","getScriptBySubname","subname","ss","document","getElementsByTagName","script","commentRegExp","cjsRequireRegExp","GraphPath","pathEdges","vertexMap","depMap","addEdge","begin","end","hasDep","name","tryAddEdge","paths","hasLoop","visited","recursionStack","checkLoop","v","edges","edge","strValue2Arr","each","ary","func","isSync","fromEnd","handle","__commentReplace","match","singlePrefix","appendInnerDeps","callback","toString","idCount","getAndIncIdCount","graphPath","urls","base","utils","defContextName","DATA_ATTR_MODULE","DATA_ATTR_CONTEXT","isOpera","opera","readyRegExp","navigator","platform","theLoaderScript","currentScript","theLoaderUrl","thePageUrl","currentDefineModuleQueue","peek","lastAppendHeadDom","useDefineQueue","theRealDefine","safariVersion","Invoker","moduleMap","invoker","absoluteUrl","DefineObject","thiz","args","isRequire","parentDefine","onError","err","before","depBefore","depDeps","orderDep","instance","absUrl","thatInvoker","getCurrentScript","isRemoveQueryHash","_getCurrentScriptOrSrc","IE_VERSION","nodes","readyState","a","b","c","e","sourceURL","stacktrace","String","slice","s","__createNode","createElement","type","charset","async","__removeListener","ieName","detachEvent","removeEventListener","__browserLoader","moduleName","callbackObj","setAttribute","attachEvent","onScriptLoad","addEventListener","errListen","onScriptError","apply","arguments","appendHeadDom","__getScriptData","evt","currentTarget","srcElement","getAttribute","dom","isDOM","nextDom","nextSibling","head","insertBefore","loadScript","onload","onerror","removed","test","scriptData","defineObject","define","doDefine","console","error","xsJson2String","then","option","extend","asyncCall","predefine","prerequire","initDefine","theDefine","theDefinedMap","INNER_DEPS_PLUGIN","innerDepsMap","getModule","nameOrUrl","removeUrlParam","get","setModule","last","buildInvoker","module","id","randId","getId","getUrl","relativeUrl","appendArgs","optionalAbsUrl","getAbsoluteUrl","rurl","baseUrl","search","hash","dealUrl","require","h","thenHandle","defineAsync","withAbsUrl","getName","_newModule","selfname","newModule","instances","relys","otherModule","directDefineIndex","ignoreAspect","depModules","_loadCallback","moduleObject","loopObject","instanceType","setInstanceType","_singlePluginResult","lastSinglePluginResult","pluginArgs","setSinglePluginResult","willCache","finish","_directArgs","setState","log","isDefault","__default","state","errinfo","_callback","_state","theCallback","depModule","_newDepModule","relyCallback","init","getDeps","defined_module_for_deps","shift","toOtherModule","theRelys","relyIt","whenNeed","loadCallback","callbackFun","dealInstance","moduleInstance","_module_","opId","setToAll","value","_getModuleId","k","ins","mobj","_modules_","_m_","mayAddDeps","moduleDeps","indexInArray","printOnNotDefined","root","_printOnNotDefined","leafs","findLeaf","item","genErrs","infos","parent","leaf","reverse","as","info","errModule","depMod","parentNode","indexPlguin","mod","randModuleIndex","_dealEmbedDeps","modName","isOrderDep","_getPluginParam","everyRequired","everyOkCallback","errCallback","isError","jsFilePath","hanle","moduleLoop","hasCallErr","theExports","depCount","Array","invoker_the_module","checkFinish","dep_name","syncHandle","originDep","relyItFun","genExports","i1","i2","i3","version","groupModule","defaultVersion","_url","_resUrlBuilder","isInUrls","getUrls","module2","mayAsyncCallLoadModule","loadModule","defineHandle","defines","_deps","originCallback","rt","defineFunction","cache","onModuleLoaded","lastDefineObject","ifmodule","moduleScript","moduleSelf","_ignoreAspect_","needCallback","depModuleArgs","pluginMain","depId","depsObj","getCacheKey","theContext","globalDefineQueue","requiresQueueBeforeConf","argsObject","_newContext","context","contextName","defQueue","pathname","urlArgs","ignoreProperties","depsPaths","waitSeconds","autoUrlArgs","dealtDeps","dealProperties","hasOrderDep","splice","urlArg","Date","getTime","forPrefixSuffix","aurl","encodeURIComponent","dealUrlArgs","isAutoUrlArgs","star","urlArgsArr","urlArgObj","starP","_urlArgs_prefix","_urlArgs_suffix","strfix","urlOrName","strfixObj","pushDeps","dealtDepArray","depsArray","keyName","arr","elem","data","isGlobal","__define","thenOption","scriptSrc","putUrlArgs","argsObj","getUrlArgs","clearUrlArgs","Function","prototype","bind","method","warn","offset","pushAll","starts","ends","_indexInArray","array","ele","compare","indexInArrayFrom","JSON","rx_one","rx_two","rx_three","rx_four","rx_escapable","rx_dangerous","f","n","this_value","valueOf","toJSON","isFinite","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","Boolean","Number","gap","indent","meta","rep","quote","lastIndex","charCodeAt","key","holder","mind","partial","Object","hasOwnProperty","stringify","replacer","space","parse","text","reviver","j","walk","eval","SyntaxError","trim","suffix","parseInt","Math","random","xsEval","scriptString","xsParseJson","fnStart","fnEnd","rcomment","fnMap","fnOffset","indexStart","indexEnd","fnId","fnStr","fn","val","jsonObj","xsJSON","reg","message","posStr","pos","_str","e2","_toParamsMap","argsStr","decode","ret","seg","decodeURIComponent","hashIndex","oldParams","newParams","paramKeys","sort","params","queryString2ParamsMap","ostring","it","isDate","isRegExp","globa","queryParam","otherValue","optionUrl","substr","r","pageUrl","tryCall","defaultReturn","exCallback","target","extendDeep","_AsyncCall","useTimer","count","ctrlCallbackMap","initCtrlCallback","mineCount","ctrlCallback","asyncCallQueue","lastReturn","nextCallback","nextObj","pushTask","next","Promise","resolve","setTimeout","queue","theAsyncCall","theAsyncCallOfTimer","attrNames","defaultValue","attrs","setObjectAttr","_obj","o","clone","isDeep","source","flags","copy","setTime","attr","HTMLElement","nodeType","nodeName","onReadyFun","isGlobalReady","bindReadyQueue","BindReady","isReady","ready","callee","documentElement","doScroll","frameElement","readyCall","onReady","br","addEventHandle","toGlobal","deprecated","justLoader","is","funs","browser"],"mappings":"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"}