/*!
 * xsloader.js v1.1.0
 * home:https://github.com/gzxishan/xsloader#readme
 * (c) 2018-2019 gzxishan
 * Released under the Apache-2.0 License.
 * build time:Sat, 07 Sep 2019 03:20:31 GMT
 */
!function(){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(r,!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var JSON={},rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep,g;function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var r,n,o,i,a,s=gap,l=t[e];switch(l&&"object"===_typeof(l)&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),_typeof(l)){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(i=l.length,r=0;r<i;r+=1)a[r]=str(r,l)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"===_typeof(rep))for(i=rep.length,r=0;r<i;r+=1)"string"==typeof rep[r]&&(o=str(n=rep[r],l))&&a.push(quote(n)+(gap?": ":":")+o);else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(o=str(n,l))&&a.push(quote(n)+(gap?": ":":")+o);return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}if("function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,r){var n;if(indent=gap="","number"==typeof r)for(n=0;n<r;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if((rep=t)&&"function"!=typeof t&&("object"!==_typeof(t)||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var r,n,o=e[t];if(o&&"object"===_typeof(o))for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(void 0!==(n=walk(o,r))?o[r]=n:delete o[r]);return reviver.call(e,t,o)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}),void 0!==("undefined"==typeof window?"undefined":_typeof(window)))g=window;else if(void 0!==("undefined"==typeof self?"undefined":_typeof(self)))g=self;else{if(void 0===("undefined"==typeof global?"undefined":_typeof(global)))throw new Error("not found global var!");g=global}function InVar$1(r){this.get=function(){return r},this.set=function(e){var t=r;return r=e,t}}g.InVar=InVar$1;var global$1=g,_loaderFun,xsloader=global$1.xsloader=function(){return _loaderFun.apply(this,arguments)},loader={loaderFun:function(e){_loaderFun=e}},ABSOLUTE_PROTOCOL_REG=/^(([a-zA-Z0-9_]*:\/\/)|(\/)|(\/\/))/,ABSOLUTE_PROTOCOL_REG2=/^([a-zA-Z0-9_]+:)\/\/([^/\s]+)/,defaultJsExts=[".js",".js+",".js++",".es","es6",".jsx",".vue"],xsloader$1=global$1.xsloader;function isJsFile(e){if(!xsloader$1.isString(e))return!1;var t=e.indexOf("!");0<t&&(e=e.substring(0,t));var r=e.indexOf("?");0<r&&(e=e.substring(0,r)),0<(r=e.indexOf("#"))&&(e=e.substring(0,r));for(var n=xsloader$1.config(),o=n&&n.jsExts||defaultJsExts,i=0;i<o.length;i++)if(xsloader$1.endsWith(e,o[i]))return{ext:o[i],path:e};return!1}function dealPathMayAbsolute(e,t){t=t||location.href;var r,n,o=ABSOLUTE_PROTOCOL_REG.exec(e);if(o){var i=o[1];n=!0;var a=(o=ABSOLUTE_PROTOCOL_REG2.exec(t))&&o[1]||location.protocol,s=o&&o[2]||location.host;r="//"==i?a+"//"+e:"/"==i?a+"//"+s+e:e}else n=!1,r=e;return{absolute:n,path:r}}function getPathWithRelative(e,t,r){var n="",o=e.lastIndexOf("?");0<=o?e=e.substring(0,o):0<=(o=e.lastIndexOf("#"))&&(e=e.substring(0,o)),0<=(o=t.lastIndexOf("?"))?(n=t.substring(o),t=t.substring(0,o)):0<=(o=t.lastIndexOf("#"))&&(n=t.substring(o),t=t.substring(0,o));var i=dealPathMayAbsolute(t);if(i.absolute)return i.path+n;if(void 0===r){var a=e.lastIndexOf("/");r=a==e.length-1||(-1==a?a=0:a++,-1==e.indexOf(".",a))}xsloader$1.endsWith(e,"/")&&(e=e.substring(0,e.length-1));var s=!1;"."==t||xsloader$1.endsWith(t,"/")?(t=t.substring(0,t.length-1),s=!0):("."==t||".."==t||xsloader$1.endsWith("/.")||xsloader$1.endsWith("/.."))&&(s=!0);var l,u=-1,d=dealPathMayAbsolute(e);if(d.absolute){var c=(e=d.path).indexOf("//");-1==(u=e.indexOf("/",c+2))&&(u=e.length)}l=e.substring(0,u+1);var f=(e=e.substring(u+1)).split("/");!r&&0<f.length&&f.pop();for(var h=t.split("/"),p=0;p<h.length;p++){var g=h[p];if(".."==g){if(0==f.length)throw new Error("no more upper path!");f.pop()}else"."!=g&&f.push(g)}if(0==f.length)return"";var v=l+f.join("/");return s&&!xsloader$1.endsWith(v,"/")&&(v+="/"),v=xsloader$1.appendArgs2Url(v,n)}function getNodeAbsolutePath(e){var t=e.src||e.getAttribute("src");return getPathWithRelative(location.href,t)}function removeQueryHash(e){if(e){var t=e.indexOf("?");0<=t&&(e=e.substring(0,t)),0<=(t=e.indexOf("#"))&&(e=e.substring(0,t))}return e}var REPLACE_STRING_PROPERTIES_EXP=new RegExp("\\$\\{([^\\{]+)\\}"),ALL_TYPE_PROPERTIES_EXP=new RegExp("^\\$\\[([^\\[\\]]+)\\]$");function propertiesDeal(e,u){if(!u)return e;function d(e,t,r){var n,o=e;if(n=ALL_TYPE_PROPERTIES_EXP.exec(o)){var i=n[1],a=xsloader$1.getObjectAttr(t,i);return void 0===a?o:a}for(var s="";;){if(!(n=REPLACE_STRING_PROPERTIES_EXP.exec(o))){s+=o;break}var l=n[1];if(void 0!==r&&r.propertyKey==l)throw new Error("replace property error:propertyKey="+l);r&&(r.has=!0),s+=o.substring(0,n.index),s+=xsloader$1.getObjectAttr(t,l),o=o.substring(n.index+n[0].length)}return s}function c(e,t,r){if(!e)return e;if(xsloader$1.isFunction(e))return e;if(xsloader$1.isArray(e))for(var n=0;n<e.length;n++)e[n]=c(e[n],t,r);else if(xsloader$1.isString(e))e=d(e,u,t);else if(xsloader$1.isObject(e)){t&&(t.has=!1);var o={};for(var i in e)if(t&&(t.propertyKey=i),e[i]=c(e[i],t,r),r){var a=d(i,u,t);a!==i&&(o[i]=a)}for(var s in o){var l=e[s];delete e[s],e[o[s]]=l}}return e}if(!u.__dealt__){var t={has:!1};for(var r in u){var n=u[r];xsloader$1.isFunction(n)&&(u[r]=n.call(u))}for(;c(u,t),t.has;);u.__dealt__=!0}return c(e,void 0,!0)}function replaceModulePrefix(e,t){if(t){for(var r=0;r<t.length;r++){var n=t[r],o=n.indexOf("!"),i=0<o?n.substring(o):"",a=0<(o=(n=0<o?n.substring(0,o):n).indexOf("?"))?n.substring(o):"";isJsFile(n=0<o?n.substring(0,o):n)||!xsloader$1.startsWith(n,".")&&!dealPathMayAbsolute(n).absolute||(t[r]=n+".js"+a+i)}if(e.modulePrefixCount)for(var s in e.modulePrefix)for(var l=e.modulePrefix[s].replace,u=s.length,d=0;d<t.length;d++){var c=t[d],f=c.indexOf("!"),h=null;if(0<=f&&(h=c.substring(0,f+1),c=c.substring(f+1)),xsloader$1.startsWith(c,s)){var p=l+c.substring(u);t[d]=h?h+p:p}}}}function getScriptBySubname(e){var t=document.getElementsByTagName("script");if(!e)return t;for(var r=0;r<t.length;r++){var n=t[r],o=n.src;if(0<=(o=o.substring(o.lastIndexOf("/"))).indexOf(e))return n}}var urls={getPathWithRelative:getPathWithRelative,getNodeAbsolutePath:getNodeAbsolutePath,dealPathMayAbsolute:dealPathMayAbsolute,removeQueryHash:removeQueryHash,propertiesDeal:propertiesDeal,replaceModulePrefix:replaceModulePrefix,isJsFile:isJsFile,getScriptBySubname:getScriptBySubname},xsloader$2=global$1.xsloader,commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]require\s*\(\s*["']([^'"\r\n]+)["']\s*\)/g;function GraphPath(){var s={},a={},r={};function l(e,t,r,n){if(!t[e]&&(t[e]=!0,r[e]=!0,n.push(e),s[e]))for(var o=s[e],i=0;i<o.length;i++){var a=o[i];if(!t[a.end]&&l(a.end,t,r,n))return!0;if(r[a.end])return n.push(a.end),!0}return r[e]=!1}this.addEdge=function(e,t){r[e+"|"+t]=!0,s[e]||(s[e]=[]),a[e]||(a[e]=!0),a[t]||(a[t]=!0),s[e].push({begin:e,end:t})},this.hasDep=function(e,t){return r[e+"|"+t]},this.tryAddEdge=function(e,t){this.addEdge(e,t);var r=this.hasLoop();return 0<r.length&&s[e].pop(),r},this.hasLoop=function(){var e={},t={};for(var r in a)e[r]=!1,t[r]=!1;var n=!1,o=[];for(var i in a)if(l(i,e,t,o=[])){n=!0;break}return n?o:[]}}function strValue2Arr(e){if(e&&!xsloader$2.isArray(e))for(var t in e)xsloader$2.isString(e[t])&&(e[t]=[e[t]])}function each(e,n,t,o){if(e)if(t){!function t(r){if(!(o?r<0:r>=e.length)){n(e[r],r,e,function(e){e||t(o?r-1:r+1)})}}(o?e.length-1:0)}else if(o)for(var r=e.length-1;0<=r&&!1!==n(e[r],r,e);r--);else for(var i=0;i<e.length&&!1!==n(e[i],i,e);i++);}function __commentReplace(e,t){return t||""}function appendInnerDeps(r,e){xsloader$2.isFunction(e)&&e.toString().replace(commentRegExp,__commentReplace).replace(cjsRequireRegExp,function(e,t){r.push(t)})}var idCount=2019;function getAndIncIdCount(){return idCount++}var PluginError=function e(t,r){_classCallCheck(this,e),t instanceof e?(this.err=t.err,this.invoker=t.invoker):(this.err=t,this.invoker=r)},isXsLoaderEnd=!1,IE_VERSION=function(){var e=navigator.userAgent,t=-1<e.indexOf("compatible")&&-1<e.indexOf("MSIE"),r=-1<e.indexOf("Edge")&&!t,n=-1<e.indexOf("Trident")&&-1<e.indexOf("rv:11.0");if(t){var o=new RegExp("MSIE[\\s]+([0-9.]+);").exec(e),i=parseInt(o&&o[1]||-1);return-1==i?-1:i}return r?"edge":n?11:-1}(),base={graphPath:new GraphPath,strValue2Arr:strValue2Arr,each:each,appendInnerDeps:appendInnerDeps,getAndIncIdCount:getAndIncIdCount,PluginError:PluginError,loaderEnd:function(){isXsLoaderEnd=!0},isLoaderEnd:function(){return isXsLoaderEnd},IE_VERSION:IE_VERSION},utils=_objectSpread2({},urls,{global:global$1},base),global$2=utils.global,xsloader$3=global$2.xsloader;try{Function.prototype.bind&&console&&"object"==_typeof(console.log)&&utils.each(["log","info","warn","error","assert","dir","clear","profile","profileEnd"],function(e){var t=Function.prototype.bind;console[e]=t.call(console[e],console)})}catch(e){global$2.console={log:function(){},error:function(){},warn:function(){}}}try{Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var r=void 0===t?0:t;r<this.length;r++)if(this[r]==e)return r;return-1}),Array.pushAll||(Array.pushAll=function(e,t){if(!xsloader$3.isArray(t))throw new Error("not array:"+t);for(var r=0;r<t.length;r++)e.push(t[r]);return e})}catch(e){console.error(e)}function startsWith(e,t){return"string"==typeof e&&0==e.indexOf(t)}function endsWith(e,t){if("string"!=typeof e)return!1;var r=e.lastIndexOf(t);return 0<=r&&e.length-t.length==r}function _indexInArray(e,t){var r=3<arguments.length?arguments[3]:void 0,n=-1;if(e)for(var o=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)||0;o<e.length;o++)if(r){if(r(e[o],t,o,e)){n=o;break}}else if(e[o]==t){n=o;break}return n}function indexInArray(e,t,r){return _indexInArray(e,t,0,r)}function indexInArrayFrom(e,t,r,n){return _indexInArray(e,t,r,n)}var deprecated={startsWith:startsWith,endsWith:endsWith,indexInArray:indexInArray,indexInArrayFrom:indexInArrayFrom},global$3=utils.global,xsloader$4=global$3.xsloader,IE_VERSION$1=utils.IE_VERSION;function randId(e){var t="r"+parseInt((new Date).getTime()/1e3)+"_"+parseInt(1e3*Math.random())+"_"+utils.getAndIncIdCount();return void 0!==e&&(t+=e),t}function xsEval(scriptString){try{var rs=0<IE_VERSION$1&&IE_VERSION$1<9?eval("["+scriptString+"][0]"):eval("("+scriptString+")");return rs}catch(e){throw e}}function xsParseJson(t,e){if(""===t||null==t||!xsloader$4.isString(t))return t;e=xsloader$4.extend({fnStart:"",fnEnd:"",rcomment:"\\/\\/#\\/\\/"},e);var r={},n=0,o=void 0;if(e.fnStart&&e.fnEnd){for(;;){var i=t.indexOf(e.fnStart,n),a=t.indexOf(e.fnEnd,-1==i?n:i+e.fnStart.length);if(-1==i&&-1==a)break;if(-1==i){console.warn("found end:"+e.fnEnd+",may lack start:"+e.fnStart);break}if(-1==a){console.warn("found start:"+e.fnStart+",may lack end:"+e.fnEnd);break}var s="_[_"+randId()+"_]_",l=t.substring(i+e.fnStart.length,a).trim();if(!xsloader$4.startsWith(l,"function("))throw"not a function:"+l;try{t=t.substring(0,i)+'"'+s+'"'+t.substring(a+e.fnEnd.length);var u=xsloader$4.xsEval(l);r[s]=u}catch(e){throw console.error(l),e}n=i+s.length}o=function(e,t){return xsloader$4.isString(t)&&r[t]?r[t]:t}}e.rcomment&&(t=(t=t.replace(/(\r\n)|\r/g,"\n")).replace(new RegExp(e.rcomment+"[^\\n]*(\\n|$)","g"),""));try{return JSON.parse(t,o)}catch(e){try{var d=new RegExp("position[\\s]*([0-9]+)[\\s]*$");if(e.message&&d.test(e.message)){var c=e.message.substring(e.message.lastIndexOf("position")+8),f=parseInt(c.trim()),h=t.substring(f);console.error(e.message+":"+h.substring(0,100<h.length?100:h.length))}}catch(e){console.warn(e)}throw e}}function xsJson2String(e){return JSON.stringify(e)}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")});var getPathWithRelative$1=utils.getPathWithRelative;function _toParamsMap(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(xsloader$4.isObject(e))return e;var r=(e=e||location.search).indexOf("?");if(0<=r)e=e.substring(r+1);else if(utils.dealPathMayAbsolute(e).absolute)return{};0<=(r=e.lastIndexOf("#"))&&(e=e.substring(0,r));for(var n,o={},i=e.split("&"),a=0;a<i.length;a++){if(i[a])n=i[a].split("="),o[t?decodeURIComponent(n[0]):n[0]]=t?decodeURIComponent(n[1]):n[1]}return o}function appendArgs2Url(e,t){if(null==e||!t)return e;var r=e.lastIndexOf("?"),n=e.lastIndexOf("#");n<0&&(n=e.length);var o=r<0?{}:_toParamsMap(e.substring(r+1,n),!1),i=_toParamsMap(t,!1),a=!1;for(var s in i)o[s]!=i[s]&&(o[s]=i[s],a=!0);if(!a)return e;var l=[];for(var u in o)l.push(u);l.sort();for(var d=r<0?e.substring(0,n):e.substring(0,r),c=[],f=0;f<l.length;f++){var h=l[f];c.push(h+"="+o[h])}c=c.join("&");var p="";return 0<=n&&n<e.length&&(p=e.substring(n)),d+(c?"?"+c:"")+(p||"")}function queryString2ParamsMap(e,t){return _toParamsMap(e,t)}var base$1={randId:randId,xsEval:xsEval,xsParseJson:xsParseJson,xsJson2String:xsJson2String,getPathWithRelative:getPathWithRelative$1,appendArgs2Url:appendArgs2Url,queryString2ParamsMap:queryString2ParamsMap,IE_VERSION:IE_VERSION$1},ostring=Object.prototype.toString;function isArray(e){return e&&e instanceof Array||"[object Array]"===ostring.call(e)}function isFunction(e){return e&&"function"==typeof e||"[object Function]"===ostring.call(e)}function isObject(e){return null!=e&&("object"==_typeof(e)||"[object Object]"===ostring.call(e))}function isString(e){return e&&"string"==typeof e||"[object String]"===ostring.call(e)}function isDate(e){return e&&e instanceof Date||"[object Date]"===ostring.call(e)}function isRegExp(e){return e&&e instanceof RegExp||"[object RegExp]"===ostring.call(e)}var is={isArray:isArray,isFunction:isFunction,isObject:isObject,isString:isString,isDate:isDate,isRegExp:isRegExp},global$4=utils.global,xsloader$5=global$4.xsloader;function queryParam(e,t,r){var n;if(r){var o=r.indexOf("?");o<0?o=0:o+=1,n=r.substr(o)}else n=window.location.search.substr(1);var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=n.match(i);return null!=a?decodeURIComponent(a[2]):void 0!==t?t:null}function getUrl(e,t,r){if(r&&!utils.dealPathMayAbsolute(r).absolute)throw new Error("expected absolute url:"+r);void 0===t&&(t=!0);var n,o=xsloader$5.config(),i=xsloader$5.pageUrl();return n=void 0===e?i:xsloader$5.startsWith(e,".")||utils.dealPathMayAbsolute(e).absolute?utils.getPathWithRelative(r||i,e):o.baseUrl+e,t?(n==i&&(n+=location.search+location.hash),o.dealUrl({},n)):n}function tryCall(e,t,r,n){var o;try{r=void 0===r?this:r,o=e.call(r)}catch(e){xsloader$5.isFunction(n)?n(e):console.warn(e)}return null==o&&(o=t),o}function dealProperties(e,t){return utils.propertiesDeal(e,t)}function extend(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n in r){void 0!==r[n]&&(e[n]=r[n])}}return e}function extendDeep(e){if(!e)return e;for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n in r){var o=r[n];void 0!==o&&(xsloader$5.isObject(o)&&xsloader$5.isObject(e[n])?e[n]=xsloader$5.extendDeep(e[n],o):e[n]=r[n])}}return e}function _AsyncCall(o){var a=this,s=0,l={};this.pushTask=function(e,t){var r,n={next:function(e,t){return r.nextCallback.push({callback:e,lastReturn:t}),this}};return function(e){var i=s+"";if(!l[i]){var t=function(){s++;var e=l[i];for(delete l[i];e.length;){var t=e.shift(),r=void 0;try{t.callback&&(r=t.callback.call(t.handle,t.obj,i))}catch(e){console.error(e)}for(var n=void 0;t.nextCallback.length;){var o=t.nextCallback.shift();n?n.next(o.callback):n=a.pushTask(o.callback,r)}}};l[i]=[],!o&&global$4.Promise&&global$4.Promise.resolve?global$4.Promise.resolve().then(t):setTimeout(t,0)}l[i].push(e)}(r={callback:e,obj:t,nextCallback:[],handle:n}),n}}var theAsyncCall=new _AsyncCall,theAsyncCallOfTimer=new _AsyncCall(!0),asyncCall=function(e,t){return t?theAsyncCallOfTimer.pushTask(e):theAsyncCall.pushTask(e)};function getObjectAttr(e,t,r){if(e&&t){for(var n=t.split("."),o=r,i=0;i<n.length&&e;i++){e=e[n[i]]}return i==n.length&&(o=e),o}}function setObjectAttr(e,t,r){for(var n=e,o=t.split("."),i=0;i<o.length;i++){var a=o[i];if(i==o.length-1){e[a]=r;break}var s=e[a];s||(s={},e[a]=s),e=s}return n}function clone(e,t){if(!e||xsloader$5.isFunction(e)||xsloader$5.isString(e))return e;if(xsloader$5.isRegExp(e))return new RegExp(e.source,e.flags);if(xsloader$5.isDate(e)){var r=new Date;return r.setTime(e.getTime()),r}if(xsloader$5.isArray(e)||xsloader$5.isObject(e)){var n=xsloader$5.isArray(e)?[]:{};for(var o in e)e.hasOwnProperty(o)&&(n[o]=t?clone(e[o]):e[o]);return n}return e}var funs={queryParam:queryParam,getUrl:getUrl,tryCall:tryCall,dealProperties:dealProperties,extend:extend,extendDeep:extendDeep,asyncCall:asyncCall,getObjectAttr:getObjectAttr,setObjectAttr:setObjectAttr,clone:clone},global$5=utils.global,xsloader$6=global$5.xsloader,isDOM="object"===("undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement))?function(e){return e&&e instanceof HTMLElement}:function(e){return e&&"object"===_typeof(e)&&1===e.nodeType&&"string"==typeof e.nodeName},onReadyFun=function(){var a=!1,r=[];function n(e){if(a)e();else{var t,r=!1;if(document.addEventListener)t=function(){document.removeEventListener("DOMContentLoaded",t),i()},document.addEventListener("DOMContentLoaded",t);else if(document.attachEvent){var n,o;n=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",n),i())},document.attachEvent("onreadystatechange",n),o=function(){if(!r){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(o,0)}i()}},document.documentElement.doScroll&&void 0===global$5.frameElement&&o()}else xsloader$6.asyncCall(null,!0).next(function(){i()});this.readyCall=i}function i(){r||(a=r=!0,e())}}function e(e){"complete"===document.readyState&&(a=!0);var t=new n(e);a||r.push(t)}(e(function(){a=!0}),"complete"===document.readyState)?a=!0:(global$5.addEventListener?function(e,t){global$5.addEventListener(e,t,!1)}:global$5.attachEvent?function(e,t){global$5.attachEvent("on"+e,t)}:function(e,t){xsloader$6.asyncCall(null,!0).next(function(){t()})})("load",function(){for(a=!0;r.length;)r.shift().readyCall()});return e}(),browser={isDOM:isDOM,onReady:onReadyFun},global$6=utils.global,xsloader$7=global$6.xsloader,toGlobal=_objectSpread2({},deprecated,{},base$1);for(var k in toGlobal)xsloader$7[k]=toGlobal[k],global$6[k]=toGlobal[k];var justLoader=_objectSpread2({},is,{},funs,{},browser,{_ignoreAspect_:{}});for(var _k in justLoader)xsloader$7[_k]=justLoader[_k];var global$7=utils.global,theDefinedMap={},lastDefinObjectMap={},ModuleDef=(_createClass(lg,[{key:"giveRelys",value:function(e){var t=this._preModule.relyQueue;for(this._preModule=null;t.length;){var r=t.shift();e.relyIt.apply(e,r)}}}]),lg);function lg(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,lg),_defineProperty(this,"src",void 0),_defineProperty(this,"defaultModule",void 0),_defineProperty(this,"modules",void 0),_defineProperty(this,"isPreDependOn",void 0),_defineProperty(this,"_preModule",void 0),_defineProperty(this,"targetDef",void 0),this.src=e,this.isPreDependOn=t,this.modules={},this.defaultModule=null,this.targetDef=null,t&&(this._preModule={relyQueue:[],get:function(){return this},relyIt:function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.relyQueue.push(e)}})}function _isSrc(e){return/^[a-zA-Z0-9]+:\/\//.test(e)}function setLastDefineObject(e,t){e=utils.removeQueryHash(e),lastDefinObjectMap[e]=t}function getLastDefineObject(e){return e=utils.removeQueryHash(e),lastDefinObjectMap[e]}function getModule(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=_isSrc(e=utils.removeQueryHash(e)),o=theDefinedMap[e];return o&&(t=n?r?o.modules[r]:o.defaultModule:o.isPreDependOn?o._preModule:o.modules[e])?t.get():null}function preDependOn(e){if(_isSrc(e))throw new Error("expected name,but src:"+e);if(theDefinedMap[e])throw new Error("already defined:"+e);var t=new ModuleDef(null,!!e);theDefinedMap[e]=t}function replaceModuleSrc(e,t){var r=theDefinedMap[e];if(!r)throw new Error("not found module:src="+e);if(theDefinedMap[t.src])throw new Error("already exists module:src="+t.src);r.src=t.src,delete theDefinedMap[e],theDefinedMap[t.src]=r}function clearEmptyModuleBySrc(e){var t=theDefinedMap[e];if(t&&!t.defaultModule){if(t.defaultModule)throw new Error("not empty module:src="+e);for(var r in t.modules)throw new Error("not empty module:src="+e);delete theDefinedMap[e]}}function setModule(e,t){var r=t.src;if(!r)throw new Error("expected module src!");var n=theDefinedMap[r];if(n)if(e){var o=theDefinedMap[e];if(theDefinedMap[e]&&o!=n&&!o.isPreDependOn)throw new Error("already define module:\n\tname="+e+",current.src="+r+",\n\tthat.src="+theDefinedMap[e].src);n.modules[e]=t,theDefinedMap[e]=n,o&&o.isPreDependOn&&o.giveRelys(t)}else{if(n.defaultModule&&n.defaultModule!=t)throw new Error("already define default module:src="+r);n.defaultModule=t}else if(n=new ModuleDef(r),theDefinedMap[r]=n,e){n.modules[e]=t;var i=theDefinedMap[e];if(i&&!i.isPreDependOn)throw new Error("already define module:\n\tname="+e+",current.src="+r+",\n\tthat.src="+theDefinedMap[e].src);theDefinedMap[e]=n,i&&i.isPreDependOn&&i.giveRelys(t)}else n.defaultModule=t}var moduleDef={getModule:getModule,setModule:setModule,replaceModuleSrc:replaceModuleSrc,clearEmptyModuleBySrc:clearEmptyModuleBySrc,preDependOn:preDependOn,setLastDefineObject:setLastDefineObject,getLastDefineObject:getLastDefineObject},global$8=utils.global,xsloader$8=global$8.xsloader;function buildInvoker(e){var r=e.thiz,o=e.module||e,t=xsloader$8.randId();r.getId=function(){return t},r.getUrl=function(e,t,r){if(r&&!utils.dealPathMayAbsolute(r).absolute)throw new Error(-1,"expected absolute url:"+r);var n;return void 0===t&&(t=!0),n=void 0===e?this.getAbsoluteUrl():xsloader$8.startsWith(e,".")||utils.dealPathMayAbsolute(e).absolute?utils.getPathWithRelative(r||this.rurl(),e):xsloader$8.config().baseUrl+e,t?(n==script.thePageUrl&&(n+=location.search+location.hash),xsloader$8.config().dealUrl(o,n)):n},r.require=function(){return xsloader$8.require.apply(r,arguments)},r.define=function(){return xsloader$8.define.apply(r,arguments)},r.rurl=function(e){return e&&e.absUrl()||this.absUrl()||this.getAbsoluteUrl()},r.defineAsync=function(){return this.define.apply(this,arguments)},r.withAbsUrl=function(e){var t={module:o,src:e,absUrl:function(){return e},name:r.getName(),invoker:r.invoker()};return t.thiz=new script.Invoker(t),buildInvoker(t),t.thiz}}function newModuleInstance(u,e,t,d){var r={relyCallback:t,_invoker:e,_module_:null,initInvoker:function(){var t=this;if(!u.ignoreAspect){var e=this._object,r=this._invoker,n=function(e){return e._invoker_=r,e._module_&&(e._modules_=e._modules_||[],e._modules_.push(e._module_)),e._module_=t._module_,e},o="clone"!=u.instanceType;if(xsloader$8.isObject(e)){if(u.loopObject&&!o)throw new Error("loop dependency not support single option:"+u.description());this._object=n(o?e:xsloader$8.clone(e))}else xsloader$8.isFunction(e)&&(this._object=n(e))}},_object:null,_setDepModuleObjectGen:function(e){this._object=e,this.initInvoker()},module:u,moduleObject:function(){return this._object},genExports:function(){return this._setDepModuleObjectGen({}),this._object},_getCacheKey:function(e){return this._object.getCacheKey?this._object.getCacheKey.call(this.thiz,e):this._invoker.getUrl()},_willCache:function(e,t){return!this._object.willCache||this._object.willCache.call(this.thiz,e,t)},lastSinglePluginResult:function(e){var t=this._getCacheKey(e);return this.module.lastSinglePluginResult(t,e)},setSinglePluginResult:function(e,t){var r=this._getCacheKey(e),n=this._willCache(e,t);return this.module.setSinglePluginResult(n,r,e,t)},init:function(e){var r=this,n=this.relyCallback;if(this._module_=this.module.dealInstance(this),this._setDepModuleObjectGen(this.module.loopObject||this.module.moduleObject),void 0!==d){if(!this._object)throw new Error("pulgin error:"+this.module.description());if(void 0===this._object.isSingle&&(this._object.isSingle=!0),e&&!this._object.isSingle)throw new Error("just for single plugin");var o=!1,t=function(e,t){null==e&&(e={__default:!0}),o=!0,r._object.isSingle&&r.setSinglePluginResult(d,{result:e,ignoreAspect:t}),r.module.ignoreAspect=void 0===t||t,r._setDepModuleObjectGen(e),n(r)},i=function(e){o=!0,n(r,new utils.PluginError(e||!1))},a=[d,t,i,xsloader$8.config()].concat(this.module.depModules);try{var s;if(this._object.isSingle&&void 0!==(s=this.lastSinglePluginResult(d))){var l=s;t(l.result,l.ignoreAspect)}else this._object.pluginMain.apply(this.thiz,a)}catch(e){console.warn(e),i(e)}o||setTimeout(function(){o||console.warn("invoke plugin may failed:page="+location.href+",plugin="+u.selfname+"!"+d)},1e3*xsloader$8.config().waitSeconds)}else n(this)}},n={module:u,src:u.thiz.getAbsoluteUrl(),absUrl:function(){return u.thiz.absUrl()},name:u.thiz.getName(),invoker:r._invoker};return r.thiz=new script.Invoker(n),buildInvoker(r),r}function _newModule(e,t,r,n,o){t=utils.removeQueryHash(t);var i=new script.DefineObject(t,null,[e,null,o],!1);return i.thatInvoker=n,i.handle={absUrl:r},newModule(i)}function newModule(e){var t=[],a={id:utils.getAndIncIdCount(),selfname:e.selfname,description:function(){return"selfname="+(this.selfname||"")+",src="+this.src},deps:e.deps||[],relys:[],otherModule:void 0,directDefineIndex:0,ignoreAspect:!1,depModules:null,src:e.src,absUrl:function(){return e.absUrl()},callback:e.callback,_loadCallback:null,moduleObject:void 0,loopObject:void 0,invoker:e.thatInvoker,instanceType:"single",reinitByDefineObject:function(e){this.deps=e.deps||[],this.callback=e.callback},setInstanceType:function(e){this.instanceType=e},_singlePluginResult:{},lastSinglePluginResult:function(e,t){if(this._singlePluginResult[e])return this._singlePluginResult[e][t]},setSinglePluginResult:function(e,t,r,n){e?(this._singlePluginResult[t]||(this._singlePluginResult[t]={}),this._singlePluginResult[t][r]=n):this._singlePluginResult[t]&&delete this._singlePluginResult[t][r]},finish:function(e){if(0!=this.directDefineIndex){for(var t=[],r=this.directDefineIndex;r<e.length;r++)t.push(e[r]);e=t}var n;if(this.depModules=e,xsloader$8.isFunction(this.callback))try{script.currentDefineModuleQueue.push(this),n=this.callback.apply(this.thiz,e),script.currentDefineModuleQueue.pop()}catch(e){return script.currentDefineModuleQueue.pop(),console.error("error occured,invoker.url=",this.invoker?this.invoker.getUrl():""),console.error(e),void this.setState("error",e)}else n=this.callback,void 0!==this.moduleObject&&console.warn("ignore moudule:"+a.description());var o=!1;if(void 0===n&&(n={__default:o=!0}),this.loopObject){if(!xsloader$8.isObject(n))throw new Error("循环依赖的模块必须是对象："+this.description());for(var i in n)this.loopObject[i]=n[i];n=this.loopObject}void 0!==this.moduleObject&&(o||void 0===n)||(this.moduleObject=n),this.setState("defined")},state:"init",errinfo:null,_callback:function(e){var t=this,r=t.state;if("defined"==r||t.loopObject){var n=function(){e&&newModuleInstance(t,e.thatInvoker,e.relyCallback,e.pluginArgs).init()},o=!t.loopObject&&xsloader$8.config().getDeps(t.selfname);return o&&0<o.length?xsloader$8.require(o,function(){n()}).then({defined_module_for_deps:t.selfname}):n(),!1}return"timeout"!=r&&"error"!=r||(e&&e.relyCallback(this,this.errinfo),!1)},setState:function(e,t){if(this.state=e,this.errinfo=t,!this._callback())for(;this.relys.length;){var r=this.relys.shift();this._callback(r)}},get:function(){return this.otherModule?(this.state=this.otherModule.state,this.otherModule):this},toOtherModule:function(e){this.otherModule=e,this.get();var t=this.relys;for(this.relys=[];t.length;){var r=t.shift();e.relyIt(r.thatInvoker,r.relyCallback,r.pluginArgs)}},whenNeed:function(e){this.relys.length||this.otherModule&&this.otherModule.relys.length?e():this._loadCallback=e},relyIt:function(e,t,r){if(this.otherModule)return this.get(),void this.otherModule.relyIt(e,t,r);var n={thatInvoker:e,relyCallback:t,pluginArgs:r};if(this._callback(n)&&this.relys.push(n),this._loadCallback){var o=this._loadCallback;this._loadCallback=null,o()}}};return a.thiz=new script.Invoker(a),a.dealInstance=function(e){return t.push(e),{opId:null,setToAll:function(n,o,i){if(void 0===i||i!=this.opId){i=i||getModuleId(),this.opId=i;var a={};if(xsloader$8.isString(n))a[n]=o;else{if(!xsloader$8.isObject(n))throw new Error("unknown param:"+n);for(var e in n)a[e]=n[e]}utils.each(t,function(e){var t=e.moduleObject();for(var r in a)t[r]=a[r];t._modules_&&utils.each(t._modules_,function(e){e.setToAll(n,o,i)})})}}}},a.printOnNotDefined=function(){var e={nodes:[]};this._printOnNotDefined(e);var r=[];!function t(e){e.nodes.length?utils.each(e.nodes,function(e){t(e)}):r.push(e)}(e),utils.each(r,function(e){var t=[];!function e(t,r){r.push(t.err),t.parent&&e(t.parent,r)}(e,t),t=t.reverse(),console.error("load module error stack:my page="+location.href);for(var r=1;r<t.length;){for(var n=[],o=0;o<3&&r<t.length;o++)n.push(t[r++]);console.warn(n.join("\n\t---\x3e"))}var i=e.module;if(e.module&&"defined"==e.module.state&&(i=e.parent.module),i){for(var a=[],s=0;s<i.deps.length;s++){var l=i.deps[s],u=l.lastIndexOf("!");-1!=u&&(l=l.substring(0,u));var d=moduleDef.getModule(l);d?a.push(l+":"+d.state):a.push(l+":null")}console.warn("failed module:"+i.description()+",\n\tdeps state infos ["+a.join(",")+"]")}})},a._printOnNotDefined=function(n){var o={err:"["+this.description()+"].state="+this.state,module:this,parent:n,nodes:[]};n.nodes.push(o),"defined"!=this.state&&utils.each(this.deps,function(e){var t=e.indexOf("!");0<t&&(e=e.substring(0,t));var r=moduleDef.getModule(e);r&&"defined"==r.state?r._printOnNotDefined(o):r?r._printOnNotDefined(o):o.nodes.push({parent:n,nodes:[],err:"["+e+"] has not module"})})},moduleDef.setModule(a.selfname,a),buildInvoker(a),a}var randModuleIndex=0;function getModuleId(){return"_xs_req_2019_"+randModuleIndex++}function everyRequired(d,c,s,f){if(!d.isError){d.dealRelative(c);var h,p=xsloader$8.config(),g=!1,v=!1,b=c.deps.length,x=new Array(b),m=c.thiz;utils.each(c.deps,function(l,r,e,n){var o=l,t=void 0,i=l.indexOf("!");0<i&&(t=l.substring(i+1),l=l.substring(0,i));if(!moduleDef.getModule(l)){var u=utils.isJsFile(l),a=function(){var i=void 0;if(!u&&l.indexOf("/")<0&&0<=l.indexOf(":")){var e,t,r=l.indexOf(":"),n=l.indexOf(":",r+1),o=0<n?l.indexOf(":",n+1):-1;if(-1==n)return f(g="illegal module:"+l,m),"break";if(t=-1==o?(e=p.defaultVersion[l],l+":"+e):(e=l.substring(o+1),l),void 0===e)return f(g="unknown version for:"+l,m),"break";var a=xsloader$8._resUrlBuilder(t);i=xsloader$8.isArray(a)?a:[a]}else i=p.isInUrls(l)?p.getUrls(l):u?[l]:[];if(0==i.length?moduleDef.preDependOn(l):utils.each(i,function(e,t){if(xsloader$8.startsWith(e,".")||xsloader$8.startsWith(e,"/"))c.thiz.rurl(d)||(g="script url is null:'"+c.description(),f(g,m)),e=utils.getPathWithRelative(c.thiz.rurl(d),e);else{var r=utils.dealPathMayAbsolute(e);e=r.absolute?r.path:p.baseUrl+e}i[t]=p.dealUrl(l,e)}),!g&&i.length){var s=_newModule(u?null:l,i[0],c.absUrl,c.thiz);s.setState("loading"),function t(e){var r=0<arguments.length&&void 0!==e?e:0;if(!(r>=i.length)){var n=i[r];if(moduleDef.setLastDefineObject(n,d),0<r){var o=s.src;s.src=n,moduleDef.replaceModuleSrc(o,s)}script.loadScript(s.selfname,n,function(e){if("loading"==s.state){var t=moduleDef.getModule(s.src);t&&s!=t&&s.toOtherModule(t)}"loading"==s.state&&s.finish([])},function(e){r+1<i.length?t(r+1):f(g=e,m)})}}()}};do{if("break"===a())break}while(0)}g||moduleDef.getModule(l).relyIt(m,function(e,t){t?g=t:(b--,"exports"==l&&(h?c.moduleObject=h:h=c.moduleObject=e.genExports())),function(e,t,r,n){x[e]=r,b<=0&&!g?s(x,c):g&&(c.setState("error",g),v||(v=!0,f({err:g,index:e,dep_name:t},m))),!g&&n&&n()}(r,o,e,n)},t)},d.handle.orderDep)}}var moduleScript=_objectSpread2({},moduleDef,{newModule:newModule,everyRequired:everyRequired,buildInvoker:buildInvoker,newModuleInstance:newModuleInstance,getModuleId:getModuleId}),global$9=utils.global,xsloader$9=global$9.xsloader,defContextName="xsloader1.1.x",DATA_ATTR_MODULE="data-xsloader-module",DATA_ATTR_CONTEXT="data-xsloader-context",INNER_DEPS_PLUGIN="__inner_deps__",innerDepsMap={},globalDefineQueue=[],isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),safariVersion=(Nk=navigator.userAgent.toLowerCase().match(/version\/([\d.]+).*safari/),Nk?parseInt(Nk[1]):-1),Nk,readyRegExp="PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,theLoaderScript=document.currentScript||utils.getScriptBySubname("xsloader.js"),theLoaderUrl=utils.getNodeAbsolutePath(theLoaderScript),thePageUrl=(Ok=location.href,Ok=utils.removeQueryHash(Ok)),Ok,head=document.head||document.getElementsByTagName("head")[0],currentDefineModuleQueue=[];currentDefineModuleQueue.peek=function(){if(0<this.length)return this[this.length-1]};var lastAppendHeadDom=theLoaderScript,isSrcFromScriptLoad,lastScriptSrc=thePageUrl,theRealDefine;function _dealEmbedDeps(e){for(var t=0;t<e.length;t++){var r=e[t];if(xsloader$9.isArray(r)){var n="inner_order_"+moduleScript.getModuleId(),o=!(0<r.length&&!1===r[0]);0<r.length&&(!1===r[0]||!0===r[0])&&(r=r.slice(1)),innerDepsMap[n]={deps:r,orderDep:o},e[t]=INNER_DEPS_PLUGIN+"!"+n}}}function _getPluginParam(e){var t=e.indexOf("!");return 0<t?e.substring(t):""}0<safariVersion&&safariVersion<=7&&(isSrcFromScriptLoad=!0);var Invoker=(_createClass(Wk,[{key:"getAbsoluteUrl",value:function(){return this._im.get().src}},{key:"getName",value:function(){return this._im.get().selfname}},{key:"invoker",value:function(){return this._im.get().invoker}},{key:"absUrl",value:function(){return this._im.get().absUrl()}}]),Wk);function Wk(e){_classCallCheck(this,Wk),_defineProperty(this,"_im",void 0),this._im=new InVar(e)}function getInvoker(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(e instanceof Invoker)return e;if(e instanceof DefineObject)return e.thatInvoker;if(t){var r={module:"",src:thePageUrl,absUrl:function(){return thePageUrl},name:"__root__",invoker:null};return r.thiz=new Invoker(r),moduleScript.buildInvoker(r),r.thiz.invoker=function(){return this},r.thiz}}var DefineObject=(_createClass(fl,[{key:"dealConfigDeps",value:function(){var e=this.src,t=this.selfname,r=this.deps,n=xsloader$9.config();if(n){var o=n.getDeps(e);utils.each(o,function(e){r.push(e)}),t&&t!=e&&(o=n.getDeps(t),utils.each(o,function(e){r.push(e)})),utils.replaceModulePrefix(n,r)}_dealEmbedDeps(r)}},{key:"dealRelative",value:function(e){for(var t=this.deps,r=0;r<t.length;r++){var n=t[r],o=utils.isJsFile(n);e.thiz.rurl(this)&&o&&xsloader$9.startsWith(n,".")&&(n=utils.getPathWithRelative(e.thiz.rurl(this),o.path)+_getPluginParam(n),t[r]=n),0<utils.graphPath.tryAddEdge(this.handle.defined_module_for_deps||e.selfname,n).length&&(moduleScript.getModule(n).loopObject={})}}},{key:"absUrl",value:function(){return this.getMineAbsUrl()||this.src}},{key:"getMineAbsUrl",value:function(){return this.handle.absUrl||this.handle.absoluteUrl}}]),fl);function fl(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=!(4<arguments.length&&void 0!==arguments[4])||arguments[4];_classCallCheck(this,fl),_defineProperty(this,"thiz",void 0),_defineProperty(this,"isRequire",void 0),_defineProperty(this,"src",void 0),_defineProperty(this,"parentDefine",void 0),_defineProperty(this,"handle",void 0),_defineProperty(this,"selfname",void 0),_defineProperty(this,"deps",void 0),_defineProperty(this,"callback",void 0),_defineProperty(this,"thatInvoker",void 0),this.src=e,this.thiz=t,this.isRequire=n,this.parentDefine=currentDefineModuleQueue.peek(),this.handle={onError:function(e){console.warn(e)},before:function(e){},depBefore:function(e,t,r){},orderDep:!1,absoluteUrl:void 0,absUrl:void 0,instance:void 0},this.thatInvoker=getInvoker(t);var i=r[0],a=r[1],s=r[2];1==r.length?(s=i,a=i=null):"string"!=typeof i&&(s=a,a=i,i=null),a&&!xsloader$9.isArray(a)&&(s=a,a=null),a=a||[],utils.appendInnerDeps(a,s),this.selfname=i,this.deps=a,this.callback=s,o&&this.dealConfigDeps()}function getCurrentScript(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];var t=function(){if(void 0!==document.currentScript){var e=document.currentScript&&document.currentScript.src&&document.currentScript;if(e)return{node:e,src:e.src}}if(0<utils.IE_VERSION&&utils.IE_VERSION<=10)for(var t=document.getElementsByTagName("script"),r=0;r<t.length;r++){var n=t[r];if("interactive"===n.readyState)return n.src?{node:n,src:n.src}:{src:thePageUrl}}var o;try{(void 0).b.c()}catch(e){!(o=e.stack||e.sourceURL||e.stacktrace||"")&&window.opera&&(o=(String(e).match(/of linked script \S+/g)||[]).join(" "))}if(o)return{src:(o="("==(o=o.split(/[@ ]/g).pop())[0]?o.slice(1,-1):o).replace(/(:\d+)?:\d+$/i,"")}}();if(t=t||{src:thePageUrl},utils.isLoaderEnd()&&t.src==theLoaderUrl&&(t.src=thePageUrl,t.node=null),!t.node&&t.src!=thePageUrl)for(var r=utils.removeQueryHash(t.src),n=document.getElementsByTagName("script"),o=0;o<n.length;o++){var i=n[o];if(r==utils.removeQueryHash(i.src)){t.node=i;break}}return t.node&&(t.src=utils.getNodeAbsolutePath(t.node)),e&&(t.src=utils.removeQueryHash(t.src)),t}function __createNode(){var e=document.createElement("script");return e.type="text/javascript",e.charset="utf-8",e.async=!0,e}function __removeListener(e,t,r,n){e.detachEvent&&!isOpera?n&&e.detachEvent(n,t):e.removeEventListener(r,t,!1)}function __browserLoader(e,t,r){var n=__createNode();if(e&&n.setAttribute(DATA_ATTR_MODULE,e),n.setAttribute(DATA_ATTR_CONTEXT,defContextName),!xsloader$9.isFunction(n.addEventListener)&&n.attachEvent&&!(n.attachEvent.toString&&n.attachEvent.toString().indexOf("[native code")<0)&&!isOpera)n.attachEvent("onreadystatechange",r.onScriptLoad);else{n.addEventListener("load",r.onScriptLoad,!0);var o=function e(){__removeListener(n,e,"error"),r.onScriptError.apply(this,arguments)};r.errListen=o,n.addEventListener("error",o,!0)}n.src=t,appendHeadDom(n)}function __getScriptData(e,t){var r=e.currentTarget||e.srcElement;return __removeListener(r,t.onScriptLoad,"load","onreadystatechange"),__removeListener(r,t.errListen,"error"),{node:r,name:r&&r.getAttribute(DATA_ATTR_MODULE),src:utils.removeQueryHash(r&&utils.getNodeAbsolutePath(r))}}function appendHeadDom(e){if(!xsloader$9.isDOM(e))throw new Error("expected dom object,but provided:"+e);var t=lastAppendHeadDom.nextSibling;head.insertBefore(e,t),lastAppendHeadDom=e}function loadScript(e,t,r,n){var o={onScriptLoad:function(e){if(!o.removed&&("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState))){o.removed=!0;var t=__getScriptData(e,o);isSrcFromScriptLoad?(lastScriptSrc=t.src,xsloader$9.asyncCall(function(){r(t)})):0<utils.IE_VERSION||"edge"==utils.IE_VERSION?xsloader$9.asyncCall(function(){r(t)}):r(t)}},onScriptError:function(e){if(!o.removed){o.removed=!0;var t=__getScriptData(e,o);n(t)}}};__browserLoader(e,t,o)}function doDefine(e,t,r){var n=getCurrentScript().src,o=new DefineObject(n,e,t,r,!isSrcFromScriptLoad);if(!isSrcFromScriptLoad)try{if(o.src){var i=document.currentScript;if(i&&i.getAttribute("src")&&i.getAttribute(DATA_ATTR_CONTEXT)!=defContextName&&o.src!=theLoaderUrl&&o.src!=thePageUrl)return console.error("unknown js script module:"+xsloader$9.xsJson2String(o.src)),void console.error(i)}}catch(e){xsloader$9.config().error(e)}var a={then:function(e){return o.handle=xsloader$9.extend(o.handle,e),this},error:function(e){return o.handle.onError=e,this}},s=utils.isLoaderEnd();return xsloader$9.asyncCall(function(){isSrcFromScriptLoad&&s&&(o.src=lastScriptSrc,o.dealConfigDeps()),theRealDefine([o])}),a}function predefine(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return doDefine(this,e,!1)}function prerequire(r,e){if(!xsloader$9.config())throw new Error("not config");var t=getInvoker(this,!0);if(1==arguments.length&&xsloader$9.isString(r)){var n=r,o=void 0,i=r.indexOf("!");if(0<i&&(o=r.substring(i+1),r=r.substring(0,i),o)){var a=[o];utils.replaceModulePrefix(xsloader$9.config(),a),o=a[0]}var s,l=moduleScript.getModule(r);if(l||(r=t.getUrl(r,!1),l=moduleScript.getModule(r)),!l)throw new Error("the module '"+n+"' is not load!");if("defined"!=l.state)throw new Error("the module '"+n+"' is not defined:"+l.state);if(moduleScript.newModuleInstance(l,t,function(e){s=e.moduleObject()},o).init(!0),void 0===s)throw Error("the module '"+n+"' is not load!");return s}var u,d=xsloader$9.randId("_require");xsloader$9.isFunction(r)&&(e=r,r=[]),utils.appendInnerDeps(r,e);var c,f,h=doDefine(this,[d,r,function(){void 0!==u&&(clearTimeout(u),u=void 0),xsloader$9.isFunction(e)&&e.apply(this,arguments)}],!0);h.error(function(e,t){f=e,void 0!==u&&(clearTimeout(u),u=void 0),c?c(e,t):(console.warn("invoker.url:"+t.getUrl()),console.warn(e))}),h.error=function(e){return c=e,this};return u=setTimeout(function(){u=void 0;var e=moduleScript.getModule(d);if(!(e&&"defined"==e.state||f)){var t=e;t&&utils.each(t.deps,function(e){var t=moduleScript.getModule(e);t&&t.printOnNotDefined&&t.printOnNotDefined()}),console.error("require timeout:["+(r?r.join(","):"")+"]")}},1e3*xsloader$9.config().waitSeconds),h}var initDefine=function(r){return theRealDefine=function(e,t){xsloader$9.config()?r(e,t):globalDefineQueue.push(e)},{predefine:predefine,prerequire:prerequire}},onConfigedCallback=function(){for(;globalDefineQueue.length;){var e=globalDefineQueue.shift();theRealDefine(e)}},script={defContextName:defContextName,theLoaderScript:theLoaderScript,theLoaderUrl:theLoaderUrl,thePageUrl:thePageUrl,appendHeadDom:appendHeadDom,initDefine:initDefine,Invoker:Invoker,DefineObject:DefineObject,loadScript:loadScript,currentDefineModuleQueue:currentDefineModuleQueue,onConfigedCallback:onConfigedCallback,INNER_DEPS_PLUGIN:INNER_DEPS_PLUGIN,innerDepsMap:innerDepsMap},global$a=utils.global,xsloader$a=global$a.xsloader,theContext,theConfig,argsObject={};function _newContext(){return{contextName:script.contextName,defQueue:[]}}xsloader$a.config=function(){return theConfig},xsloader$a.script=function(){return script.theLoaderScript},xsloader$a.scriptSrc=function(){return script.theLoaderUrl},xsloader$a.putUrlArgs=function(e){argsObject=xsloader$a.extend(argsObject,e)},xsloader$a.getUrlArgs=function(){return xsloader$a.extend({},argsObject)},xsloader$a.clearUrlArgs=function(){argsObject={}},xsloader$a.appendHeadDom=script.appendHeadDom,xsloader$a.hasDefine=function(e){var t=!1,r=moduleScript.getModule(e);return r&&"init"!=r.state&&(t=!0),t},xsloader$a._resUrlBuilder=function(e){throw new Error("resUrlBuilder not found!")},xsloader$a.clear_module_=function(){for(var e=arguments,t=0;t<e.length;t++)e[t]&&(delete e[t]._module_,delete e[t]._modules_)},loader.loaderFun(function(i){if(theContext)throw new Error("already configed!");if(i=xsloader$a.extend({baseUrl:utils.getPathWithRelative(location.pathname,"./",xsloader$a.endsWith(location.pathname,"/")),urlArgs:{},ignoreProperties:!1,paths:{},depsPaths:{},deps:{},jsExts:void 0,properties:{},modulePrefix:{},defineFunction:{},modulePrefixCount:0,waitSeconds:10,autoUrlArgs:function(){return!1},instance:"single",dealtDeps:{},dealProperties:function(e){return utils.propertiesDeal(e,i.properties)},isInUrls:function(e){return!!this.getUrls(e)},getUrls:function(e){return this.paths[e]||this.depsPaths[e]},getDeps:function(e){var t=this.dealtDeps[e]||[],r=[],n=void 0;0<t.length&&(!0===t[0]||!1===t[0])&&(t[0]?(r=[[]],n=!0):t.splice(0,1));for(var o=0;o<t.length;o++)!0===n?r[0].push(t[o]):r.push(t[o]);return r},dealUrl:function(e,t){var r,n;for(var o in this.autoUrlArgs()?r="_t="+(new Date).getTime():(xsloader$a.isString(e)?(r=this.urlArgs[e])?n=e:(n=e,r=this.forPrefixSuffix(e)):((r=this.urlArgs[t])?n=t:r=this.forPrefixSuffix(t),r||(n=e.selfname,r=this.urlArgs[n]),r||(n=e.aurl,r=this.forPrefixSuffix(n))),r||(n="*",r=this.urlArgs["*"])),xsloader$a.isFunction(r)&&(r=r.call(this,n)),argsObject)r+="&"+o+"="+encodeURIComponent(argsObject[o]);return xsloader$a.appendArgs2Url(t,r)},dealUrlArgs:function(e){return e=utils.getPathWithRelative(location.href,e),this.dealUrl(e,e)},defaultVersion:{}},i),xsloader$a.endsWith(i.baseUrl,"/")||(i.baseUrl+="/"),i.baseUrl=utils.getPathWithRelative(location.href,i.baseUrl),i.ignoreProperties||(i=i.dealProperties(i)),utils.strValue2Arr(i.paths),utils.strValue2Arr(i.depsPaths),utils.strValue2Arr(i.deps),!xsloader$a.isFunction(i.autoUrlArgs)){var e=i.autoUrlArgs;i.autoUrlArgs=function(){return e}}var t=0;for(var r in i.modulePrefix){if(xsloader$a.startsWith(r,".")||xsloader$a.startsWith(r,"/"))throw new Error("modulePrefix can not start with '.' or '/'("+r+")");t++}if(0<(i.modulePrefixCount=t)){var n=i.urlArgs["*"];delete i.urlArgs["*"];var o=[];for(var a in i.urlArgs){var s=a;if(utils.isJsFile(s))if(xsloader$a.startsWith(s,".")||xsloader$a.startsWith(s,"/")&&!xsloader$a.startsWith(s,"//"))s=utils.getPathWithRelative(script.theLoaderUrl,s);else{var l=utils.dealPathMayAbsolute(s);l.absolute?s=l.path:xsloader$a.startsWith(s,"*]")||(s=i.baseUrl+s)}o.push({url:s,args:i.urlArgs[a]})}for(var u in i.modulePrefix)for(var d=i.modulePrefix[u].replace,c=0;c<o.length;c++){var f=o[c],h="";xsloader$a.startsWith(f.url,"*[")&&(h="*[",f.url=f.url.substring(2)),xsloader$a.startsWith(f.url,u)&&(f.url=d+f.url.substring(u.length)),h&&(f.url=h+f.url)}i.urlArgs={},i.urlArgs["*"]=n;for(var p=0;p<o.length;p++){var g=o[p];i.urlArgs[g.url]=g.args}}var v=[],b=[];for(var x in i._urlArgs_prefix=v,i._urlArgs_suffix=b,i.urlArgs){var m=x;if(xsloader$a.startsWith(m,"*[")){var y=m.substring(2);if(xsloader$a.startsWith(y,".")||xsloader$a.startsWith(y,"/")&&!xsloader$a.startsWith(y,"//"))y=utils.getPathWithRelative(script.theLoaderUrl,y);else{var _=utils.dealPathMayAbsolute(y);_.absolute?y=_.path:m=i.baseUrl+m}v.push({strfix:y,value:i.urlArgs[x]}),delete i.urlArgs[x]}else xsloader$a.startsWith(m,"*]")&&(b.push({strfix:m.substring(2),value:i.urlArgs[x]}),delete i.urlArgs[x])}for(var $ in i.forPrefixSuffix=function(e){for(var t=0;t<v.length;t++){var r=v[t];if(xsloader$a.startsWith(e,r.strfix)){return xsloader$a.isFunction(r.value)?r.value.call(this,e):r.value}}for(var n=0;n<b.length;n++){var o=b[n];if(xsloader$a.endsWith(e,o.strfix)){return xsloader$a.isFunction(o.value)?o.value.call(this,e):o.value}}},i.paths)utils.replaceModulePrefix(i,i.paths[$]);for(var w in i.depsPaths)utils.replaceModulePrefix(i,i.depsPaths[w]);function O(t,e){utils.each(e,function(e){t.push(e)})}function A(e){var t=e.split("::"),o=i.deps[e];utils.each(t,function(e){if("*"==e)for(var t in i.depsPaths){var r=S[t]=S[t]||[];O(r,o)}else{var n=S[e]=S[e]||[];O(n,o)}})}var S=i.dealtDeps;for(var P in i.deps)A(P);return theConfig=i,theContext=_newContext(),script.onConfigedCallback(),theConfig});var global$b=utils.global,xsloader$b=global$b.xsloader,defineHandle=script.initDefine(function(e,t){var r=1<arguments.length&&void 0!==t?t:function(){};utils.each(e,function(i){if(xsloader$b.isFunction(i.callback)){var a=i.callback;i.callback=function(){var e,r,n=xsloader$b.config();if(utils.each(i.names,function(e){var t=n.defineFunction[e];if(xsloader$b.isFunction(t))return r=t,!1}),r){for(var t=[],o=0;o<arguments.length;o++)t.push(arguments[o]);e=r.apply(this,[a,this,t])}else e=a.apply(this,arguments);return a=null,e},i.callback.originCallback=a}onModuleLoaded(i,moduleScript.getLastDefineObject(i.src)),r()})});function onModuleLoaded(r,e){var t=moduleScript.getModule(r.src,r.selfname);t?"loading"==t.state&&t.reinitByDefineObject(r):t=moduleScript.newModule(r);var n=[];r.selfname&&r.selfname!=r.src&&n.push(r.selfname),t.selfname&&t.selfname!=r.selfname&&t.selfname!=r.src&&n.push(t.selfname),r.names=n,utils.each(n,function(e){moduleScript.setModule(e,t),xsloader$b._ignoreAspect_[e]&&(t.ignoreAspect=!0)});var o=t;if(r.handle.before&&r.handle.before(o.deps),e&&e.handle.depBefore&&e.handle.depBefore(e.index,o.selfname,o.deps,2),o.setState("loaded"),o.setInstanceType(r.handle.instance||xsloader$b.config().instance),0==o.deps.length)o.finish([]);else{var i=function(){moduleScript.everyRequired(r,o,function(e){var t=[],r=[];utils.each(e,function(e){r.push(e),t.push(e&&e.moduleObject())}),t.push(r),o.finish(t)},function(e,t){r.handle.onError(e,t)})};r.isRequire?i():o.whenNeed(i)}}var define=function(){return defineHandle.predefine.apply(this,arguments)},require=function(){return defineHandle.prerequire.apply(this,arguments)};require.has=function(){var e=arguments;if(0==e.length)return!1;for(var t=0;t<e.length;t++){var r=moduleScript.getModule(e[t]);if(!r||"defined"!=r.state)return!1}return!0},xsloader$b.define=define,xsloader$b.defineAsync=define,xsloader$b.require=require,global$b.define=define,global$b.require=require,define.amd=!0,define("exports",function(){});var global$c=utils.global,xsloader$c=global$c.xsloader;xsloader$c.define(script.INNER_DEPS_PLUGIN,{pluginMain:function(e,r,n,t){var o=script.innerDepsMap[e],i=o.deps;this.invoker().require(i,function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);r(e)}).then({orderDep:o.orderDep,error:function(e,t){n(new utils.PluginError(e,t))}})},getCacheKey:function(e){return e}});var global$d=utils.global,xsloader$d=global$d.xsloader;xsloader$d.define("ready",{pluginMain:function(e,t,r,n){xsloader$d.onReady(function(){t()})}});var global$e=utils.global,xsloader$e=global$e.xsloader;xsloader$e.define("nodeps",{isSingle:!0,pluginMain:function(e,r,t,n){this.invoker().require([e],function(e,t){r(e)}).then({depBefore:function(e,t,r){r.splice(0,r.length)}}).error(function(e){t(e)})}});var global$f=utils.global,xsloader$f=global$f.xsloader;xsloader$f.define("exists",{isSingle:!0,pluginMain:function(e,r,t,n){for(var o=e.split("|"),i=0;i<o.length;i++)o[i]=o[i].trim();if(0==o.length)t("args error for exists!");else{var a=o[0];if(moduleScript.getModule(a))this.invoker().require([a],function(e,t){r(e)}).error(function(e){t(e)});else{for(var s=void 0,l=1;l<o.length;l++)if(window[o[l]]){s=window[o[l]];break}void 0===s?t("not found:"+e):r(s)}}}});var global$g=utils.global,xsloader$g=global$g.xsloader;xsloader$g.define("name",{isSingle:!0,pluginMain:function(e,s,t,r){var n=e.indexOf("=>>");if(-1!=n){var o=e.substring(0,n),l=(o=o.replace(/，/g,",")).split(","),i=e.substring(n+3);this.invoker().require([i],function(e,t){for(var r=[],n=0;n<l.length;n++){var o=l[n],i=moduleScript.getModule(o);if(i&&"init"!=i.state)r.push(o);else{var a=t[0].module;i?i.toOtherModule(a):moduleScript.setModule(o,a)}}r.length&&console.warn("already exists:",r.join(",")),s(e)}).error(function(e){t(e)})}else t("expected:=>>")}});var global$h=utils.global,xsloader$h=global$h.xsloader;xsloader$h.define("css",function(){if("undefined"==typeof window)return{load:function(e,t,r){r()}};var e=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)|AndroidWebKit\/([^ ;]*)/)||0,o=!1,i=!0;e[1]||e[7]?o=parseInt(e[1])<6||parseInt(e[7])<=9:e[2]||e[8]||"WebkitAppearance"in document.documentElement.style?i=!1:e[4]&&(o=parseInt(e[4])<18);function n(){u=document.createElement("style"),xsloader$h.appendHeadDom(u),d=u.styleSheet||u.sheet}function a(e){d.addImport(e),u.onload=function(){h()},31==++r&&(n(),r=0)}function s(e,t){if(t=t||function(){},d&&d.addImport||n(),d&&d.addImport)c?f.push([e,t]):(a(e),c=t);else{u.textContent='@import "'+e+'";';var r=setInterval(function(){try{u.sheet.cssRules,clearInterval(r),t()}catch(e){console.warn(e)}},10)}}function l(e,t){t=t||function(){};var r=document.createElement("link");if(r.type="text/css",r.rel="stylesheet",i)r.onload=function(){r.onload=function(){},setTimeout(t,7)};else var n=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){if(document.styleSheets[e].href==r.href)return clearInterval(n),t()}},10);r.href=e,xsloader$h.appendHeadDom(r)}var u,d,c,t={},r=0,f=[],h=function(){c();var e=f.shift();e?(c=e[1],a(e[0])):c=null};return t.pluginMain=function(e,t,r,n){(o?s:l)(this.invoker().getUrl(e,!0),t)},t.getCacheKey=function(e){var t=this.invoker();return t?t.getUrl(e,!0):e},t.loadCss=function(e,t){(o?s:l)(xsloader$h.getUrl(e),t)},t.loadCsses=function(){for(var e=arguments,t=0;t<e.length;t++)(o?s:l)(xsloader$h.getUrl(e[t]),null)},t});var global$i=utils.global,xsloader$i=global$i.xsloader;xsloader$i.define("text",["xshttp"],{isSingle:!0,pluginMain:function(e,t,r,n,o){var i=this.invoker().getUrl(e,!0);o().url(i).handleAs("text").ok(function(e){t(e)}).fail(function(e){r(e)}).done()}});var global$j=utils.global,xsloader$j=global$j.xsloader;xsloader$j.define("window",{isSingle:!0,pluginMain:function(e,r,t,n,o){var i=e.indexOf("=>>");if(-1!=i){var a=e.substring(0,i),s=e.substring(i+3);this.invoker().require([s],function(e,t){window[a]=e,r(e)})}else t("expected:=>>")}});var global$k=utils.global,xsloader$k=global$k.xsloader;xsloader$k.define("withdeps",{pluginMain:function(e,n,t,r){var o=e.indexOf("=>>");if(-1!=o){var i,a=e.substring(0,o),s=e.substring(o+3);try{if(i=xsloader$k.xsParseJson(s),!xsloader$k.isArray(i))return void t("deps is not Array:"+s)}catch(e){return void t("deps error:"+s)}this.invoker().require([[!1].concat(i),a],function(e,t,r){n(t)}).then({orderDep:!0})}else t("expected:=>>")}});var global$l=utils.global,xsloader$l=global$l.xsloader;xsloader$l.define("json",["xshttp"],{isSingle:!0,pluginMain:function(e,t,r,n,o){var i=this.invoker().getUrl(e,!0);o().url(i).handleAs("json").ok(function(e){t(e)}).fail(function(e){r(e)}).done()}});var global$m=utils.global,xsloader$m=global$m.xsloader,progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];function httpRequest(e){function t(e,t,r){return void 0===e[t]?r:e[t]}function r(e,t,r){if(e[t])for(var n in e[t]){var o=e[t][n];null!=o&&(r[n]=o)}}var n=t(e=e||{},"url",""),o=t(e,"method","GET"),i={},a={"X-Requested-With":"XMLHttpRequest"},s=t(e,"async",!0),l=t(e,"multiPart",!1),u=t(e,"handleType","json"),d=e.timeout;r(e,"params",i),r(e,"headers",a);var c=e.ok,f=e.fail,h=e.uploadStart,p=e.uploadProgress,g=e.uploadOk,v=e.uploadError,b=e.uploadEnd,x=e._beforeOpenHook||httpRequest._beforeOpenHook,m=e._onOkResponseHook||httpRequest._onOkResponseHook,y=e._onFailResponseHook||httpRequest._onFailResponseHook;function _(){!function(e){var t={url:n,method:o.toUpperCase(),params:i,headers:a,handleType:u,async:s,multiPart:l,timeout:d};x(t,function(){!function(i,a){var e,s;if(i.multiPart){var t=new FormData;for(var r in i.params){var n=i.params[r];xsloader$m.isArray(n)?t.append(r,xsloader$m.xsJson2String(n)):t.append(r,n)}e=t}else{for(var o in e="",i.params){var l=i.params[o];null!=l&&("object"==_typeof(l)&&(l=xsloader$m.xsJson2String(l)),e+="&"+encodeURIComponent(o)+"="+encodeURIComponent(l))}"POST"!=i.method&&"PUT"!=i.method&&(i.url.lastIndexOf("?")<0&&0<e.length&&(i.url+="?"),i.url+=e,i.url=i.url.replace("?&","?"),e=null)}a.open(i.method,i.url,i.async),"POST"!=i.method&&"PUT"!=i.method||i.multiPart||i.headers.hasOwnProperty("Content-Type")||a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(var u in i.headers)a.setRequestHeader(u,i.headers[u]);"function"==typeof h&&(a.upload.onloadstart=h);"function"==typeof p&&(a.upload.onprogress=p);"function"==typeof g&&(a.upload.onload=g);"function"==typeof v&&(a.upload.onerror=v);"function"==typeof b&&(a.upload.onloadend=b);var d=!1;i.timeout&&(s=setTimeout(function(){d=!0,a.abort(),clearTimeout(s)},i.timeout));a.onreadystatechange=function(e){var t;if(4===a.readyState)if(399<(t=a.status||0)&&t<600||!t){var r=new Error(i.url+" HTTP status: "+t);r.xhr=a,$(i,a,r)}else{var n;if("json"===i.handleType)try{n=xsloader$m.xsParseJson(a.responseText)}catch(e){return void $(i,a,new Error("parse-json-error:"+e),"parse-json-error")}else"text"===i.handleType&&(n=a.responseText);m(n,i,function(e){"function"==typeof c&&c(e,a)},a)}else if(s&&d){var o=new Error(i.url+" timeout status: "+t);o.xhr=a,$(i,a,o)}},a.send(e)}(t,e)},e)}(function(){var e,t,r;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){r=progIds[t];try{e=new ActiveXObject(r)}catch(e){console.warn(e)}if(e){progIds=[r];break}}return e}())}function $(e,t,r,n){y(e,function(e){!1===e||void 0===e?"function"==typeof f?f(r):console.error(r):"function"==typeof c&&c(e,t)},t,n)}return{multiPart:function(e){return l=e,this},uploadStart:function(e){return h=e,this},uploadProgress:function(e){return p=e,this},uploadOk:function(e){return g=e,this},uploadError:function(e){return v=e,this},uploadEnd:function(e){return b=e,this},url:function(e){return n=e,this},method:function(e){return o=e,this},timeout:function(e){return d=e,this},async:function(e){return s=e,this},params:function(e){if(e)for(var t in e){var r=e[t];null!=r&&(i[t]=r)}return this},headers:function(e){if(e)for(var t in e)a[t]=e[t];return this},handleType:function(e){return this.handleAs(e)},handleAs:function(e){if("json"!==e&&"text"!==e)throw"unknown handleType:"+e;return u=e,this},ok:function(e){return c=e,this},fail:function(e){return f=e,this},_beforeOpenHook:function(e){return x=e,this},_onOkResponseHook:function(e){return m=e,this},_onFailResponseHook:function(e){return y=e,this},done:function(){try{_()}catch(e){"function"==typeof f?f(e):console.error(e)}}}}httpRequest._beforeOpenHook=function(e,t,r){t()},httpRequest._onOkResponseHook=function(e,t,r,n){r(e)},httpRequest._onFailResponseHook=function(e,t,r,n){t(void 0)},window._xshttp_request_=httpRequest,xsloader$m.define("xshttp",[],function(){return httpRequest});var global$n=utils.global,xsloader$n=global$n.xsloader;xsloader$n.define("xsrequest",["xshttp"],function(t){return function(e){e=xsloader$n.extend({params:void 0,headers:void 0,method:void 0,url:void 0,callback:void 0},e);var r=!1,n=[function(e){return e}];return e.callback&&n.push(e.callback),n.callback=function(e){r=!0;for(var t=0;t<this.length;t++){if(!1===(e=(0,this[t])(e)))return}},e.ok=function(e){n.callback(e)},e.fail=function(e){n.callback({code:-1,desc:e})},e.async=!0,t(e).done(),function t(){return{then:function(e){if(r)throw new Error("already responsed!");return n.push(e),t()}}}()}});var global$o=utils.global,xsloader$o=global$o.xsloader,Ew,Fw,Gw,Hw,Iw;try{var isDebug=function(e){return isXsMsgDebug},LinkedList=function(){function o(e){return{element:e,next:null,pre:null}}var i=0,a=o(),s=a;function t(e,t){if(0<=e&&e<i){for(var r=a;e--;)r=r.next;if(r.next){var n=r.next;if(t){var o=n.next;o?(o.pre=r).next=o:(r.next=null,s=r),i--}return n.element}}else;}this.append=function(e){var t=o(e);(s.next=t).pre=s,s=t,i++},this.insert=function(e,t){if(0<=e&&e<=i){for(var r=o(t),n=a;e--;)n=n.next;return n.next&&((n.next.pre=r).next=n.next),(n.next=r).pre=n,i++,!0}return!1},this.elementAt=function(e){return t(e)},this.eachForRemove=function(e){for(var t=a.next;t;){var r=t;if(e(r)){var n=r.next;n?(n.pre=t).next=n:(t.next=null,s=t),i--,t=n}else t=t.next}},this.removeAt=function(e){return t(e,!0)},this.pop=function(e){return this.removeAt(0)},this.indexOf=function(e){for(var t=a.next,r=0;t;){if("function"==typeof e){if(e(t.element))return r}else if(t.element===e)return r;r++,t=t.next}return-1},this.find=function(e){var t=this.indexOf(e);return 0<=t?this.elementAt(t):void 0},this.remove=function(e){var t=this.indexOf(e);return this.removeAt(t)},this.isEmpty=function(){return 0===i},this.size=function(){return i}},isXsMsgDebug=!1,api={linkedList:function(){return new LinkedList}};if(window.addEventListener){var CommunicationUnit=function(t,r,e,n,o,i){var a,s=new LinkedList,l=100,u=500,d=!1,c=0,f=!1,h=this;function p(e,t){h.onConnectedListener.call(h,t),d=!0,m()}function g(e,t){try{h.onReceiveListener.call(h,e)}catch(e){console.warn(e)}postMessageBridge.sendResponse({id:t},a)}function v(t){s.remove(function(e){return e.id=t.id}),m()}function b(e){"binded"==e&&(f=!0,console.error("connect failed,that page already binded:"+t+",my page:"+location.href),n("canceled"))}function x(){a=postMessageBridge.listen(t,i,e,r,o,p,g,v,b)}function m(){if(d)for(var e;e=s.pop();)postMessageBridge.send(e.data,a,e.id)}function y(){d||l<c||f?d||f||n("timeout"):(postMessageBridge.sendConn(a),c++,postMessageBridge.runAfter(u,y))}this.onConnectedListener=null,this.onReceiveListener=null,this.send=function(e){var t={id:xsloader$o.randId(),data:e};s.append(t),m()},this.send.release=function(){postMessageBridge.remove(a)},r?(x(),y()):o||x(),this.setSource=function(e){(r=e)&&(x(),y())}},_connectWindow=function(e,t,r){var n,o=(t=xsloader$o.extendDeep({cmd:"default-cmd",listener:null,connected:null,conndata:null,connectingSource:function(e,t,r,n){n(location.protocol+"//"+location.host==t,"default")},onfailed:function(e){"timeout"==e&&console.warn("connect may timeout:cmd="+t.cmd+",my page="+location.href)}},t)).cmd,i=t.connected,a=t.listener,s=t.conndata,l=t.onfailed,u=!r,d=t.connectingSource;return n=new CommunicationUnit(o,"function"==typeof e?null:e,d,l,u,s),(i=i||function(e,t){console.log((u?"active":"")+" connected:"+o)})&&(n.onConnectedListener=function(e){try{i(this.send,e)}catch(e){console.error(e)}}),a&&(n.onReceiveListener=function(e){try{a(e,this.send)}catch(e){console.error(e)}}),"function"==typeof e&&e(function(e){n.setSource(e)}),n.send},_connectIFrame=function(t,e){var r;return r="string"==typeof t?function(e){t.onload=function(){e(this.contentWindow)}}:t.contentWindow,_connectWindow(r,e)},postMessageBridge=(Ew={},Fw={},Gw={},Hw={},Iw={},Ew.listen=function(e,t,r,n,o,i,a,s,l){var u={cmd:e,_onConned:i,_onMsg:a,_onResponse:s,_onElse:l,conndata:t,osource:n,active:o,connectingSource:r,id:xsloader$o.randId(),refused:{}};Gw[e]||(Gw[e]=[]),Gw[e].push(u);var d=u.id;return Fw[d]=u,d},Ew.remove=function(e){},Ew.send=function(e,t,r){var n=Fw[t];Qw("msg",n.cmd,n.osource,e,t,r)},Ew.sendConn=function(e){var t=Fw[e];Qw("conn",t.cmd,t.osource,t.conndata,e)},Ew.sendResponse=function(e,t){var r=Fw[t];Qw("response",r.cmd,r.osource,e,t)},window.addEventListener("message",function(e){var t;isDebug("postMessageBridge")&&(console.log("receive from:"+e.origin+",my page:"+location.href),console.log(e.data));try{t=xsloader$o.xsParseJson(e.data)}catch(e){console.warn(e)}if(t&&t.cmd&&t.type){var r=t.cmd,n=t.id,o=t.data,i=t.type,a=t.msgid;"conn"==i?function(o,i,a,e,s){if(!Iw[s]){var t=Gw[o];if(t)for(var r=0;r<t.length;r++){var n=t[r];n.refused[s]||n.connectingSource(i,a,e,l(n.id))}}function l(n){return function(e,t){if(e)if(Iw[s])console.warn("already bind other:"+o+",my page:"+location.href);else if(Hw[n])console.warn("already self bind:"+o+",my page:"+location.href),Qw("binded",o,i,s);else{Iw[s]=n,Hw[n]=!0;var r=Fw[n];r.osource=i,r.origin=a,Qw("accept",o,i,r.conndata,n,s)}else Fw[n].refused[s]=!0}}}(r,e.source,e.origin,o,n):"accept"==i?function(o,i,a,s,l,e){var t=Gw[o];if(t)for(var r=0;r<t.length;r++){var n=t[r];n.id!=e||n.refused[l]||n.connectingSource(i,a,s,u(n.id))}function u(n){return function(e,t){if(e)if(Iw[l])console.warn("already bind:"+o+",my page:"+location.href);else if(Hw[n])console.warn("already self bind:"+o+",my page:"+location.href),Qw("binded",o,i,l);else{Iw[l]=n,Hw[n]=!0;var r=Fw[n];r.osource=i,r.origin=a,Qw("conned",o,i,r.conndata,n),r._onConned(i,s)}else Fw[n].refused[l]=!0}}}(r,e.source,e.origin,o,n,a):"conned"==i?function(e,t,r,n,o){var i=Iw[o],a=Fw[i];Mw(a,t,r),a._onConned(a.osource,n)}(0,e.source,e.origin,o,n):"msg"==i?function(e,t,r,n,o,i){var a=Iw[o],s=Fw[a];Mw(s,t,r),s._onMsg(n,i)}(0,e.source,e.origin,o,n,a):"response"==i?function(e,t,r,n,o){var i=Iw[o],a=Fw[i];Mw(a,t,r),a._onResponse(n)}(0,e.source,e.origin,o,n):"binded"==i&&function(e,t,r,n){Fw[n]._onElse("binded")}(0,e.source,e.origin,o)}}),Ew.runAfter=function(e,t){setTimeout(t,e)},Ew),handleApi=api;handleApi.connectIFrame=function(e,t){return _connectIFrame(e,t)},handleApi.connectParent=function(e){return _connectWindow(window.parent,e)},handleApi.connectTop=function(e){return _connectWindow(window.top,e)},handleApi.connectOpener=function(e){return _connectWindow(window.opener,e)},handleApi.listenMessage=function(e){return _connectWindow(null,e,!0)},handleApi.debug=function(e){isXsMsgDebug=e},xsloader$o.define("xsmsg",handleApi)}xsloader$o.define("XsLinkedList",function(){return LinkedList})}catch(e){console.error(e)}function Mw(e,t,r){if(e.osource!=t&&e.origin!=r)throw console.warn("expected:"+e.origin+",but:"+r),new Error("source changed!")}function Qw(e,t,r,n,o,i){var a={type:e,data:n,cmd:t,id:o,msgid:i};isDebug("postMessageBridge")&&(console.log("send from:"+location.href),console.log(a)),r.postMessage(xsloader$o.xsJson2String(a),"*")}var global$p=utils.global,xsloader$p=global$p.xsloader,http=global$p._xshttp_request_,DATA_CONF="data-conf",DATA_CONFX="data-xsloader-conf",DATA_CONF2="data-conf2",DATA_CONF2X="data-xsloader-conf2",DATA_MAIN="data-main",DATA_MAINX="data-xsloader-main",DATA_CONF_TYPE="data-conf-type",serviceConfigUrl,dataConf=xsloader$p.script().getAttribute(DATA_CONF)||xsloader$p.script().getAttribute(DATA_CONFX),dataMain=xsloader$p.script().getAttribute(DATA_MAIN)||xsloader$p.script().getAttribute(DATA_MAINX),dataConfType=xsloader$p.script().getAttribute(DATA_CONF_TYPE);"json"!==dataConfType&&"js"!=dataConfType&&(dataConfType="auto");var initFun=function(){function s(e){var t=e.main.getPath.call(e,dataMain),r=location.pathname,n=r.lastIndexOf("/"),o=r.substring(n+1);return""===o&&(o="index"),xsloader$p.endsWith(o,".html")&&(o=o.substring(0,o.length-5)),t=(t=t||"./main/{name}.js").replace("{name}",o)}function i(t,r,n,o){http({url:r,method:"get",timeout:2e4,handleType:"text",ok:function(e){var t;(t=function(e){return e=xsloader$p.extendDeep({properties:{},main:{getPath:function(){return dataMain||"./main/{name}.js"},name:"main",localConfigVar:"lconfig",globalConfigVar:"gconfig",before:function(e){console.log("before:"+e)},after:function(e){console.log("after:"+e)}},service:{hasGlobal:!1,resUrls:[]},chooseLoader:function(e){return"default"},loader:{default:{autoUrlArgs:!0}}},e)}(t="js"==dataConfType?xsloader$p.xsEval(e):"json"==dataConfType?xsloader$p.xsParseJson(e):xsloader$p.startsWith(r,location.protocol+"//"+location.host+"/")?xsloader$p.xsEval(e):xsloader$p.xsParseJson(e))).beforeDealProperties&&t.beforeDealProperties(),t=xsloader$p.dealProperties(t,t.properties),o&&t.service.hasGlobal?i("global servie",t.service.confUrl,function(e){var t,r,n,o,i,a=o;global$p[e.main&&e.main.localConfigVar||a.main.localConfigVar]=a,null!=(n=(global$p[e.main&&e.main.globalConfigVar||a.main.globalConfigVar]=e).chooseLoader.call(e,a))&&(t=e.main.name,r=utils.getPathWithRelative(location.href,s(e)),i=e.loader[n],o=e),i||(n=a.chooseLoader.call(a,null),t=a.main.name,r=utils.getPathWithRelative(location.href,s(a)),i=a.loader[n],o=a),i?l(t,r,i,o,a):console.error("unknown loader:"+n)}):n(t)},fail:function(e){console.error("load "+t+" config err:url="+r+",errinfo="+e)}}).done()}function l(e,o,t,r,i,n){var a=[];if(i.service.resUrl&&a.push(i.service.resUrl),n!==i&&n.service.resUrl&&a.push(n.service.resUrl),i.service.resUrls&&Array.pushAll(a,i.service.resUrls),n!==i&&n.service.resUrls&&Array.pushAll(a,n.service.resUrls),xsloader$p._resUrlBuilder=function(t){var r=[];return utils.each(a,function(e){r.push(xsloader$p.appendArgs2Url(e,"m="+encodeURIComponent(t)))}),r},r.ignoreProperties=!0,r.defineFunction=r.defineFunction||{},r.depsPaths=r.depsPaths||{},-1!=t.indexOf("!")){var s=xsloader$p(r);o="_plugin_main_";var l=[];s.deps&&(s.deps["*"]&&Array.pushAll(l,s.deps["*"]),s.deps[o]&&Array.pushAll(l,s.deps[o])),l.push(t),xsloader$p.defineAsync(o,l,function(){}).then({absUrl:e})}else xsloader$p.hasDefine(o)||(r.depsPaths[o]=t),xsloader$p(r);r.defineFunction[o]=function(e,t,r){xsloader$p.isFunction(i.main.before)&&i.main.before.call(i,o);var n=e.apply(t,r);return xsloader$p.isFunction(i.main.after)&&i.main.after.call(i,o),n},xsloader$p.require([o],function(e){}).then({onError:function(e,t){t&&console.error("error occured:invoker.url=",t.getUrl()),console.error("invoke main err:"+e)}})}xsloader$p.asyncCall(function(){i("local",serviceConfigUrl,function(e){var t=(global$p[e.main.localConfigVar]=e).main.name,r=location.href,n=r.lastIndexOf("?");0<=n&&(r=r.substring(0,n));var o=s(e);o=-1==o.indexOf("!")?utils.getPathWithRelative(r,o):o;var i=e.chooseLoader.call(e,null),a=e.loader[i];a?l(r,t,o,a,e,e):console.error("unknown local loader:"+i)},!0)},!0)};dataConf?serviceConfigUrl=utils.getPathWithRelative(location.href,dataConf):(dataConf=xsloader$p.script().getAttribute(DATA_CONF2)||xsloader$p.script().getAttribute(DATA_CONF2X))?serviceConfigUrl=utils.getPathWithRelative(xsloader$p.scriptSrc(),dataConf):initFun=null,initFun&&initFun(),utils.loaderEnd()}();
//# sourceMappingURL=xsloader.min.js.map
