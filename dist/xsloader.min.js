!function(){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(r,!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var ABSOLUTE_PROTOCOL_REG=/^(([a-zA-Z0-9_]*:\/\/)|(\/)|(\/\/))/,ABSOLUTE_PROTOCOL_REG2=/^([a-zA-Z0-9_]+:)\/\/([^/\s]+)/;function dealPathMayAbsolute(e,t){t=t||location.href;var r,n,o=ABSOLUTE_PROTOCOL_REG.exec(e);if(o){var a=o[1];n=!0;var i=(o=ABSOLUTE_PROTOCOL_REG2.exec(t))&&o[1]||location.protocol,s=o&&o[2]||location.host;r="//"==a?i+"//"+e:"/"==a?i+"//"+s+e:e}else n=!1,r=e;return{absolute:n,path:r}}function getNodeAbsolutePath(e){var t=e.src;return xsloader.getPathWithRelative(location.href,t)}function removeQueryHash(e){if(e){var t=e.indexOf("?");0<=t&&(e=e.substring(0,t)),0<=(t=e.indexOf("#"))&&(e=e.substring(0,t))}return e}var REPLACE_STRING_PROPERTIES_EXP=new RegExp("\\$\\{([^\\{]+)\\}"),ALL_TYPE_PROPERTIES_EXP=new RegExp("^\\$\\[([^\\[\\]]+)\\]$");function propertiesDeal(e,u){if(!u)return e;function f(e,t,r){var n,o=e;if(n=ALL_TYPE_PROPERTIES_EXP.exec(o)){var a=n[1],i=xsloader.getObjectAttr(t,a);return void 0===i?o:i}for(var s="";;){if(!(n=REPLACE_STRING_PROPERTIES_EXP.exec(o))){s+=o;break}var l=n[1];if(void 0!==r&&r.propertyKey==l)throw new Error("replace property error:propertyKey="+l);r&&(r.has=!0),s+=o.substring(0,n.index),s+=xsloader.getObjectAttr(t,l),o=o.substring(n.index+n[0].length)}return s}function c(e,t,r){if(!e)return e;if(xsloader.isFunction(e))return e;if(xsloader.isArray(e))for(var n=0;n<e.length;n++)e[n]=c(e[n],t,r);else if(xsloader.isString(e))e=f(e,u,t);else if(xsloader.isObject(e)){t&&(t.has=!1);var o={};for(var a in e)if(t&&(t.propertyKey=a),e[a]=c(e[a],t,r),r){var i=f(a,u,t);i!==a&&(o[a]=i)}for(var s in o){var l=e[s];delete e[s],e[o[s]]=l}}return e}if(!u.__dealt__){var t={has:!1};for(var r in u){var n=u[r];xsloader.isFunction(n)&&(u[r]=n.call(u))}for(;c(u,t),t.has;);u.__dealt__=!0}return c(e,void 0,!0)}function replaceModulePrefix(e,t){if(t){for(var r=0;r<t.length;r++){var n=t[r],o=n.indexOf("!"),a=0<o?n.substring(o):"",i=0<(o=(n=0<o?n.substring(0,o):n).indexOf("?"))?n.substring(o):"";n=0<o?n.substring(0,o):n,_isJsFile(n)||!xsloader.startsWith(n,".")&&!dealPathMayAbsolute(n).absolute||(t[r]=n+".js"+i+a)}if(e.modulePrefixCount)for(var s in e.modulePrefix)for(var l=e.modulePrefix[s].replace,u=s.length,f=0;f<t.length;f++){var c=t[f],d=c.indexOf("!"),p=null;if(0<=d&&(p=c.substring(0,d+1),c=c.substring(d+1)),xsloader.startsWith(c,s)){var g=l+c.substring(u);t[f]=p?p+g:g}}}}var urls={getNodeAbsolutePath:getNodeAbsolutePath,dealPathMayAbsolute:dealPathMayAbsolute,removeQueryHash:removeQueryHash,propertiesDeal:propertiesDeal,replaceModulePrefix:replaceModulePrefix},g;if(void 0!==("undefined"==typeof window?"undefined":_typeof(window)))g=window;else if(void 0!==("undefined"==typeof self?"undefined":_typeof(self)))g=self;else{if(void 0===("undefined"==typeof global?"undefined":_typeof(global)))throw new Error("not found global var!");g=global}var utils=_objectSpread2({},urls,{global:g}),global$1=utils.global;global$1.xsloader=function(){};try{Function.prototype.bind&&console&&"object"==_typeof(console.log)&&["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind)}catch(e){try{window.console={log:function(){},error:function(){},warn:function(){}}}catch(e){}}try{Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var r=void 0===t?0:t;r<this.length;r++)if(this[r]==e)return r;return-1}),Array.pushAll||(Array.pushAll=function(e,t){if(!xsloader.isArray(t))throw new Error("not array:"+t);for(var r=0;r<t.length;r++)e.push(t[r]);return e})}catch(e){console.error(e)}function startsWith(e,t){return"string"==typeof e&&0==e.indexOf(t)}function endsWith(e,t){if("string"!=typeof e)return!1;var r=e.lastIndexOf(t);return 0<=r&&e.length-t.length==r}function _indexInArray(e,t){var r=3<arguments.length?arguments[3]:void 0,n=-1;if(e)for(var o=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)||0;o<e.length;o++)if(r){if(r(e[o],t,o,e)){n=o;break}}else if(e[o]==t){n=o;break}return n}function indexInArray(e,t,r){return _indexInArray(e,t,0,r)}function indexInArrayFrom(e,t,r,n){return _indexInArray(e,t,r,n)}var deprecated={startsWith:startsWith,endsWith:endsWith,indexInArray:indexInArray,indexInArrayFrom:indexInArrayFrom},JSON={},rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var r,n,o,a,i,s=gap,l=t[e];switch(l&&"object"===_typeof(l)&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),_typeof(l)){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,i=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,r=0;r<a;r+=1)i[r]=str(r,l)||"null";return o=0===i.length?"[]":gap?"[\n"+gap+i.join(",\n"+gap)+"\n"+s+"]":"["+i.join(",")+"]",gap=s,o}if(rep&&"object"===_typeof(rep))for(a=rep.length,r=0;r<a;r+=1)"string"==typeof rep[r]&&(o=str(n=rep[r],l))&&i.push(quote(n)+(gap?": ":":")+o);else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(o=str(n,l))&&i.push(quote(n)+(gap?": ":":")+o);return o=0===i.length?"{}":gap?"{\n"+gap+i.join(",\n"+gap)+"\n"+s+"}":"{"+i.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,r){var n;if(indent=gap="","number"==typeof r)for(n=0;n<r;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if((rep=t)&&"function"!=typeof t&&("object"!==_typeof(t)||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var r,n,o=e[t];if(o&&"object"===_typeof(o))for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(void 0!==(n=walk(o,r))?o[r]=n:delete o[r]);return reviver.call(e,t,o)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")});var idCount=2019;function randId(e){var t="r"+parseInt((new Date).getTime()/1e3)+"_"+parseInt(1e3*Math.random())+"_"+idCount++;return void 0!==e&&(t+=e),t}function xsEval(scriptString){try{var rs=0<xsloader.IE_VERSION&&xsloader.IE_VERSION<9?eval("["+scriptString+"][0]"):eval("("+scriptString+")");return rs}catch(e){throw e}}function xsParseJson(t,e){if(""===t||null==t||!xsloader.isString(t))return t;e=xsloader.extend({fnStart:"",fnEnd:"",rcomment:"\\/\\/#\\/\\/"},e);var r={},n=0,o=void 0;if(e.fnStart&&e.fnEnd){for(;;){var a=t.indexOf(e.fnStart,n),i=t.indexOf(e.fnEnd,-1==a?n:a+e.fnStart.length);if(-1==a&&-1==i)break;if(-1==a){console.warn("found end:"+e.fnEnd+",may lack start:"+e.fnStart);break}if(-1==i){console.warn("found start:"+e.fnStart+",may lack end:"+e.fnEnd);break}var s="_[_"+randId()+"_]_",l=t.substring(a+e.fnStart.length,i).trim();if(!xsloader.startsWith(l,"function("))throw"not a function:"+l;try{t=t.substring(0,a)+'"'+s+'"'+t.substring(i+e.fnEnd.length);var u=xsloader.xsEval(l);r[s]=u}catch(e){throw console.error(l),e}n=a+s.length}o=function(e,t){return xsloader.isString(t)&&r[t]?r[t]:t}}e.rcomment&&(t=(t=t.replace(/(\r\n)|\r/g,"\n")).replace(new RegExp(e.rcomment+"[^\\n]*(\\n|$)","g"),""));try{return JSON.parse(t,o)}catch(e){try{var f=new RegExp("position[\\s]*([0-9]+)[\\s]*$");if(e.message&&f.test(e.message)){var c=e.message.substring(e.message.lastIndexOf("position")+8),d=parseInt(c.trim()),p=t.substring(d);console.error(e.message+":"+p.substring(0,100<p.length?100:p.length))}}catch(e){}throw e}}function xsJson2String(e){return JSON.stringify(e)}function getPathWithRelative(e,t,r){var n="",o=e.lastIndexOf("?");0<=o?e=e.substring(0,o):0<=(o=e.lastIndexOf("#"))&&(e=e.substring(0,o)),0<=(o=t.lastIndexOf("?"))?(n=t.substring(o),t=t.substring(0,o)):0<=(o=t.lastIndexOf("#"))&&(n=t.substring(o),t=t.substring(0,o));var a=utils.dealPathMayAbsolute(t);if(a.absolute)return a.path+n;if(void 0===r){var i=e.lastIndexOf("/");r=i==e.length-1||(-1==i?i=0:i++,-1==e.indexOf(".",i))}xsloader.endsWith(e,"/")&&(e=e.substring(0,e.length-1));var s=!1;"."==t||xsloader.endsWith(t,"/")?(t=t.substring(0,t.length-1),s=!0):("."==t||".."==t||xsloader.endsWith("/.")||xsloader.endsWith("/.."))&&(s=!0);var l,u=-1,f=utils.dealPathMayAbsolute(e);if(f.absolute){var c=(e=f.path).indexOf("//");-1==(u=e.indexOf("/",c+2))&&(u=e.length)}l=e.substring(0,u+1);var d=(e=e.substring(u+1)).split("/");!r&&0<d.length&&d.pop();for(var p=t.split("/"),g=0;g<p.length;g++){var h=p[g];if(".."==h){if(0==d.length)throw new Error("no more upper path!");d.pop()}else"."!=h&&d.push(h)}if(0==d.length)return"";var b=l+d.join("/");return s&&!xsloader.endsWith(b,"/")&&(b+="/"),b=appendArgs2Url(b,n)}function _toParamsMap(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(isObject(e))return e;var r=(e=e||location.search).indexOf("?");if(0<=r)e=e.substring(r+1);else if(utils.dealPathMayAbsolute(e).absolute)return{};0<=(r=e.lastIndexOf("#"))&&(e=e.substring(0,r));for(var n,o={},a=e.split("&"),i=0;i<a.length;i++){if(a[i])n=a[i].split("="),o[t?decodeURIComponent(n[0]):n[0]]=t?decodeURIComponent(n[1]):n[1]}return o}function appendArgs2Url(e,t){if(null==e||!t)return e;var r=e.lastIndexOf("?"),n=e.lastIndexOf("#");n<0&&(n=e.length);var o=r<0?{}:_toParamsMap(e.substring(r+1,n),!1),a=_toParamsMap(t,!1),i=!1;for(var s in a)o[s]!=a[s]&&(o[s]=a[s],i=!0);if(!i)return e;var l=[];for(var u in o)l.push(u);l.sort();for(var f=r<0?e.substring(0,n):e.substring(0,r),c=[],d=0;d<l.length;d++){var p=l[d];c.push(p+"="+o[p])}c=c.join("&");var g="";return 0<=n&&n<e.length&&(g=e.substring(n)),f+(c?"?"+c:"")+(g||"")}function queryString2ParamsMap(e,t){return _toParamsMap(e,t)}var base={randId:randId,xsEval:xsEval,xsParseJson:xsParseJson,xsJson2String:xsJson2String,getPathWithRelative:getPathWithRelative,appendArgs2Url:appendArgs2Url,queryString2ParamsMap:queryString2ParamsMap},ostring=Object.prototype.toString;function isArray(e){return e&&e instanceof Array||"[object Array]"===ostring.call(e)}function isFunction(e){return e&&"function"==typeof e||"[object Function]"===ostring.call(e)}function isObject$1(e){return null!=e&&("object"==_typeof(e)||"[object Object]"===ostring.call(e))}function isString(e){return e&&"string"==typeof e||"[object String]"===ostring.call(e)}function isDate(e){return e&&e instanceof Date||"[object Date]"===ostring.call(e)}function isRegExp(e){return e&&e instanceof RegExp||"[object RegExp]"===ostring.call(e)}var is={isArray:isArray,isFunction:isFunction,isObject:isObject$1,isString:isString,isDate:isDate,isRegExp:isRegExp},xsloader$1=utils.global.xsloader;function queryParam(e,t,r){var n;if(r){var o=r.indexOf("?");o<0?o=0:o+=1,n=r.substr(o)}else n=window.location.search.substr(1);var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=n.match(a);return null!=i?decodeURIComponent(i[2]):void 0!==t?t:null}function getUrl(e,t,r){r&&!utils.dealPathMayAbsolute(r).absolute&&throwError(-1,"expected absolute url:"+r),void 0===t&&(t=!0);var n,o=xsloader$1.config(),a=xsloader$1.pageUrl();return n=void 0===e?a:xsloader$1.startsWith(e,".")||utils.dealPathMayAbsolute(e).absolute?xsloader$1.getPathWithRelative(r||a,e):o.baseUrl+e,t?(n==a&&(n+=location.search+location.hash),o.dealUrl({},n)):n}function tryCall(e,t,r,n){var o;try{r=void 0===r?this:r,o=e.call(r)}catch(e){xsloader$1.isFunction(n)?n(e):console.warn(e)}return null==o&&(o=t),o}function dealProperties(e,t){return utils.propertiesDeal(e,t)}function extend(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n in r){void 0!==r[n]&&(e[n]=r[n])}}return e}function extendDeep(e){if(!e)return e;for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n in r){var o=r[n];void 0!==o&&(xsloader$1.isObject(o)&&xsloader$1.isObject(e[n])?e[n]=xsloader$1.extendDeep(e[n],o):e[n]=r[n])}}return e}function _AsyncCall(o){var i=this,s=0,l={};this.pushTask=function(e,t){var r,n={next:function(e,t){return r.nextCallback.push({callback:e,lastReturn:t}),this}};return function(e){var a=s+"";if(!l[a]){var t=function(){s++;var e=l[a];for(delete l[a];e.length;){var t=e.shift(),r=void 0;try{t.callback&&(r=t.callback.call(t.handle,t.obj,a))}catch(e){console.error(e)}for(var n=void 0;t.nextCallback.length;){var o=t.nextCallback.shift();n?n.next(o.callback):n=i.pushTask(o.callback,r)}}};l[a]=[],!o&&global.Promise&&global.Promise.resolve?global.Promise.resolve().then(t):setTimeout(t,0)}l[a].push(e)}(r={callback:e,obj:t,nextCallback:[],handle:n}),n}}var theAsyncCall=new _AsyncCall,theAsyncCallOfTimer=new _AsyncCall(!0),asyncCall=function(e,t){return t?theAsyncCallOfTimer.pushTask(e):theAsyncCall.pushTask(e)};function getObjectAttr(e,t,r){if(e&&t){for(var n=t.split("."),o=r,a=0;a<n.length&&e;a++){e=e[n[a]]}return a==n.length&&(o=e),o}}function setObjectAttr(e,t,r){for(var n=e,o=t.split("."),a=0;a<o.length;a++){var i=o[a];if(a==o.length-1){e[i]=r;break}var s=e[i];s||(s={},e[i]=s),e=s}return n}function clone(e,t){if(!e||xsloader$1.isFunction(e)||xsloader$1.isString(e))return e;if(xsloader$1.isRegExp(e))return new RegExp(e.source,e.flags);if(xsloader$1.isDate(e)){var r=new Date;return r.setTime(e.getTime()),r}if(xsloader$1.isArray(e)||xsloader$1.isObject(e)){var n=xsloader$1.isArray(e)?[]:{};for(var o in e)e.hasOwnProperty(o)&&(n[o]=t?clone(e[o]):e[o]);return n}return e}var funs={queryParam:queryParam,getUrl:getUrl,tryCall:tryCall,dealProperties:dealProperties,extend:extend,extendDeep:extendDeep,asyncCall:asyncCall,getObjectAttr:getObjectAttr,setObjectAttr:setObjectAttr,clone:clone},global$2=utils.global,isDOM="object"===("undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement))?function(e){return e&&e instanceof HTMLElement}:function(e){return e&&"object"===_typeof(e)&&1===e.nodeType&&"string"==typeof e.nodeName},onReadyFun=function(){var n=!1,r=[];function o(e){if(n)e();else{var t=!1;document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee),r()}):document.attachEvent?(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),r())}),document.documentElement.doScroll&&void 0===global$2.frameElement&&function(){if(!t){try{document.documentElement.doScroll("left")}catch(e){return setTimeout(arguments.callee,0)}r()}}()):xsloader.asyncCall(null,!0).next(function(){r()}),this.readyCall=r}function r(){t||(n=t=!0,e())}}function e(e){"complete"===document.readyState&&(n=!0);var t=new o(e);n||r.push(t)}(e(function(){n=!0}),"complete"===document.readyState)?n=!0:(global$2.addEventListener?function(e,t){global$2.addEventListener(e,t,!1)}:global$2.attachEvent?function(e,t){global$2.attachEvent("on"+e,t)}:function(e,t){xsloader.asyncCall(null,!0).next(function(){t()})})("load",function(){for(n=!0;r.length;)r.shift().readyCall()});return e}(),browser={isDOM:isDOM,onReady:onReadyFun},global$3=utils.global,toGlobal=_objectSpread2({},deprecated,{},base);for(var k in objs)xsloader[k]=objs[k],global$3[k]=objs[k];var justLoader=_objectSpread2({},is,{},funs,{},browser,{_ignoreAspect_:{}});for(var _k in justLoader)xsloader[_k]=justLoader[_k]}();
//# sourceMappingURL=xsloader.min.js.map
